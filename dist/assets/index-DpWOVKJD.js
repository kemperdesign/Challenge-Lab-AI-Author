(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Hm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uu={exports:{}},ri={},cu={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function DT(){if(Fp)return we;Fp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=T&&R[T]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function N(R,M,X){this.props=R,this.context=M,this.refs=k,this.updater=X||_}N.prototype.isReactComponent={},N.prototype.setState=function(R,M){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,M,"setState")},N.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function B(){}B.prototype=N.prototype;function D(R,M,X){this.props=R,this.context=M,this.refs=k,this.updater=X||_}var F=D.prototype=new B;F.constructor=D,A(F,N.prototype),F.isPureReactComponent=!0;var U=Array.isArray,H=Object.prototype.hasOwnProperty,O={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ie(R,M,X){var ue,ce={},ye=null,_e=null;if(M!=null)for(ue in M.ref!==void 0&&(_e=M.ref),M.key!==void 0&&(ye=""+M.key),M)H.call(M,ue)&&!q.hasOwnProperty(ue)&&(ce[ue]=M[ue]);var Ce=arguments.length-2;if(Ce===1)ce.children=X;else if(1<Ce){for(var Ne=Array(Ce),yt=0;yt<Ce;yt++)Ne[yt]=arguments[yt+2];ce.children=Ne}if(R&&R.defaultProps)for(ue in Ce=R.defaultProps,Ce)ce[ue]===void 0&&(ce[ue]=Ce[ue]);return{$$typeof:n,type:R,key:ye,ref:_e,props:ce,_owner:O.current}}function z(R,M){return{$$typeof:n,type:R.type,key:M,ref:R.ref,props:R.props,_owner:R._owner}}function J(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function te(R){var M={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return M[X]})}var me=/\/+/g;function Ee(R,M){return typeof R=="object"&&R!==null&&R.key!=null?te(""+R.key):M.toString(36)}function Ye(R,M,X,ue,ce){var ye=typeof R;(ye==="undefined"||ye==="boolean")&&(R=null);var _e=!1;if(R===null)_e=!0;else switch(ye){case"string":case"number":_e=!0;break;case"object":switch(R.$$typeof){case n:case e:_e=!0}}if(_e)return _e=R,ce=ce(_e),R=ue===""?"."+Ee(_e,0):ue,U(ce)?(X="",R!=null&&(X=R.replace(me,"$&/")+"/"),Ye(ce,M,X,"",function(yt){return yt})):ce!=null&&(J(ce)&&(ce=z(ce,X+(!ce.key||_e&&_e.key===ce.key?"":(""+ce.key).replace(me,"$&/")+"/")+R)),M.push(ce)),1;if(_e=0,ue=ue===""?".":ue+":",U(R))for(var Ce=0;Ce<R.length;Ce++){ye=R[Ce];var Ne=ue+Ee(ye,Ce);_e+=Ye(ye,M,X,Ne,ce)}else if(Ne=w(R),typeof Ne=="function")for(R=Ne.call(R),Ce=0;!(ye=R.next()).done;)ye=ye.value,Ne=ue+Ee(ye,Ce++),_e+=Ye(ye,M,X,Ne,ce);else if(ye==="object")throw M=String(R),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return _e}function Ke(R,M,X){if(R==null)return R;var ue=[],ce=0;return Ye(R,ue,"","",function(ye){return M.call(X,ye,ce++)}),ue}function be(R){if(R._status===-1){var M=R._result;M=M(),M.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=M)}if(R._status===1)return R._result.default;throw R._result}var ke={current:null},Y={transition:null},Z={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:Y,ReactCurrentOwner:O};function K(){throw Error("act(...) is not supported in production builds of React.")}return we.Children={map:Ke,forEach:function(R,M,X){Ke(R,function(){M.apply(this,arguments)},X)},count:function(R){var M=0;return Ke(R,function(){M++}),M},toArray:function(R){return Ke(R,function(M){return M})||[]},only:function(R){if(!J(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},we.Component=N,we.Fragment=t,we.Profiler=s,we.PureComponent=D,we.StrictMode=o,we.Suspense=g,we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,we.act=K,we.cloneElement=function(R,M,X){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ue=A({},R.props),ce=R.key,ye=R.ref,_e=R._owner;if(M!=null){if(M.ref!==void 0&&(ye=M.ref,_e=O.current),M.key!==void 0&&(ce=""+M.key),R.type&&R.type.defaultProps)var Ce=R.type.defaultProps;for(Ne in M)H.call(M,Ne)&&!q.hasOwnProperty(Ne)&&(ue[Ne]=M[Ne]===void 0&&Ce!==void 0?Ce[Ne]:M[Ne])}var Ne=arguments.length-2;if(Ne===1)ue.children=X;else if(1<Ne){Ce=Array(Ne);for(var yt=0;yt<Ne;yt++)Ce[yt]=arguments[yt+2];ue.children=Ce}return{$$typeof:n,type:R.type,key:ce,ref:ye,props:ue,_owner:_e}},we.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:a,_context:R},R.Consumer=R},we.createElement=ie,we.createFactory=function(R){var M=ie.bind(null,R);return M.type=R,M},we.createRef=function(){return{current:null}},we.forwardRef=function(R){return{$$typeof:p,render:R}},we.isValidElement=J,we.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:be}},we.memo=function(R,M){return{$$typeof:h,type:R,compare:M===void 0?null:M}},we.startTransition=function(R){var M=Y.transition;Y.transition={};try{R()}finally{Y.transition=M}},we.unstable_act=K,we.useCallback=function(R,M){return ke.current.useCallback(R,M)},we.useContext=function(R){return ke.current.useContext(R)},we.useDebugValue=function(){},we.useDeferredValue=function(R){return ke.current.useDeferredValue(R)},we.useEffect=function(R,M){return ke.current.useEffect(R,M)},we.useId=function(){return ke.current.useId()},we.useImperativeHandle=function(R,M,X){return ke.current.useImperativeHandle(R,M,X)},we.useInsertionEffect=function(R,M){return ke.current.useInsertionEffect(R,M)},we.useLayoutEffect=function(R,M){return ke.current.useLayoutEffect(R,M)},we.useMemo=function(R,M){return ke.current.useMemo(R,M)},we.useReducer=function(R,M,X){return ke.current.useReducer(R,M,X)},we.useRef=function(R){return ke.current.useRef(R)},we.useState=function(R){return ke.current.useState(R)},we.useSyncExternalStore=function(R,M,X){return ke.current.useSyncExternalStore(R,M,X)},we.useTransition=function(){return ke.current.useTransition()},we.version="18.3.1",we}var Op;function rc(){return Op||(Op=1,cu.exports=DT()),cu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function UT(){if(Gp)return ri;Gp=1;var n=rc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(p,g,h){var y,T={},w=null,_=null;h!==void 0&&(w=""+h),g.key!==void 0&&(w=""+g.key),g.ref!==void 0&&(_=g.ref);for(y in g)o.call(g,y)&&!a.hasOwnProperty(y)&&(T[y]=g[y]);if(p&&p.defaultProps)for(y in g=p.defaultProps,g)T[y]===void 0&&(T[y]=g[y]);return{$$typeof:e,type:p,key:w,ref:_,props:T,_owner:s.current}}return ri.Fragment=t,ri.jsx=d,ri.jsxs=d,ri}var qp;function FT(){return qp||(qp=1,uu.exports=UT()),uu.exports}var E=FT(),pe=rc();const OT=Hm(pe);var bs={},du={exports:{}},It={},fu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function GT(){return Vp||(Vp=1,(function(n){function e(Y,Z){var K=Y.length;Y.push(Z);e:for(;0<K;){var R=K-1>>>1,M=Y[R];if(0<s(M,Z))Y[R]=Z,Y[K]=M,K=R;else break e}}function t(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var Z=Y[0],K=Y.pop();if(K!==Z){Y[0]=K;e:for(var R=0,M=Y.length,X=M>>>1;R<X;){var ue=2*(R+1)-1,ce=Y[ue],ye=ue+1,_e=Y[ye];if(0>s(ce,K))ye<M&&0>s(_e,ce)?(Y[R]=_e,Y[ye]=K,R=ye):(Y[R]=ce,Y[ue]=K,R=ue);else if(ye<M&&0>s(_e,K))Y[R]=_e,Y[ye]=K,R=ye;else break e}}return Z}function s(Y,Z){var K=Y.sortIndex-Z.sortIndex;return K!==0?K:Y.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var g=[],h=[],y=1,T=null,w=3,_=!1,A=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(Y){for(var Z=t(h);Z!==null;){if(Z.callback===null)o(h);else if(Z.startTime<=Y)o(h),Z.sortIndex=Z.expirationTime,e(g,Z);else break;Z=t(h)}}function U(Y){if(k=!1,F(Y),!A)if(t(g)!==null)A=!0,be(H);else{var Z=t(h);Z!==null&&ke(U,Z.startTime-Y)}}function H(Y,Z){A=!1,k&&(k=!1,B(ie),ie=-1),_=!0;var K=w;try{for(F(Z),T=t(g);T!==null&&(!(T.expirationTime>Z)||Y&&!te());){var R=T.callback;if(typeof R=="function"){T.callback=null,w=T.priorityLevel;var M=R(T.expirationTime<=Z);Z=n.unstable_now(),typeof M=="function"?T.callback=M:T===t(g)&&o(g),F(Z)}else o(g);T=t(g)}if(T!==null)var X=!0;else{var ue=t(h);ue!==null&&ke(U,ue.startTime-Z),X=!1}return X}finally{T=null,w=K,_=!1}}var O=!1,q=null,ie=-1,z=5,J=-1;function te(){return!(n.unstable_now()-J<z)}function me(){if(q!==null){var Y=n.unstable_now();J=Y;var Z=!0;try{Z=q(!0,Y)}finally{Z?Ee():(O=!1,q=null)}}else O=!1}var Ee;if(typeof D=="function")Ee=function(){D(me)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Ke=Ye.port2;Ye.port1.onmessage=me,Ee=function(){Ke.postMessage(null)}}else Ee=function(){N(me,0)};function be(Y){q=Y,O||(O=!0,Ee())}function ke(Y,Z){ie=N(function(){Y(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){A||_||(A=!0,be(H))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(g)},n.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var Z=3;break;default:Z=w}var K=w;w=Z;try{return Y()}finally{w=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,Z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=w;w=Y;try{return Z()}finally{w=K}},n.unstable_scheduleCallback=function(Y,Z,K){var R=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?R+K:R):K=R,Y){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=K+M,Y={id:y++,callback:Z,priorityLevel:Y,startTime:K,expirationTime:M,sortIndex:-1},K>R?(Y.sortIndex=K,e(h,Y),t(g)===null&&Y===t(h)&&(k?(B(ie),ie=-1):k=!0,ke(U,K-R))):(Y.sortIndex=M,e(g,Y),A||_||(A=!0,be(H))),Y},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(Y){var Z=w;return function(){var K=w;w=Z;try{return Y.apply(this,arguments)}finally{w=K}}}})(pu)),pu}var Bp;function qT(){return Bp||(Bp=1,fu.exports=GT()),fu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function VT(){if($p)return It;$p=1;var n=rc(),e=qT();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function a(r,i){d(r,i),d(r+"Capture",i)}function d(r,i){for(s[r]=i,r=0;r<i.length;r++)o.add(i[r])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},T={};function w(r){return g.call(T,r)?!0:g.call(y,r)?!1:h.test(r)?T[r]=!0:(y[r]=!0,!1)}function _(r,i,l,f){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function A(r,i,l,f){if(i===null||typeof i>"u"||_(r,i,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function k(r,i,l,f,m,v,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=v,this.removeEmptyString=S}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){N[r]=new k(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];N[i]=new k(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){N[r]=new k(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){N[r]=new k(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){N[r]=new k(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){N[r]=new k(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){N[r]=new k(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){N[r]=new k(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){N[r]=new k(r,5,!1,r.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function D(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(B,D);N[i]=new k(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(B,D);N[i]=new k(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(B,D);N[i]=new k(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){N[r]=new k(r,1,!1,r.toLowerCase(),null,!1,!1)}),N.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){N[r]=new k(r,1,!1,r.toLowerCase(),null,!0,!0)});function F(r,i,l,f){var m=N.hasOwnProperty(i)?N[i]:null;(m!==null?m.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(A(i,l,m,f)&&(l=null),f||m===null?w(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):m.mustUseProperty?r[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,f=m.attributeNamespace,l===null?r.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,f?r.setAttributeNS(f,i,l):r.setAttribute(i,l))))}var U=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),O=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),te=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),Y=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var K=Object.assign,R;function M(r){if(R===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);R=i&&i[1]||""}return`
`+R+r}var X=!1;function ue(r,i){if(!r||X)return"";X=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(L){var f=L}Reflect.construct(r,[],i)}else{try{i.call()}catch(L){f=L}r.call(i.prototype)}else{try{throw Error()}catch(L){f=L}r()}}catch(L){if(L&&f&&typeof L.stack=="string"){for(var m=L.stack.split(`
`),v=f.stack.split(`
`),S=m.length-1,C=v.length-1;1<=S&&0<=C&&m[S]!==v[C];)C--;for(;1<=S&&0<=C;S--,C--)if(m[S]!==v[C]){if(S!==1||C!==1)do if(S--,C--,0>C||m[S]!==v[C]){var x=`
`+m[S].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=S&&0<=C);break}}}finally{X=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?M(r):""}function ce(r){switch(r.tag){case 5:return M(r.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return r=ue(r.type,!1),r;case 11:return r=ue(r.type.render,!1),r;case 1:return r=ue(r.type,!0),r;default:return""}}function ye(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case q:return"Fragment";case O:return"Portal";case z:return"Profiler";case ie:return"StrictMode";case Ee:return"Suspense";case Ye:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case te:return(r.displayName||"Context")+".Consumer";case J:return(r._context.displayName||"Context")+".Provider";case me:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ke:return i=r.displayName||null,i!==null?i:ye(r.type)||"Memo";case be:i=r._payload,r=r._init;try{return ye(r(i))}catch{}}return null}function _e(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(i);case 8:return i===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ce(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ne(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(r){var i=Ne(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),f=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function xr(r){r._valueTracker||(r._valueTracker=yt(r))}function Ci(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),f="";return r&&(f=Ne(r)?r.checked?"true":"false":r.value),r=f,r!==l?(i.setValue(r),!0):!1}function fe(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Le(r,i){var l=i.checked;return K({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Xe(r,i){var l=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;l=Ce(i.value!=null?i.value:l),r._wrapperState={initialChecked:f,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Re(r,i){i=i.checked,i!=null&&F(r,"checked",i,!1)}function Rt(r,i){Re(r,i);var l=Ce(i.value),f=i.type;if(l!=null)f==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?Ot(r,i.type,l):i.hasOwnProperty("defaultValue")&&Ot(r,i.type,Ce(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function St(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ot(r,i,l){(i!=="number"||fe(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Nt=Array.isArray;function an(r,i,l,f){if(r=r.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=i.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&f&&(r[l].defaultSelected=!0)}else{for(l=""+Ce(l),i=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,f&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function Gt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Te(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Nt(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:Ce(l)}}function Se(r,i){var l=Ce(i.value),f=Ce(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),f!=null&&(r.defaultValue=""+f)}function qt(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function De(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?De(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var yn,Ar=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,f,m){MSApp.execUnsafeLocalFunction(function(){return r(i,l,f,m)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=yn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function sr(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gy=["Webkit","ms","Moz","O"];Object.keys(wo).forEach(function(r){Gy.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),wo[i]=wo[r]})});function Qc(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||wo.hasOwnProperty(r)&&wo[r]?(""+i).trim():i+"px"}function Zc(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var f=l.indexOf("--")===0,m=Qc(l,i[l],f);l==="float"&&(l="cssFloat"),f?r.setProperty(l,m):r[l]=m}}var qy=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sa(r,i){if(i){if(qy[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ea(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _a=null;function Ca(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xa=null,Ir=null,kr=null;function jc(r){if(r=Bo(r)){if(typeof xa!="function")throw Error(t(280));var i=r.stateNode;i&&(i=zi(i),xa(r.stateNode,r.type,i))}}function ed(r){Ir?kr?kr.push(r):kr=[r]:Ir=r}function td(){if(Ir){var r=Ir,i=kr;if(kr=Ir=null,jc(r),i)for(r=0;r<i.length;r++)jc(i[r])}}function nd(r,i){return r(i)}function rd(){}var Aa=!1;function od(r,i,l){if(Aa)return r(i,l);Aa=!0;try{return nd(r,i,l)}finally{Aa=!1,(Ir!==null||kr!==null)&&(rd(),td())}}function So(r,i){var l=r.stateNode;if(l===null)return null;var f=zi(l);if(f===null)return null;l=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Ia=!1;if(p)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{Ia=!1}function Vy(r,i,l,f,m,v,S,C,x){var L=Array.prototype.slice.call(arguments,3);try{i.apply(l,L)}catch(V){this.onError(V)}}var _o=!1,xi=null,Ai=!1,ka=null,By={onError:function(r){_o=!0,xi=r}};function $y(r,i,l,f,m,v,S,C,x){_o=!1,xi=null,Vy.apply(By,arguments)}function Hy(r,i,l,f,m,v,S,C,x){if($y.apply(this,arguments),_o){if(_o){var L=xi;_o=!1,xi=null}else throw Error(t(198));Ai||(Ai=!0,ka=L)}}function ar(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function id(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function sd(r){if(ar(r)!==r)throw Error(t(188))}function Yy(r){var i=r.alternate;if(!i){if(i=ar(r),i===null)throw Error(t(188));return i!==r?null:r}for(var l=r,f=i;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return sd(m),r;if(v===f)return sd(m),i;v=v.sibling}throw Error(t(188))}if(l.return!==f.return)l=m,f=v;else{for(var S=!1,C=m.child;C;){if(C===l){S=!0,l=m,f=v;break}if(C===f){S=!0,f=m,l=v;break}C=C.sibling}if(!S){for(C=v.child;C;){if(C===l){S=!0,l=v,f=m;break}if(C===f){S=!0,f=v,l=m;break}C=C.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:i}function ad(r){return r=Yy(r),r!==null?ld(r):null}function ld(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ld(r);if(i!==null)return i;r=r.sibling}return null}var ud=e.unstable_scheduleCallback,cd=e.unstable_cancelCallback,Wy=e.unstable_shouldYield,zy=e.unstable_requestPaint,ze=e.unstable_now,Jy=e.unstable_getCurrentPriorityLevel,Ra=e.unstable_ImmediatePriority,dd=e.unstable_UserBlockingPriority,Ii=e.unstable_NormalPriority,Ky=e.unstable_LowPriority,fd=e.unstable_IdlePriority,ki=null,ln=null;function Xy(r){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ki,r,void 0,(r.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:jy,Qy=Math.log,Zy=Math.LN2;function jy(r){return r>>>=0,r===0?32:31-(Qy(r)/Zy|0)|0}var Ri=64,Ni=4194304;function Co(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Pi(r,i){var l=r.pendingLanes;if(l===0)return 0;var f=0,m=r.suspendedLanes,v=r.pingedLanes,S=l&268435455;if(S!==0){var C=S&~m;C!==0?f=Co(C):(v&=S,v!==0&&(f=Co(v)))}else S=l&~m,S!==0?f=Co(S):v!==0&&(f=Co(v));if(f===0)return 0;if(i!==0&&i!==f&&(i&m)===0&&(m=f&-f,v=i&-i,m>=v||m===16&&(v&4194240)!==0))return i;if((f&4)!==0&&(f|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=f;0<i;)l=31-Kt(i),m=1<<l,f|=r[l],i&=~m;return f}function ev(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tv(r,i){for(var l=r.suspendedLanes,f=r.pingedLanes,m=r.expirationTimes,v=r.pendingLanes;0<v;){var S=31-Kt(v),C=1<<S,x=m[S];x===-1?((C&l)===0||(C&f)!==0)&&(m[S]=ev(C,i)):x<=i&&(r.expiredLanes|=C),v&=~C}}function Na(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function pd(){var r=Ri;return Ri<<=1,(Ri&4194240)===0&&(Ri=64),r}function Pa(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function xo(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Kt(i),r[i]=l}function nv(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<l;){var m=31-Kt(l),v=1<<m;i[m]=0,f[m]=-1,r[m]=-1,l&=~v}}function ba(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var f=31-Kt(l),m=1<<f;m&i|r[f]&i&&(r[f]|=i),l&=~m}}var Pe=0;function hd(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var md,Ma,gd,yd,vd,La=!1,bi=[],Mn=null,Ln=null,Dn=null,Ao=new Map,Io=new Map,Un=[],rv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(r,i){switch(r){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Ao.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(i.pointerId)}}function ko(r,i,l,f,m,v){return r===null||r.nativeEvent!==v?(r={blockedOn:i,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},i!==null&&(i=Bo(i),i!==null&&Ma(i)),r):(r.eventSystemFlags|=f,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function ov(r,i,l,f,m){switch(i){case"focusin":return Mn=ko(Mn,r,i,l,f,m),!0;case"dragenter":return Ln=ko(Ln,r,i,l,f,m),!0;case"mouseover":return Dn=ko(Dn,r,i,l,f,m),!0;case"pointerover":var v=m.pointerId;return Ao.set(v,ko(Ao.get(v)||null,r,i,l,f,m)),!0;case"gotpointercapture":return v=m.pointerId,Io.set(v,ko(Io.get(v)||null,r,i,l,f,m)),!0}return!1}function wd(r){var i=lr(r.target);if(i!==null){var l=ar(i);if(l!==null){if(i=l.tag,i===13){if(i=id(l),i!==null){r.blockedOn=i,vd(r.priority,function(){gd(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mi(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=Ua(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var f=new l.constructor(l.type,l);_a=f,l.target.dispatchEvent(f),_a=null}else return i=Bo(l),i!==null&&Ma(i),r.blockedOn=l,!1;i.shift()}return!0}function Sd(r,i,l){Mi(r)&&l.delete(i)}function iv(){La=!1,Mn!==null&&Mi(Mn)&&(Mn=null),Ln!==null&&Mi(Ln)&&(Ln=null),Dn!==null&&Mi(Dn)&&(Dn=null),Ao.forEach(Sd),Io.forEach(Sd)}function Ro(r,i){r.blockedOn===i&&(r.blockedOn=null,La||(La=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iv)))}function No(r){function i(m){return Ro(m,r)}if(0<bi.length){Ro(bi[0],r);for(var l=1;l<bi.length;l++){var f=bi[l];f.blockedOn===r&&(f.blockedOn=null)}}for(Mn!==null&&Ro(Mn,r),Ln!==null&&Ro(Ln,r),Dn!==null&&Ro(Dn,r),Ao.forEach(i),Io.forEach(i),l=0;l<Un.length;l++)f=Un[l],f.blockedOn===r&&(f.blockedOn=null);for(;0<Un.length&&(l=Un[0],l.blockedOn===null);)wd(l),l.blockedOn===null&&Un.shift()}var Rr=U.ReactCurrentBatchConfig,Li=!0;function sv(r,i,l,f){var m=Pe,v=Rr.transition;Rr.transition=null;try{Pe=1,Da(r,i,l,f)}finally{Pe=m,Rr.transition=v}}function av(r,i,l,f){var m=Pe,v=Rr.transition;Rr.transition=null;try{Pe=4,Da(r,i,l,f)}finally{Pe=m,Rr.transition=v}}function Da(r,i,l,f){if(Li){var m=Ua(r,i,l,f);if(m===null)ja(r,i,f,Di,l),Td(r,f);else if(ov(m,r,i,l,f))f.stopPropagation();else if(Td(r,f),i&4&&-1<rv.indexOf(r)){for(;m!==null;){var v=Bo(m);if(v!==null&&md(v),v=Ua(r,i,l,f),v===null&&ja(r,i,f,Di,l),v===m)break;m=v}m!==null&&f.stopPropagation()}else ja(r,i,f,null,l)}}var Di=null;function Ua(r,i,l,f){if(Di=null,r=Ca(f),r=lr(r),r!==null)if(i=ar(r),i===null)r=null;else if(l=i.tag,l===13){if(r=id(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Di=r,null}function Ed(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jy()){case Ra:return 1;case dd:return 4;case Ii:case Ky:return 16;case fd:return 536870912;default:return 16}default:return 16}}var Fn=null,Fa=null,Ui=null;function _d(){if(Ui)return Ui;var r,i=Fa,l=i.length,f,m="value"in Fn?Fn.value:Fn.textContent,v=m.length;for(r=0;r<l&&i[r]===m[r];r++);var S=l-r;for(f=1;f<=S&&i[l-f]===m[v-f];f++);return Ui=m.slice(r,1<f?1-f:void 0)}function Fi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Oi(){return!0}function Cd(){return!1}function Pt(r){function i(l,f,m,v,S){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Oi:Cd,this.isPropagationStopped=Cd,this}return K(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),i}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oa=Pt(Nr),Po=K({},Nr,{view:0,detail:0}),lv=Pt(Po),Ga,qa,bo,Gi=K({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==bo&&(bo&&r.type==="mousemove"?(Ga=r.screenX-bo.screenX,qa=r.screenY-bo.screenY):qa=Ga=0,bo=r),Ga)},movementY:function(r){return"movementY"in r?r.movementY:qa}}),xd=Pt(Gi),uv=K({},Gi,{dataTransfer:0}),cv=Pt(uv),dv=K({},Po,{relatedTarget:0}),Va=Pt(dv),fv=K({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),pv=Pt(fv),hv=K({},Nr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mv=Pt(hv),gv=K({},Nr,{data:0}),Ad=Pt(gv),yv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wv(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Tv[r])?!!i[r]:!1}function Ba(){return wv}var Sv=K({},Po,{key:function(r){if(r.key){var i=yv[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Fi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?vv[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(r){return r.type==="keypress"?Fi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ev=Pt(Sv),_v=K({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Id=Pt(_v),Cv=K({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),xv=Pt(Cv),Av=K({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iv=Pt(Av),kv=K({},Gi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Rv=Pt(kv),Nv=[9,13,27,32],$a=p&&"CompositionEvent"in window,Mo=null;p&&"documentMode"in document&&(Mo=document.documentMode);var Pv=p&&"TextEvent"in window&&!Mo,kd=p&&(!$a||Mo&&8<Mo&&11>=Mo),Rd=" ",Nd=!1;function Pd(r,i){switch(r){case"keyup":return Nv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Pr=!1;function bv(r,i){switch(r){case"compositionend":return bd(i);case"keypress":return i.which!==32?null:(Nd=!0,Rd);case"textInput":return r=i.data,r===Rd&&Nd?null:r;default:return null}}function Mv(r,i){if(Pr)return r==="compositionend"||!$a&&Pd(r,i)?(r=_d(),Ui=Fa=Fn=null,Pr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kd&&i.locale!=="ko"?null:i.data;default:return null}}var Lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Lv[r.type]:i==="textarea"}function Ld(r,i,l,f){ed(f),i=Hi(i,"onChange"),0<i.length&&(l=new Oa("onChange","change",null,l,f),r.push({event:l,listeners:i}))}var Lo=null,Do=null;function Dv(r){Zd(r,0)}function qi(r){var i=Ur(r);if(Ci(i))return r}function Uv(r,i){if(r==="change")return i}var Dd=!1;if(p){var Ha;if(p){var Ya="oninput"in document;if(!Ya){var Ud=document.createElement("div");Ud.setAttribute("oninput","return;"),Ya=typeof Ud.oninput=="function"}Ha=Ya}else Ha=!1;Dd=Ha&&(!document.documentMode||9<document.documentMode)}function Fd(){Lo&&(Lo.detachEvent("onpropertychange",Od),Do=Lo=null)}function Od(r){if(r.propertyName==="value"&&qi(Do)){var i=[];Ld(i,Do,r,Ca(r)),od(Dv,i)}}function Fv(r,i,l){r==="focusin"?(Fd(),Lo=i,Do=l,Lo.attachEvent("onpropertychange",Od)):r==="focusout"&&Fd()}function Ov(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return qi(Do)}function Gv(r,i){if(r==="click")return qi(i)}function qv(r,i){if(r==="input"||r==="change")return qi(i)}function Vv(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Xt=typeof Object.is=="function"?Object.is:Vv;function Uo(r,i){if(Xt(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),f=Object.keys(i);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!g.call(i,m)||!Xt(r[m],i[m]))return!1}return!0}function Gd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function qd(r,i){var l=Gd(r);r=0;for(var f;l;){if(l.nodeType===3){if(f=r+l.textContent.length,r<=i&&f>=i)return{node:l,offset:i-r};r=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Gd(l)}}function Vd(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Vd(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Bd(){for(var r=window,i=fe();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=fe(r.document)}return i}function Wa(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Bv(r){var i=Bd(),l=r.focusedElem,f=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Vd(l.ownerDocument.documentElement,l)){if(f!==null&&Wa(l)){if(i=f.start,r=f.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var m=l.textContent.length,v=Math.min(f.start,m);f=f.end===void 0?v:Math.min(f.end,m),!r.extend&&v>f&&(m=f,f=v,v=m),m=qd(l,v);var S=qd(l,f);m&&S&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==S.node||r.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),r.removeAllRanges(),v>f?(r.addRange(i),r.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $v=p&&"documentMode"in document&&11>=document.documentMode,br=null,za=null,Fo=null,Ja=!1;function $d(r,i,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ja||br==null||br!==fe(f)||(f=br,"selectionStart"in f&&Wa(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Fo&&Uo(Fo,f)||(Fo=f,f=Hi(za,"onSelect"),0<f.length&&(i=new Oa("onSelect","select",null,i,l),r.push({event:i,listeners:f}),i.target=br)))}function Vi(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var Mr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},Ka={},Hd={};p&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Bi(r){if(Ka[r])return Ka[r];if(!Mr[r])return r;var i=Mr[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Hd)return Ka[r]=i[l];return r}var Yd=Bi("animationend"),Wd=Bi("animationiteration"),zd=Bi("animationstart"),Jd=Bi("transitionend"),Kd=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(r,i){Kd.set(r,i),a(i,[r])}for(var Xa=0;Xa<Xd.length;Xa++){var Qa=Xd[Xa],Hv=Qa.toLowerCase(),Yv=Qa[0].toUpperCase()+Qa.slice(1);On(Hv,"on"+Yv)}On(Yd,"onAnimationEnd"),On(Wd,"onAnimationIteration"),On(zd,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(Jd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function Qd(r,i,l){var f=r.type||"unknown-event";r.currentTarget=l,Hy(f,i,void 0,r),r.currentTarget=null}function Zd(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var f=r[l],m=f.event;f=f.listeners;e:{var v=void 0;if(i)for(var S=f.length-1;0<=S;S--){var C=f[S],x=C.instance,L=C.currentTarget;if(C=C.listener,x!==v&&m.isPropagationStopped())break e;Qd(m,C,L),v=x}else for(S=0;S<f.length;S++){if(C=f[S],x=C.instance,L=C.currentTarget,C=C.listener,x!==v&&m.isPropagationStopped())break e;Qd(m,C,L),v=x}}}if(Ai)throw r=ka,Ai=!1,ka=null,r}function Fe(r,i){var l=i[il];l===void 0&&(l=i[il]=new Set);var f=r+"__bubble";l.has(f)||(jd(i,r,2,!1),l.add(f))}function Za(r,i,l){var f=0;i&&(f|=4),jd(l,r,f,i)}var $i="_reactListening"+Math.random().toString(36).slice(2);function Go(r){if(!r[$i]){r[$i]=!0,o.forEach(function(l){l!=="selectionchange"&&(Wv.has(l)||Za(l,!1,r),Za(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[$i]||(i[$i]=!0,Za("selectionchange",!1,i))}}function jd(r,i,l,f){switch(Ed(i)){case 1:var m=sv;break;case 4:m=av;break;default:m=Da}l=m.bind(null,i,l,r),m=void 0,!Ia||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),f?m!==void 0?r.addEventListener(i,l,{capture:!0,passive:m}):r.addEventListener(i,l,!0):m!==void 0?r.addEventListener(i,l,{passive:m}):r.addEventListener(i,l,!1)}function ja(r,i,l,f,m){var v=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var C=f.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(S===4)for(S=f.return;S!==null;){var x=S.tag;if((x===3||x===4)&&(x=S.stateNode.containerInfo,x===m||x.nodeType===8&&x.parentNode===m))return;S=S.return}for(;C!==null;){if(S=lr(C),S===null)return;if(x=S.tag,x===5||x===6){f=v=S;continue e}C=C.parentNode}}f=f.return}od(function(){var L=v,V=Ca(l),$=[];e:{var G=Kd.get(r);if(G!==void 0){var j=Oa,ne=r;switch(r){case"keypress":if(Fi(l)===0)break e;case"keydown":case"keyup":j=Ev;break;case"focusin":ne="focus",j=Va;break;case"focusout":ne="blur",j=Va;break;case"beforeblur":case"afterblur":j=Va;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=cv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=xv;break;case Yd:case Wd:case zd:j=pv;break;case Jd:j=Iv;break;case"scroll":j=lv;break;case"wheel":j=Rv;break;case"copy":case"cut":case"paste":j=mv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Id}var re=(i&4)!==0,Je=!re&&r==="scroll",P=re?G!==null?G+"Capture":null:G;re=[];for(var I=L,b;I!==null;){b=I;var W=b.stateNode;if(b.tag===5&&W!==null&&(b=W,P!==null&&(W=So(I,P),W!=null&&re.push(qo(I,W,b)))),Je)break;I=I.return}0<re.length&&(G=new j(G,ne,null,l,V),$.push({event:G,listeners:re}))}}if((i&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",j=r==="mouseout"||r==="pointerout",G&&l!==_a&&(ne=l.relatedTarget||l.fromElement)&&(lr(ne)||ne[vn]))break e;if((j||G)&&(G=V.window===V?V:(G=V.ownerDocument)?G.defaultView||G.parentWindow:window,j?(ne=l.relatedTarget||l.toElement,j=L,ne=ne?lr(ne):null,ne!==null&&(Je=ar(ne),ne!==Je||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(j=null,ne=L),j!==ne)){if(re=xd,W="onMouseLeave",P="onMouseEnter",I="mouse",(r==="pointerout"||r==="pointerover")&&(re=Id,W="onPointerLeave",P="onPointerEnter",I="pointer"),Je=j==null?G:Ur(j),b=ne==null?G:Ur(ne),G=new re(W,I+"leave",j,l,V),G.target=Je,G.relatedTarget=b,W=null,lr(V)===L&&(re=new re(P,I+"enter",ne,l,V),re.target=b,re.relatedTarget=Je,W=re),Je=W,j&&ne)t:{for(re=j,P=ne,I=0,b=re;b;b=Lr(b))I++;for(b=0,W=P;W;W=Lr(W))b++;for(;0<I-b;)re=Lr(re),I--;for(;0<b-I;)P=Lr(P),b--;for(;I--;){if(re===P||P!==null&&re===P.alternate)break t;re=Lr(re),P=Lr(P)}re=null}else re=null;j!==null&&ef($,G,j,re,!1),ne!==null&&Je!==null&&ef($,Je,ne,re,!0)}}e:{if(G=L?Ur(L):window,j=G.nodeName&&G.nodeName.toLowerCase(),j==="select"||j==="input"&&G.type==="file")var oe=Uv;else if(Md(G))if(Dd)oe=qv;else{oe=Ov;var ae=Fv}else(j=G.nodeName)&&j.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(oe=Gv);if(oe&&(oe=oe(r,L))){Ld($,oe,l,V);break e}ae&&ae(r,G,L),r==="focusout"&&(ae=G._wrapperState)&&ae.controlled&&G.type==="number"&&Ot(G,"number",G.value)}switch(ae=L?Ur(L):window,r){case"focusin":(Md(ae)||ae.contentEditable==="true")&&(br=ae,za=L,Fo=null);break;case"focusout":Fo=za=br=null;break;case"mousedown":Ja=!0;break;case"contextmenu":case"mouseup":case"dragend":Ja=!1,$d($,l,V);break;case"selectionchange":if($v)break;case"keydown":case"keyup":$d($,l,V)}var le;if($a)e:{switch(r){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Pr?Pd(r,l)&&(ge="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ge="onCompositionStart");ge&&(kd&&l.locale!=="ko"&&(Pr||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Pr&&(le=_d()):(Fn=V,Fa="value"in Fn?Fn.value:Fn.textContent,Pr=!0)),ae=Hi(L,ge),0<ae.length&&(ge=new Ad(ge,r,null,l,V),$.push({event:ge,listeners:ae}),le?ge.data=le:(le=bd(l),le!==null&&(ge.data=le)))),(le=Pv?bv(r,l):Mv(r,l))&&(L=Hi(L,"onBeforeInput"),0<L.length&&(V=new Ad("onBeforeInput","beforeinput",null,l,V),$.push({event:V,listeners:L}),V.data=le))}Zd($,i)})}function qo(r,i,l){return{instance:r,listener:i,currentTarget:l}}function Hi(r,i){for(var l=i+"Capture",f=[];r!==null;){var m=r,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=So(r,l),v!=null&&f.unshift(qo(r,v,m)),v=So(r,i),v!=null&&f.push(qo(r,v,m))),r=r.return}return f}function Lr(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function ef(r,i,l,f,m){for(var v=i._reactName,S=[];l!==null&&l!==f;){var C=l,x=C.alternate,L=C.stateNode;if(x!==null&&x===f)break;C.tag===5&&L!==null&&(C=L,m?(x=So(l,v),x!=null&&S.unshift(qo(l,x,C))):m||(x=So(l,v),x!=null&&S.push(qo(l,x,C)))),l=l.return}S.length!==0&&r.push({event:i,listeners:S})}var zv=/\r\n?/g,Jv=/\u0000|\uFFFD/g;function tf(r){return(typeof r=="string"?r:""+r).replace(zv,`
`).replace(Jv,"")}function Yi(r,i,l){if(i=tf(i),tf(r)!==i&&l)throw Error(t(425))}function Wi(){}var el=null,tl=null;function nl(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var rl=typeof setTimeout=="function"?setTimeout:void 0,Kv=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,Xv=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(r){return nf.resolve(null).then(r).catch(Qv)}:rl;function Qv(r){setTimeout(function(){throw r})}function ol(r,i){var l=i,f=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(f===0){r.removeChild(m),No(i);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=m}while(l);No(i)}function Gn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function rf(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),un="__reactFiber$"+Dr,Vo="__reactProps$"+Dr,vn="__reactContainer$"+Dr,il="__reactEvents$"+Dr,Zv="__reactListeners$"+Dr,jv="__reactHandles$"+Dr;function lr(r){var i=r[un];if(i)return i;for(var l=r.parentNode;l;){if(i=l[vn]||l[un]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=rf(r);r!==null;){if(l=r[un])return l;r=rf(r)}return i}r=l,l=r.parentNode}return null}function Bo(r){return r=r[un]||r[vn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ur(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function zi(r){return r[Vo]||null}var sl=[],Fr=-1;function qn(r){return{current:r}}function Oe(r){0>Fr||(r.current=sl[Fr],sl[Fr]=null,Fr--)}function Ue(r,i){Fr++,sl[Fr]=r.current,r.current=i}var Vn={},dt=qn(Vn),Et=qn(!1),ur=Vn;function Or(r,i){var l=r.type.contextTypes;if(!l)return Vn;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=i[v];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=m),m}function _t(r){return r=r.childContextTypes,r!=null}function Ji(){Oe(Et),Oe(dt)}function of(r,i,l){if(dt.current!==Vn)throw Error(t(168));Ue(dt,i),Ue(Et,l)}function sf(r,i,l){var f=r.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var m in f)if(!(m in i))throw Error(t(108,_e(r)||"Unknown",m));return K({},l,f)}function Ki(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Vn,ur=dt.current,Ue(dt,r),Ue(Et,Et.current),!0}function af(r,i,l){var f=r.stateNode;if(!f)throw Error(t(169));l?(r=sf(r,i,ur),f.__reactInternalMemoizedMergedChildContext=r,Oe(Et),Oe(dt),Ue(dt,r)):Oe(Et),Ue(Et,l)}var Tn=null,Xi=!1,al=!1;function lf(r){Tn===null?Tn=[r]:Tn.push(r)}function eT(r){Xi=!0,lf(r)}function Bn(){if(!al&&Tn!==null){al=!0;var r=0,i=Pe;try{var l=Tn;for(Pe=1;r<l.length;r++){var f=l[r];do f=f(!0);while(f!==null)}Tn=null,Xi=!1}catch(m){throw Tn!==null&&(Tn=Tn.slice(r+1)),ud(Ra,Bn),m}finally{Pe=i,al=!1}}return null}var Gr=[],qr=0,Qi=null,Zi=0,Vt=[],Bt=0,cr=null,wn=1,Sn="";function dr(r,i){Gr[qr++]=Zi,Gr[qr++]=Qi,Qi=r,Zi=i}function uf(r,i,l){Vt[Bt++]=wn,Vt[Bt++]=Sn,Vt[Bt++]=cr,cr=r;var f=wn;r=Sn;var m=32-Kt(f)-1;f&=~(1<<m),l+=1;var v=32-Kt(i)+m;if(30<v){var S=m-m%5;v=(f&(1<<S)-1).toString(32),f>>=S,m-=S,wn=1<<32-Kt(i)+m|l<<m|f,Sn=v+r}else wn=1<<v|l<<m|f,Sn=r}function ll(r){r.return!==null&&(dr(r,1),uf(r,1,0))}function ul(r){for(;r===Qi;)Qi=Gr[--qr],Gr[qr]=null,Zi=Gr[--qr],Gr[qr]=null;for(;r===cr;)cr=Vt[--Bt],Vt[Bt]=null,Sn=Vt[--Bt],Vt[Bt]=null,wn=Vt[--Bt],Vt[Bt]=null}var bt=null,Mt=null,qe=!1,Qt=null;function cf(r,i){var l=Wt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function df(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,bt=r,Mt=Gn(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,bt=r,Mt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=cr!==null?{id:wn,overflow:Sn}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Wt(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,bt=r,Mt=null,!0):!1;default:return!1}}function cl(r){return(r.mode&1)!==0&&(r.flags&128)===0}function dl(r){if(qe){var i=Mt;if(i){var l=i;if(!df(r,i)){if(cl(r))throw Error(t(418));i=Gn(l.nextSibling);var f=bt;i&&df(r,i)?cf(f,l):(r.flags=r.flags&-4097|2,qe=!1,bt=r)}}else{if(cl(r))throw Error(t(418));r.flags=r.flags&-4097|2,qe=!1,bt=r}}}function ff(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;bt=r}function ji(r){if(r!==bt)return!1;if(!qe)return ff(r),qe=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!nl(r.type,r.memoizedProps)),i&&(i=Mt)){if(cl(r))throw pf(),Error(t(418));for(;i;)cf(r,i),i=Gn(i.nextSibling)}if(ff(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Mt=Gn(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Mt=null}}else Mt=bt?Gn(r.stateNode.nextSibling):null;return!0}function pf(){for(var r=Mt;r;)r=Gn(r.nextSibling)}function Vr(){Mt=bt=null,qe=!1}function fl(r){Qt===null?Qt=[r]:Qt.push(r)}var tT=U.ReactCurrentBatchConfig;function $o(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,r));var m=f,v=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(S){var C=m.refs;S===null?delete C[v]:C[v]=S},i._stringRef=v,i)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function es(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function hf(r){var i=r._init;return i(r._payload)}function mf(r){function i(P,I){if(r){var b=P.deletions;b===null?(P.deletions=[I],P.flags|=16):b.push(I)}}function l(P,I){if(!r)return null;for(;I!==null;)i(P,I),I=I.sibling;return null}function f(P,I){for(P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function m(P,I){return P=Xn(P,I),P.index=0,P.sibling=null,P}function v(P,I,b){return P.index=b,r?(b=P.alternate,b!==null?(b=b.index,b<I?(P.flags|=2,I):b):(P.flags|=2,I)):(P.flags|=1048576,I)}function S(P){return r&&P.alternate===null&&(P.flags|=2),P}function C(P,I,b,W){return I===null||I.tag!==6?(I=ru(b,P.mode,W),I.return=P,I):(I=m(I,b),I.return=P,I)}function x(P,I,b,W){var oe=b.type;return oe===q?V(P,I,b.props.children,W,b.key):I!==null&&(I.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===be&&hf(oe)===I.type)?(W=m(I,b.props),W.ref=$o(P,I,b),W.return=P,W):(W=Cs(b.type,b.key,b.props,null,P.mode,W),W.ref=$o(P,I,b),W.return=P,W)}function L(P,I,b,W){return I===null||I.tag!==4||I.stateNode.containerInfo!==b.containerInfo||I.stateNode.implementation!==b.implementation?(I=ou(b,P.mode,W),I.return=P,I):(I=m(I,b.children||[]),I.return=P,I)}function V(P,I,b,W,oe){return I===null||I.tag!==7?(I=Tr(b,P.mode,W,oe),I.return=P,I):(I=m(I,b),I.return=P,I)}function $(P,I,b){if(typeof I=="string"&&I!==""||typeof I=="number")return I=ru(""+I,P.mode,b),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case H:return b=Cs(I.type,I.key,I.props,null,P.mode,b),b.ref=$o(P,null,I),b.return=P,b;case O:return I=ou(I,P.mode,b),I.return=P,I;case be:var W=I._init;return $(P,W(I._payload),b)}if(Nt(I)||Z(I))return I=Tr(I,P.mode,b,null),I.return=P,I;es(P,I)}return null}function G(P,I,b,W){var oe=I!==null?I.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return oe!==null?null:C(P,I,""+b,W);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case H:return b.key===oe?x(P,I,b,W):null;case O:return b.key===oe?L(P,I,b,W):null;case be:return oe=b._init,G(P,I,oe(b._payload),W)}if(Nt(b)||Z(b))return oe!==null?null:V(P,I,b,W,null);es(P,b)}return null}function j(P,I,b,W,oe){if(typeof W=="string"&&W!==""||typeof W=="number")return P=P.get(b)||null,C(I,P,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case H:return P=P.get(W.key===null?b:W.key)||null,x(I,P,W,oe);case O:return P=P.get(W.key===null?b:W.key)||null,L(I,P,W,oe);case be:var ae=W._init;return j(P,I,b,ae(W._payload),oe)}if(Nt(W)||Z(W))return P=P.get(b)||null,V(I,P,W,oe,null);es(I,W)}return null}function ne(P,I,b,W){for(var oe=null,ae=null,le=I,ge=I=0,it=null;le!==null&&ge<b.length;ge++){le.index>ge?(it=le,le=null):it=le.sibling;var Ae=G(P,le,b[ge],W);if(Ae===null){le===null&&(le=it);break}r&&le&&Ae.alternate===null&&i(P,le),I=v(Ae,I,ge),ae===null?oe=Ae:ae.sibling=Ae,ae=Ae,le=it}if(ge===b.length)return l(P,le),qe&&dr(P,ge),oe;if(le===null){for(;ge<b.length;ge++)le=$(P,b[ge],W),le!==null&&(I=v(le,I,ge),ae===null?oe=le:ae.sibling=le,ae=le);return qe&&dr(P,ge),oe}for(le=f(P,le);ge<b.length;ge++)it=j(le,P,ge,b[ge],W),it!==null&&(r&&it.alternate!==null&&le.delete(it.key===null?ge:it.key),I=v(it,I,ge),ae===null?oe=it:ae.sibling=it,ae=it);return r&&le.forEach(function(Qn){return i(P,Qn)}),qe&&dr(P,ge),oe}function re(P,I,b,W){var oe=Z(b);if(typeof oe!="function")throw Error(t(150));if(b=oe.call(b),b==null)throw Error(t(151));for(var ae=oe=null,le=I,ge=I=0,it=null,Ae=b.next();le!==null&&!Ae.done;ge++,Ae=b.next()){le.index>ge?(it=le,le=null):it=le.sibling;var Qn=G(P,le,Ae.value,W);if(Qn===null){le===null&&(le=it);break}r&&le&&Qn.alternate===null&&i(P,le),I=v(Qn,I,ge),ae===null?oe=Qn:ae.sibling=Qn,ae=Qn,le=it}if(Ae.done)return l(P,le),qe&&dr(P,ge),oe;if(le===null){for(;!Ae.done;ge++,Ae=b.next())Ae=$(P,Ae.value,W),Ae!==null&&(I=v(Ae,I,ge),ae===null?oe=Ae:ae.sibling=Ae,ae=Ae);return qe&&dr(P,ge),oe}for(le=f(P,le);!Ae.done;ge++,Ae=b.next())Ae=j(le,P,ge,Ae.value,W),Ae!==null&&(r&&Ae.alternate!==null&&le.delete(Ae.key===null?ge:Ae.key),I=v(Ae,I,ge),ae===null?oe=Ae:ae.sibling=Ae,ae=Ae);return r&&le.forEach(function(LT){return i(P,LT)}),qe&&dr(P,ge),oe}function Je(P,I,b,W){if(typeof b=="object"&&b!==null&&b.type===q&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case H:e:{for(var oe=b.key,ae=I;ae!==null;){if(ae.key===oe){if(oe=b.type,oe===q){if(ae.tag===7){l(P,ae.sibling),I=m(ae,b.props.children),I.return=P,P=I;break e}}else if(ae.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===be&&hf(oe)===ae.type){l(P,ae.sibling),I=m(ae,b.props),I.ref=$o(P,ae,b),I.return=P,P=I;break e}l(P,ae);break}else i(P,ae);ae=ae.sibling}b.type===q?(I=Tr(b.props.children,P.mode,W,b.key),I.return=P,P=I):(W=Cs(b.type,b.key,b.props,null,P.mode,W),W.ref=$o(P,I,b),W.return=P,P=W)}return S(P);case O:e:{for(ae=b.key;I!==null;){if(I.key===ae)if(I.tag===4&&I.stateNode.containerInfo===b.containerInfo&&I.stateNode.implementation===b.implementation){l(P,I.sibling),I=m(I,b.children||[]),I.return=P,P=I;break e}else{l(P,I);break}else i(P,I);I=I.sibling}I=ou(b,P.mode,W),I.return=P,P=I}return S(P);case be:return ae=b._init,Je(P,I,ae(b._payload),W)}if(Nt(b))return ne(P,I,b,W);if(Z(b))return re(P,I,b,W);es(P,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,I!==null&&I.tag===6?(l(P,I.sibling),I=m(I,b),I.return=P,P=I):(l(P,I),I=ru(b,P.mode,W),I.return=P,P=I),S(P)):l(P,I)}return Je}var Br=mf(!0),gf=mf(!1),ts=qn(null),ns=null,$r=null,pl=null;function hl(){pl=$r=ns=null}function ml(r){var i=ts.current;Oe(ts),r._currentValue=i}function gl(r,i,l){for(;r!==null;){var f=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),r===l)break;r=r.return}}function Hr(r,i){ns=r,pl=$r=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Ct=!0),r.firstContext=null)}function $t(r){var i=r._currentValue;if(pl!==r)if(r={context:r,memoizedValue:i,next:null},$r===null){if(ns===null)throw Error(t(308));$r=r,ns.dependencies={lanes:0,firstContext:r}}else $r=$r.next=r;return i}var fr=null;function yl(r){fr===null?fr=[r]:fr.push(r)}function yf(r,i,l,f){var m=i.interleaved;return m===null?(l.next=l,yl(i)):(l.next=m.next,m.next=l),i.interleaved=l,En(r,f)}function En(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var $n=!1;function vl(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function _n(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Hn(r,i,l){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(xe&2)!==0){var m=f.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),f.pending=i,En(r,l)}return m=f.interleaved,m===null?(i.next=i,yl(f)):(i.next=m.next,m.next=i),f.interleaved=i,En(r,l)}function rs(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var f=i.lanes;f&=r.pendingLanes,l|=f,i.lanes=l,ba(r,l)}}function Tf(r,i){var l=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?m=v=i:v=v.next=i}else m=v=i;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,effects:f.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function os(r,i,l,f){var m=r.updateQueue;$n=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var x=C,L=x.next;x.next=null,S===null?v=L:S.next=L,S=x;var V=r.alternate;V!==null&&(V=V.updateQueue,C=V.lastBaseUpdate,C!==S&&(C===null?V.firstBaseUpdate=L:C.next=L,V.lastBaseUpdate=x))}if(v!==null){var $=m.baseState;S=0,V=L=x=null,C=v;do{var G=C.lane,j=C.eventTime;if((f&G)===G){V!==null&&(V=V.next={eventTime:j,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ne=r,re=C;switch(G=i,j=l,re.tag){case 1:if(ne=re.payload,typeof ne=="function"){$=ne.call(j,$,G);break e}$=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=re.payload,G=typeof ne=="function"?ne.call(j,$,G):ne,G==null)break e;$=K({},$,G);break e;case 2:$n=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,G=m.effects,G===null?m.effects=[C]:G.push(C))}else j={eventTime:j,lane:G,tag:C.tag,payload:C.payload,callback:C.callback,next:null},V===null?(L=V=j,x=$):V=V.next=j,S|=G;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;G=C,C=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);if(V===null&&(x=$),m.baseState=x,m.firstBaseUpdate=L,m.lastBaseUpdate=V,i=m.shared.interleaved,i!==null){m=i;do S|=m.lane,m=m.next;while(m!==i)}else v===null&&(m.shared.lanes=0);mr|=S,r.lanes=S,r.memoizedState=$}}function wf(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var f=r[i],m=f.callback;if(m!==null){if(f.callback=null,f=l,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Ho={},cn=qn(Ho),Yo=qn(Ho),Wo=qn(Ho);function pr(r){if(r===Ho)throw Error(t(174));return r}function Tl(r,i){switch(Ue(Wo,i),Ue(Yo,r),Ue(cn,Ho),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:vt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=vt(i,r)}Oe(cn),Ue(cn,i)}function Yr(){Oe(cn),Oe(Yo),Oe(Wo)}function Sf(r){pr(Wo.current);var i=pr(cn.current),l=vt(i,r.type);i!==l&&(Ue(Yo,r),Ue(cn,l))}function wl(r){Yo.current===r&&(Oe(cn),Oe(Yo))}var Ve=qn(0);function is(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Sl=[];function El(){for(var r=0;r<Sl.length;r++)Sl[r]._workInProgressVersionPrimary=null;Sl.length=0}var ss=U.ReactCurrentDispatcher,_l=U.ReactCurrentBatchConfig,hr=0,Be=null,Ze=null,rt=null,as=!1,zo=!1,Jo=0,nT=0;function ft(){throw Error(t(321))}function Cl(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Xt(r[l],i[l]))return!1;return!0}function xl(r,i,l,f,m,v){if(hr=v,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ss.current=r===null||r.memoizedState===null?sT:aT,r=l(f,m),zo){v=0;do{if(zo=!1,Jo=0,25<=v)throw Error(t(301));v+=1,rt=Ze=null,i.updateQueue=null,ss.current=lT,r=l(f,m)}while(zo)}if(ss.current=cs,i=Ze!==null&&Ze.next!==null,hr=0,rt=Ze=Be=null,as=!1,i)throw Error(t(300));return r}function Al(){var r=Jo!==0;return Jo=0,r}function dn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Be.memoizedState=rt=r:rt=rt.next=r,rt}function Ht(){if(Ze===null){var r=Be.alternate;r=r!==null?r.memoizedState:null}else r=Ze.next;var i=rt===null?Be.memoizedState:rt.next;if(i!==null)rt=i,Ze=r;else{if(r===null)throw Error(t(310));Ze=r,r={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?Be.memoizedState=rt=r:rt=rt.next=r}return rt}function Ko(r,i){return typeof i=="function"?i(r):i}function Il(r){var i=Ht(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var f=Ze,m=f.baseQueue,v=l.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}f.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,f=f.baseState;var C=S=null,x=null,L=v;do{var V=L.lane;if((hr&V)===V)x!==null&&(x=x.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),f=L.hasEagerState?L.eagerState:r(f,L.action);else{var $={lane:V,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};x===null?(C=x=$,S=f):x=x.next=$,Be.lanes|=V,mr|=V}L=L.next}while(L!==null&&L!==v);x===null?S=f:x.next=C,Xt(f,i.memoizedState)||(Ct=!0),i.memoizedState=f,i.baseState=S,i.baseQueue=x,l.lastRenderedState=f}if(r=l.interleaved,r!==null){m=r;do v=m.lane,Be.lanes|=v,mr|=v,m=m.next;while(m!==r)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function kl(r){var i=Ht(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var f=l.dispatch,m=l.pending,v=i.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do v=r(v,S.action),S=S.next;while(S!==m);Xt(v,i.memoizedState)||(Ct=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,f]}function Ef(){}function _f(r,i){var l=Be,f=Ht(),m=i(),v=!Xt(f.memoizedState,m);if(v&&(f.memoizedState=m,Ct=!0),f=f.queue,Rl(Af.bind(null,l,f,r),[r]),f.getSnapshot!==i||v||rt!==null&&rt.memoizedState.tag&1){if(l.flags|=2048,Xo(9,xf.bind(null,l,f,m,i),void 0,null),ot===null)throw Error(t(349));(hr&30)!==0||Cf(l,i,m)}return m}function Cf(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Be.updateQueue,i===null?(i={lastEffect:null,stores:null},Be.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function xf(r,i,l,f){i.value=l,i.getSnapshot=f,If(i)&&kf(r)}function Af(r,i,l){return l(function(){If(i)&&kf(r)})}function If(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Xt(r,l)}catch{return!0}}function kf(r){var i=En(r,1);i!==null&&tn(i,r,1,-1)}function Rf(r){var i=dn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:r},i.queue=r,r=r.dispatch=iT.bind(null,Be,r),[i.memoizedState,r]}function Xo(r,i,l,f){return r={tag:r,create:i,destroy:l,deps:f,next:null},i=Be.updateQueue,i===null?(i={lastEffect:null,stores:null},Be.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(f=l.next,l.next=r,r.next=f,i.lastEffect=r)),r}function Nf(){return Ht().memoizedState}function ls(r,i,l,f){var m=dn();Be.flags|=r,m.memoizedState=Xo(1|i,l,void 0,f===void 0?null:f)}function us(r,i,l,f){var m=Ht();f=f===void 0?null:f;var v=void 0;if(Ze!==null){var S=Ze.memoizedState;if(v=S.destroy,f!==null&&Cl(f,S.deps)){m.memoizedState=Xo(i,l,v,f);return}}Be.flags|=r,m.memoizedState=Xo(1|i,l,v,f)}function Pf(r,i){return ls(8390656,8,r,i)}function Rl(r,i){return us(2048,8,r,i)}function bf(r,i){return us(4,2,r,i)}function Mf(r,i){return us(4,4,r,i)}function Lf(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Df(r,i,l){return l=l!=null?l.concat([r]):null,us(4,4,Lf.bind(null,i,r),l)}function Nl(){}function Uf(r,i){var l=Ht();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Cl(i,f[1])?f[0]:(l.memoizedState=[r,i],r)}function Ff(r,i){var l=Ht();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Cl(i,f[1])?f[0]:(r=r(),l.memoizedState=[r,i],r)}function Of(r,i,l){return(hr&21)===0?(r.baseState&&(r.baseState=!1,Ct=!0),r.memoizedState=l):(Xt(l,i)||(l=pd(),Be.lanes|=l,mr|=l,r.baseState=!0),i)}function rT(r,i){var l=Pe;Pe=l!==0&&4>l?l:4,r(!0);var f=_l.transition;_l.transition={};try{r(!1),i()}finally{Pe=l,_l.transition=f}}function Gf(){return Ht().memoizedState}function oT(r,i,l){var f=Jn(r);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},qf(r))Vf(i,l);else if(l=yf(r,i,l,f),l!==null){var m=wt();tn(l,r,f,m),Bf(l,i,f)}}function iT(r,i,l){var f=Jn(r),m={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(qf(r))Vf(i,m);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,C=v(S,l);if(m.hasEagerState=!0,m.eagerState=C,Xt(C,S)){var x=i.interleaved;x===null?(m.next=m,yl(i)):(m.next=x.next,x.next=m),i.interleaved=m;return}}catch{}finally{}l=yf(r,i,m,f),l!==null&&(m=wt(),tn(l,r,f,m),Bf(l,i,f))}}function qf(r){var i=r.alternate;return r===Be||i!==null&&i===Be}function Vf(r,i){zo=as=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Bf(r,i,l){if((l&4194240)!==0){var f=i.lanes;f&=r.pendingLanes,l|=f,i.lanes=l,ba(r,l)}}var cs={readContext:$t,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},sT={readContext:$t,useCallback:function(r,i){return dn().memoizedState=[r,i===void 0?null:i],r},useContext:$t,useEffect:Pf,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,ls(4194308,4,Lf.bind(null,i,r),l)},useLayoutEffect:function(r,i){return ls(4194308,4,r,i)},useInsertionEffect:function(r,i){return ls(4,2,r,i)},useMemo:function(r,i){var l=dn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var f=dn();return i=l!==void 0?l(i):i,f.memoizedState=f.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},f.queue=r,r=r.dispatch=oT.bind(null,Be,r),[f.memoizedState,r]},useRef:function(r){var i=dn();return r={current:r},i.memoizedState=r},useState:Rf,useDebugValue:Nl,useDeferredValue:function(r){return dn().memoizedState=r},useTransition:function(){var r=Rf(!1),i=r[0];return r=rT.bind(null,r[1]),dn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var f=Be,m=dn();if(qe){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),ot===null)throw Error(t(349));(hr&30)!==0||Cf(f,i,l)}m.memoizedState=l;var v={value:l,getSnapshot:i};return m.queue=v,Pf(Af.bind(null,f,v,r),[r]),f.flags|=2048,Xo(9,xf.bind(null,f,v,l,i),void 0,null),l},useId:function(){var r=dn(),i=ot.identifierPrefix;if(qe){var l=Sn,f=wn;l=(f&~(1<<32-Kt(f)-1)).toString(32)+l,i=":"+i+"R"+l,l=Jo++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=nT++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},aT={readContext:$t,useCallback:Uf,useContext:$t,useEffect:Rl,useImperativeHandle:Df,useInsertionEffect:bf,useLayoutEffect:Mf,useMemo:Ff,useReducer:Il,useRef:Nf,useState:function(){return Il(Ko)},useDebugValue:Nl,useDeferredValue:function(r){var i=Ht();return Of(i,Ze.memoizedState,r)},useTransition:function(){var r=Il(Ko)[0],i=Ht().memoizedState;return[r,i]},useMutableSource:Ef,useSyncExternalStore:_f,useId:Gf,unstable_isNewReconciler:!1},lT={readContext:$t,useCallback:Uf,useContext:$t,useEffect:Rl,useImperativeHandle:Df,useInsertionEffect:bf,useLayoutEffect:Mf,useMemo:Ff,useReducer:kl,useRef:Nf,useState:function(){return kl(Ko)},useDebugValue:Nl,useDeferredValue:function(r){var i=Ht();return Ze===null?i.memoizedState=r:Of(i,Ze.memoizedState,r)},useTransition:function(){var r=kl(Ko)[0],i=Ht().memoizedState;return[r,i]},useMutableSource:Ef,useSyncExternalStore:_f,useId:Gf,unstable_isNewReconciler:!1};function Zt(r,i){if(r&&r.defaultProps){i=K({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function Pl(r,i,l,f){i=r.memoizedState,l=l(f,i),l=l==null?i:K({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var ds={isMounted:function(r){return(r=r._reactInternals)?ar(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var f=wt(),m=Jn(r),v=_n(f,m);v.payload=i,l!=null&&(v.callback=l),i=Hn(r,v,m),i!==null&&(tn(i,r,m,f),rs(i,r,m))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var f=wt(),m=Jn(r),v=_n(f,m);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=Hn(r,v,m),i!==null&&(tn(i,r,m,f),rs(i,r,m))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=wt(),f=Jn(r),m=_n(l,f);m.tag=2,i!=null&&(m.callback=i),i=Hn(r,m,f),i!==null&&(tn(i,r,f,l),rs(i,r,f))}};function $f(r,i,l,f,m,v,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,v,S):i.prototype&&i.prototype.isPureReactComponent?!Uo(l,f)||!Uo(m,v):!0}function Hf(r,i,l){var f=!1,m=Vn,v=i.contextType;return typeof v=="object"&&v!==null?v=$t(v):(m=_t(i)?ur:dt.current,f=i.contextTypes,v=(f=f!=null)?Or(r,m):Vn),i=new i(l,v),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ds,r.stateNode=i,i._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=v),i}function Yf(r,i,l,f){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,f),i.state!==r&&ds.enqueueReplaceState(i,i.state,null)}function bl(r,i,l,f){var m=r.stateNode;m.props=l,m.state=r.memoizedState,m.refs={},vl(r);var v=i.contextType;typeof v=="object"&&v!==null?m.context=$t(v):(v=_t(i)?ur:dt.current,m.context=Or(r,v)),m.state=r.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Pl(r,i,v,l),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&ds.enqueueReplaceState(m,m.state,null),os(r,l,m,f),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function Wr(r,i){try{var l="",f=i;do l+=ce(f),f=f.return;while(f);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:i,stack:m,digest:null}}function Ml(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function Ll(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var uT=typeof WeakMap=="function"?WeakMap:Map;function Wf(r,i,l){l=_n(-1,l),l.tag=3,l.payload={element:null};var f=i.value;return l.callback=function(){vs||(vs=!0,Kl=f),Ll(r,i)},l}function zf(r,i,l){l=_n(-1,l),l.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=i.value;l.payload=function(){return f(m)},l.callback=function(){Ll(r,i)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){Ll(r,i),typeof f!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),l}function Jf(r,i,l){var f=r.pingCache;if(f===null){f=r.pingCache=new uT;var m=new Set;f.set(i,m)}else m=f.get(i),m===void 0&&(m=new Set,f.set(i,m));m.has(l)||(m.add(l),r=_T.bind(null,r,i,l),i.then(r,r))}function Kf(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Xf(r,i,l,f,m){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=_n(-1,1),i.tag=2,Hn(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=m,r)}var cT=U.ReactCurrentOwner,Ct=!1;function Tt(r,i,l,f){i.child=r===null?gf(i,null,l,f):Br(i,r.child,l,f)}function Qf(r,i,l,f,m){l=l.render;var v=i.ref;return Hr(i,m),f=xl(r,i,l,f,v,m),l=Al(),r!==null&&!Ct?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~m,Cn(r,i,m)):(qe&&l&&ll(i),i.flags|=1,Tt(r,i,f,m),i.child)}function Zf(r,i,l,f,m){if(r===null){var v=l.type;return typeof v=="function"&&!nu(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=v,jf(r,i,v,f,m)):(r=Cs(l.type,null,f,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(v=r.child,(r.lanes&m)===0){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Uo,l(S,f)&&r.ref===i.ref)return Cn(r,i,m)}return i.flags|=1,r=Xn(v,f),r.ref=i.ref,r.return=i,i.child=r}function jf(r,i,l,f,m){if(r!==null){var v=r.memoizedProps;if(Uo(v,f)&&r.ref===i.ref)if(Ct=!1,i.pendingProps=f=v,(r.lanes&m)!==0)(r.flags&131072)!==0&&(Ct=!0);else return i.lanes=r.lanes,Cn(r,i,m)}return Dl(r,i,l,f,m)}function ep(r,i,l){var f=i.pendingProps,m=f.children,v=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Jr,Lt),Lt|=l;else{if((l&1073741824)===0)return r=v!==null?v.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ue(Jr,Lt),Lt|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,Ue(Jr,Lt),Lt|=f}else v!==null?(f=v.baseLanes|l,i.memoizedState=null):f=l,Ue(Jr,Lt),Lt|=f;return Tt(r,i,m,l),i.child}function tp(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Dl(r,i,l,f,m){var v=_t(l)?ur:dt.current;return v=Or(i,v),Hr(i,m),l=xl(r,i,l,f,v,m),f=Al(),r!==null&&!Ct?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~m,Cn(r,i,m)):(qe&&f&&ll(i),i.flags|=1,Tt(r,i,l,m),i.child)}function np(r,i,l,f,m){if(_t(l)){var v=!0;Ki(i)}else v=!1;if(Hr(i,m),i.stateNode===null)ps(r,i),Hf(i,l,f),bl(i,l,f,m),f=!0;else if(r===null){var S=i.stateNode,C=i.memoizedProps;S.props=C;var x=S.context,L=l.contextType;typeof L=="object"&&L!==null?L=$t(L):(L=_t(l)?ur:dt.current,L=Or(i,L));var V=l.getDerivedStateFromProps,$=typeof V=="function"||typeof S.getSnapshotBeforeUpdate=="function";$||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==f||x!==L)&&Yf(i,S,f,L),$n=!1;var G=i.memoizedState;S.state=G,os(i,f,S,m),x=i.memoizedState,C!==f||G!==x||Et.current||$n?(typeof V=="function"&&(Pl(i,l,V,f),x=i.memoizedState),(C=$n||$f(i,l,C,f,G,x,L))?($||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=x),S.props=f,S.state=x,S.context=L,f=C):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{S=i.stateNode,vf(r,i),C=i.memoizedProps,L=i.type===i.elementType?C:Zt(i.type,C),S.props=L,$=i.pendingProps,G=S.context,x=l.contextType,typeof x=="object"&&x!==null?x=$t(x):(x=_t(l)?ur:dt.current,x=Or(i,x));var j=l.getDerivedStateFromProps;(V=typeof j=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==$||G!==x)&&Yf(i,S,f,x),$n=!1,G=i.memoizedState,S.state=G,os(i,f,S,m);var ne=i.memoizedState;C!==$||G!==ne||Et.current||$n?(typeof j=="function"&&(Pl(i,l,j,f),ne=i.memoizedState),(L=$n||$f(i,l,L,f,G,ne,x)||!1)?(V||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,ne,x),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,ne,x)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||C===r.memoizedProps&&G===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&G===r.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=ne),S.props=f,S.state=ne,S.context=x,f=L):(typeof S.componentDidUpdate!="function"||C===r.memoizedProps&&G===r.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&G===r.memoizedState||(i.flags|=1024),f=!1)}return Ul(r,i,l,f,v,m)}function Ul(r,i,l,f,m,v){tp(r,i);var S=(i.flags&128)!==0;if(!f&&!S)return m&&af(i,l,!1),Cn(r,i,v);f=i.stateNode,cT.current=i;var C=S&&typeof l.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,r!==null&&S?(i.child=Br(i,r.child,null,v),i.child=Br(i,null,C,v)):Tt(r,i,C,v),i.memoizedState=f.state,m&&af(i,l,!0),i.child}function rp(r){var i=r.stateNode;i.pendingContext?of(r,i.pendingContext,i.pendingContext!==i.context):i.context&&of(r,i.context,!1),Tl(r,i.containerInfo)}function op(r,i,l,f,m){return Vr(),fl(m),i.flags|=256,Tt(r,i,l,f),i.child}var Fl={dehydrated:null,treeContext:null,retryLane:0};function Ol(r){return{baseLanes:r,cachePool:null,transitions:null}}function ip(r,i,l){var f=i.pendingProps,m=Ve.current,v=!1,S=(i.flags&128)!==0,C;if((C=S)||(C=r!==null&&r.memoizedState===null?!1:(m&2)!==0),C?(v=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),Ue(Ve,m&1),r===null)return dl(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=f.children,r=f.fallback,v?(f=i.mode,v=i.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=xs(S,f,0,null),r=Tr(r,f,l,null),v.return=i,r.return=i,v.sibling=r,i.child=v,i.child.memoizedState=Ol(l),i.memoizedState=Fl,r):Gl(i,S));if(m=r.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return dT(r,i,S,f,C,m,l);if(v){v=f.fallback,S=i.mode,m=r.child,C=m.sibling;var x={mode:"hidden",children:f.children};return(S&1)===0&&i.child!==m?(f=i.child,f.childLanes=0,f.pendingProps=x,i.deletions=null):(f=Xn(m,x),f.subtreeFlags=m.subtreeFlags&14680064),C!==null?v=Xn(C,v):(v=Tr(v,S,l,null),v.flags|=2),v.return=i,f.return=i,f.sibling=v,i.child=f,f=v,v=i.child,S=r.child.memoizedState,S=S===null?Ol(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=r.childLanes&~l,i.memoizedState=Fl,f}return v=r.child,r=v.sibling,f=Xn(v,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=l),f.return=i,f.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=f,i.memoizedState=null,f}function Gl(r,i){return i=xs({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function fs(r,i,l,f){return f!==null&&fl(f),Br(i,r.child,null,l),r=Gl(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function dT(r,i,l,f,m,v,S){if(l)return i.flags&256?(i.flags&=-257,f=Ml(Error(t(422))),fs(r,i,S,f)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(v=f.fallback,m=i.mode,f=xs({mode:"visible",children:f.children},m,0,null),v=Tr(v,m,S,null),v.flags|=2,f.return=i,v.return=i,f.sibling=v,i.child=f,(i.mode&1)!==0&&Br(i,r.child,null,S),i.child.memoizedState=Ol(S),i.memoizedState=Fl,v);if((i.mode&1)===0)return fs(r,i,S,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var C=f.dgst;return f=C,v=Error(t(419)),f=Ml(v,f,void 0),fs(r,i,S,f)}if(C=(S&r.childLanes)!==0,Ct||C){if(f=ot,f!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|S))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,En(r,m),tn(f,r,m,-1))}return tu(),f=Ml(Error(t(421))),fs(r,i,S,f)}return m.data==="$?"?(i.flags|=128,i.child=r.child,i=CT.bind(null,r),m._reactRetry=i,null):(r=v.treeContext,Mt=Gn(m.nextSibling),bt=i,qe=!0,Qt=null,r!==null&&(Vt[Bt++]=wn,Vt[Bt++]=Sn,Vt[Bt++]=cr,wn=r.id,Sn=r.overflow,cr=i),i=Gl(i,f.children),i.flags|=4096,i)}function sp(r,i,l){r.lanes|=i;var f=r.alternate;f!==null&&(f.lanes|=i),gl(r.return,i,l)}function ql(r,i,l,f,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=m)}function ap(r,i,l){var f=i.pendingProps,m=f.revealOrder,v=f.tail;if(Tt(r,i,f.children,l),f=Ve.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&sp(r,l,i);else if(r.tag===19)sp(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Ue(Ve,f),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)r=l.alternate,r!==null&&is(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),ql(i,!1,m,l,v);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&is(r)===null){i.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}ql(i,!0,l,null,v);break;case"together":ql(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ps(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Cn(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),mr|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,l=Xn(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Xn(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function fT(r,i,l){switch(i.tag){case 3:rp(i),Vr();break;case 5:Sf(i);break;case 1:_t(i.type)&&Ki(i);break;case 4:Tl(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,m=i.memoizedProps.value;Ue(ts,f._currentValue),f._currentValue=m;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(Ue(Ve,Ve.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?ip(r,i,l):(Ue(Ve,Ve.current&1),r=Cn(r,i,l),r!==null?r.sibling:null);Ue(Ve,Ve.current&1);break;case 19:if(f=(l&i.childLanes)!==0,(r.flags&128)!==0){if(f)return ap(r,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ue(Ve,Ve.current),f)break;return null;case 22:case 23:return i.lanes=0,ep(r,i,l)}return Cn(r,i,l)}var lp,Vl,up,cp;lp=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Vl=function(){},up=function(r,i,l,f){var m=r.memoizedProps;if(m!==f){r=i.stateNode,pr(cn.current);var v=null;switch(l){case"input":m=Le(r,m),f=Le(r,f),v=[];break;case"select":m=K({},m,{value:void 0}),f=K({},f,{value:void 0}),v=[];break;case"textarea":m=Gt(r,m),f=Gt(r,f),v=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Wi)}Sa(l,f);var S;l=null;for(L in m)if(!f.hasOwnProperty(L)&&m.hasOwnProperty(L)&&m[L]!=null)if(L==="style"){var C=m[L];for(S in C)C.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(s.hasOwnProperty(L)?v||(v=[]):(v=v||[]).push(L,null));for(L in f){var x=f[L];if(C=m!=null?m[L]:void 0,f.hasOwnProperty(L)&&x!==C&&(x!=null||C!=null))if(L==="style")if(C){for(S in C)!C.hasOwnProperty(S)||x&&x.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in x)x.hasOwnProperty(S)&&C[S]!==x[S]&&(l||(l={}),l[S]=x[S])}else l||(v||(v=[]),v.push(L,l)),l=x;else L==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,C=C?C.__html:void 0,x!=null&&C!==x&&(v=v||[]).push(L,x)):L==="children"?typeof x!="string"&&typeof x!="number"||(v=v||[]).push(L,""+x):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(s.hasOwnProperty(L)?(x!=null&&L==="onScroll"&&Fe("scroll",r),v||C===x||(v=[])):(v=v||[]).push(L,x))}l&&(v=v||[]).push("style",l);var L=v;(i.updateQueue=L)&&(i.flags|=4)}},cp=function(r,i,l,f){l!==f&&(i.flags|=4)};function Qo(r,i){if(!qe)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function pt(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,f=0;if(i)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=f,r.childLanes=l,i}function pT(r,i,l){var f=i.pendingProps;switch(ul(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return _t(i.type)&&Ji(),pt(i),null;case 3:return f=i.stateNode,Yr(),Oe(Et),Oe(dt),El(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(ji(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qt!==null&&(Zl(Qt),Qt=null))),Vl(r,i),pt(i),null;case 5:wl(i);var m=pr(Wo.current);if(l=i.type,r!==null&&i.stateNode!=null)up(r,i,l,f,m),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(t(166));return pt(i),null}if(r=pr(cn.current),ji(i)){f=i.stateNode,l=i.type;var v=i.memoizedProps;switch(f[un]=i,f[Vo]=v,r=(i.mode&1)!==0,l){case"dialog":Fe("cancel",f),Fe("close",f);break;case"iframe":case"object":case"embed":Fe("load",f);break;case"video":case"audio":for(m=0;m<Oo.length;m++)Fe(Oo[m],f);break;case"source":Fe("error",f);break;case"img":case"image":case"link":Fe("error",f),Fe("load",f);break;case"details":Fe("toggle",f);break;case"input":Xe(f,v),Fe("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Fe("invalid",f);break;case"textarea":Te(f,v),Fe("invalid",f)}Sa(l,v),m=null;for(var S in v)if(v.hasOwnProperty(S)){var C=v[S];S==="children"?typeof C=="string"?f.textContent!==C&&(v.suppressHydrationWarning!==!0&&Yi(f.textContent,C,r),m=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(v.suppressHydrationWarning!==!0&&Yi(f.textContent,C,r),m=["children",""+C]):s.hasOwnProperty(S)&&C!=null&&S==="onScroll"&&Fe("scroll",f)}switch(l){case"input":xr(f),St(f,v,!0);break;case"textarea":xr(f),qt(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Wi)}f=m,i.updateQueue=f,f!==null&&(i.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=De(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=S.createElement(l,{is:f.is}):(r=S.createElement(l),l==="select"&&(S=r,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):r=S.createElementNS(r,l),r[un]=i,r[Vo]=f,lp(r,i,!1,!1),i.stateNode=r;e:{switch(S=Ea(l,f),l){case"dialog":Fe("cancel",r),Fe("close",r),m=f;break;case"iframe":case"object":case"embed":Fe("load",r),m=f;break;case"video":case"audio":for(m=0;m<Oo.length;m++)Fe(Oo[m],r);m=f;break;case"source":Fe("error",r),m=f;break;case"img":case"image":case"link":Fe("error",r),Fe("load",r),m=f;break;case"details":Fe("toggle",r),m=f;break;case"input":Xe(r,f),m=Le(r,f),Fe("invalid",r);break;case"option":m=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},m=K({},f,{value:void 0}),Fe("invalid",r);break;case"textarea":Te(r,f),m=Gt(r,f),Fe("invalid",r);break;default:m=f}Sa(l,m),C=m;for(v in C)if(C.hasOwnProperty(v)){var x=C[v];v==="style"?Zc(r,x):v==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Ar(r,x)):v==="children"?typeof x=="string"?(l!=="textarea"||x!=="")&&sr(r,x):typeof x=="number"&&sr(r,""+x):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?x!=null&&v==="onScroll"&&Fe("scroll",r):x!=null&&F(r,v,x,S))}switch(l){case"input":xr(r),St(r,f,!1);break;case"textarea":xr(r),qt(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Ce(f.value));break;case"select":r.multiple=!!f.multiple,v=f.value,v!=null?an(r,!!f.multiple,v,!1):f.defaultValue!=null&&an(r,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=Wi)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return pt(i),null;case 6:if(r&&i.stateNode!=null)cp(r,i,r.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(t(166));if(l=pr(Wo.current),pr(cn.current),ji(i)){if(f=i.stateNode,l=i.memoizedProps,f[un]=i,(v=f.nodeValue!==l)&&(r=bt,r!==null))switch(r.tag){case 3:Yi(f.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Yi(f.nodeValue,l,(r.mode&1)!==0)}v&&(i.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[un]=i,i.stateNode=f}return pt(i),null;case 13:if(Oe(Ve),f=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(qe&&Mt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)pf(),Vr(),i.flags|=98560,v=!1;else if(v=ji(i),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[un]=i}else Vr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),v=!1}else Qt!==null&&(Zl(Qt),Qt=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Ve.current&1)!==0?je===0&&(je=3):tu())),i.updateQueue!==null&&(i.flags|=4),pt(i),null);case 4:return Yr(),Vl(r,i),r===null&&Go(i.stateNode.containerInfo),pt(i),null;case 10:return ml(i.type._context),pt(i),null;case 17:return _t(i.type)&&Ji(),pt(i),null;case 19:if(Oe(Ve),v=i.memoizedState,v===null)return pt(i),null;if(f=(i.flags&128)!==0,S=v.rendering,S===null)if(f)Qo(v,!1);else{if(je!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(S=is(r),S!==null){for(i.flags|=128,Qo(v,!1),f=S.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=l,l=i.child;l!==null;)v=l,r=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,r=S.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ue(Ve,Ve.current&1|2),i.child}r=r.sibling}v.tail!==null&&ze()>Kr&&(i.flags|=128,f=!0,Qo(v,!1),i.lanes=4194304)}else{if(!f)if(r=is(S),r!==null){if(i.flags|=128,f=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Qo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!qe)return pt(i),null}else 2*ze()-v.renderingStartTime>Kr&&l!==1073741824&&(i.flags|=128,f=!0,Qo(v,!1),i.lanes=4194304);v.isBackwards?(S.sibling=i.child,i.child=S):(l=v.last,l!==null?l.sibling=S:i.child=S,v.last=S)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=ze(),i.sibling=null,l=Ve.current,Ue(Ve,f?l&1|2:l&1),i):(pt(i),null);case 22:case 23:return eu(),f=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(Lt&1073741824)!==0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function hT(r,i){switch(ul(i),i.tag){case 1:return _t(i.type)&&Ji(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Yr(),Oe(Et),Oe(dt),El(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return wl(i),null;case 13:if(Oe(Ve),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Vr()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Oe(Ve),null;case 4:return Yr(),null;case 10:return ml(i.type._context),null;case 22:case 23:return eu(),null;case 24:return null;default:return null}}var hs=!1,ht=!1,mT=typeof WeakSet=="function"?WeakSet:Set,ee=null;function zr(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){We(r,i,f)}else l.current=null}function Bl(r,i,l){try{l()}catch(f){We(r,i,f)}}var dp=!1;function gT(r,i){if(el=Li,r=Bd(),Wa(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,C=-1,x=-1,L=0,V=0,$=r,G=null;t:for(;;){for(var j;$!==l||m!==0&&$.nodeType!==3||(C=S+m),$!==v||f!==0&&$.nodeType!==3||(x=S+f),$.nodeType===3&&(S+=$.nodeValue.length),(j=$.firstChild)!==null;)G=$,$=j;for(;;){if($===r)break t;if(G===l&&++L===m&&(C=S),G===v&&++V===f&&(x=S),(j=$.nextSibling)!==null)break;$=G,G=$.parentNode}$=j}l=C===-1||x===-1?null:{start:C,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(tl={focusedElem:r,selectionRange:l},Li=!1,ee=i;ee!==null;)if(i=ee,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ee=r;else for(;ee!==null;){i=ee;try{var ne=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var re=ne.memoizedProps,Je=ne.memoizedState,P=i.stateNode,I=P.getSnapshotBeforeUpdate(i.elementType===i.type?re:Zt(i.type,re),Je);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var b=i.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(W){We(i,i.return,W)}if(r=i.sibling,r!==null){r.return=i.return,ee=r;break}ee=i.return}return ne=dp,dp=!1,ne}function Zo(r,i,l){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&r)===r){var v=m.destroy;m.destroy=void 0,v!==void 0&&Bl(i,l,v)}m=m.next}while(m!==f)}}function ms(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var f=l.create;l.destroy=f()}l=l.next}while(l!==i)}}function $l(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function fp(r){var i=r.alternate;i!==null&&(r.alternate=null,fp(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[un],delete i[Vo],delete i[il],delete i[Zv],delete i[jv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function pp(r){return r.tag===5||r.tag===3||r.tag===4}function hp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||pp(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hl(r,i,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Wi));else if(f!==4&&(r=r.child,r!==null))for(Hl(r,i,l),r=r.sibling;r!==null;)Hl(r,i,l),r=r.sibling}function Yl(r,i,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Yl(r,i,l),r=r.sibling;r!==null;)Yl(r,i,l),r=r.sibling}var at=null,jt=!1;function Yn(r,i,l){for(l=l.child;l!==null;)mp(r,i,l),l=l.sibling}function mp(r,i,l){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ki,l)}catch{}switch(l.tag){case 5:ht||zr(l,i);case 6:var f=at,m=jt;at=null,Yn(r,i,l),at=f,jt=m,at!==null&&(jt?(r=at,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):at.removeChild(l.stateNode));break;case 18:at!==null&&(jt?(r=at,l=l.stateNode,r.nodeType===8?ol(r.parentNode,l):r.nodeType===1&&ol(r,l),No(r)):ol(at,l.stateNode));break;case 4:f=at,m=jt,at=l.stateNode.containerInfo,jt=!0,Yn(r,i,l),at=f,jt=m;break;case 0:case 11:case 14:case 15:if(!ht&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var v=m,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Bl(l,i,S),m=m.next}while(m!==f)}Yn(r,i,l);break;case 1:if(!ht&&(zr(l,i),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(C){We(l,i,C)}Yn(r,i,l);break;case 21:Yn(r,i,l);break;case 22:l.mode&1?(ht=(f=ht)||l.memoizedState!==null,Yn(r,i,l),ht=f):Yn(r,i,l);break;default:Yn(r,i,l)}}function gp(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new mT),i.forEach(function(f){var m=xT.bind(null,r,f);l.has(f)||(l.add(f),f.then(m,m))})}}function en(r,i){var l=i.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];try{var v=r,S=i,C=S;e:for(;C!==null;){switch(C.tag){case 5:at=C.stateNode,jt=!1;break e;case 3:at=C.stateNode.containerInfo,jt=!0;break e;case 4:at=C.stateNode.containerInfo,jt=!0;break e}C=C.return}if(at===null)throw Error(t(160));mp(v,S,m),at=null,jt=!1;var x=m.alternate;x!==null&&(x.return=null),m.return=null}catch(L){We(m,i,L)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)yp(i,r),i=i.sibling}function yp(r,i){var l=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(en(i,r),fn(r),f&4){try{Zo(3,r,r.return),ms(3,r)}catch(re){We(r,r.return,re)}try{Zo(5,r,r.return)}catch(re){We(r,r.return,re)}}break;case 1:en(i,r),fn(r),f&512&&l!==null&&zr(l,l.return);break;case 5:if(en(i,r),fn(r),f&512&&l!==null&&zr(l,l.return),r.flags&32){var m=r.stateNode;try{sr(m,"")}catch(re){We(r,r.return,re)}}if(f&4&&(m=r.stateNode,m!=null)){var v=r.memoizedProps,S=l!==null?l.memoizedProps:v,C=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{C==="input"&&v.type==="radio"&&v.name!=null&&Re(m,v),Ea(C,S);var L=Ea(C,v);for(S=0;S<x.length;S+=2){var V=x[S],$=x[S+1];V==="style"?Zc(m,$):V==="dangerouslySetInnerHTML"?Ar(m,$):V==="children"?sr(m,$):F(m,V,$,L)}switch(C){case"input":Rt(m,v);break;case"textarea":Se(m,v);break;case"select":var G=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var j=v.value;j!=null?an(m,!!v.multiple,j,!1):G!==!!v.multiple&&(v.defaultValue!=null?an(m,!!v.multiple,v.defaultValue,!0):an(m,!!v.multiple,v.multiple?[]:"",!1))}m[Vo]=v}catch(re){We(r,r.return,re)}}break;case 6:if(en(i,r),fn(r),f&4){if(r.stateNode===null)throw Error(t(162));m=r.stateNode,v=r.memoizedProps;try{m.nodeValue=v}catch(re){We(r,r.return,re)}}break;case 3:if(en(i,r),fn(r),f&4&&l!==null&&l.memoizedState.isDehydrated)try{No(i.containerInfo)}catch(re){We(r,r.return,re)}break;case 4:en(i,r),fn(r);break;case 13:en(i,r),fn(r),m=r.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Jl=ze())),f&4&&gp(r);break;case 22:if(V=l!==null&&l.memoizedState!==null,r.mode&1?(ht=(L=ht)||V,en(i,r),ht=L):en(i,r),fn(r),f&8192){if(L=r.memoizedState!==null,(r.stateNode.isHidden=L)&&!V&&(r.mode&1)!==0)for(ee=r,V=r.child;V!==null;){for($=ee=V;ee!==null;){switch(G=ee,j=G.child,G.tag){case 0:case 11:case 14:case 15:Zo(4,G,G.return);break;case 1:zr(G,G.return);var ne=G.stateNode;if(typeof ne.componentWillUnmount=="function"){f=G,l=G.return;try{i=f,ne.props=i.memoizedProps,ne.state=i.memoizedState,ne.componentWillUnmount()}catch(re){We(f,l,re)}}break;case 5:zr(G,G.return);break;case 22:if(G.memoizedState!==null){wp($);continue}}j!==null?(j.return=G,ee=j):wp($)}V=V.sibling}e:for(V=null,$=r;;){if($.tag===5){if(V===null){V=$;try{m=$.stateNode,L?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(C=$.stateNode,x=$.memoizedProps.style,S=x!=null&&x.hasOwnProperty("display")?x.display:null,C.style.display=Qc("display",S))}catch(re){We(r,r.return,re)}}}else if($.tag===6){if(V===null)try{$.stateNode.nodeValue=L?"":$.memoizedProps}catch(re){We(r,r.return,re)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===r)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===r)break e;for(;$.sibling===null;){if($.return===null||$.return===r)break e;V===$&&(V=null),$=$.return}V===$&&(V=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:en(i,r),fn(r),f&4&&gp(r);break;case 21:break;default:en(i,r),fn(r)}}function fn(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(pp(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(sr(m,""),f.flags&=-33);var v=hp(r);Yl(r,v,m);break;case 3:case 4:var S=f.stateNode.containerInfo,C=hp(r);Hl(r,C,S);break;default:throw Error(t(161))}}catch(x){We(r,r.return,x)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function yT(r,i,l){ee=r,vp(r)}function vp(r,i,l){for(var f=(r.mode&1)!==0;ee!==null;){var m=ee,v=m.child;if(m.tag===22&&f){var S=m.memoizedState!==null||hs;if(!S){var C=m.alternate,x=C!==null&&C.memoizedState!==null||ht;C=hs;var L=ht;if(hs=S,(ht=x)&&!L)for(ee=m;ee!==null;)S=ee,x=S.child,S.tag===22&&S.memoizedState!==null?Sp(m):x!==null?(x.return=S,ee=x):Sp(m);for(;v!==null;)ee=v,vp(v),v=v.sibling;ee=m,hs=C,ht=L}Tp(r)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,ee=v):Tp(r)}}function Tp(r){for(;ee!==null;){var i=ee;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ht||ms(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!ht)if(l===null)f.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:Zt(i.type,l.memoizedProps);f.componentDidUpdate(m,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&wf(i,v,f);break;case 3:var S=i.updateQueue;if(S!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}wf(i,S,l)}break;case 5:var C=i.stateNode;if(l===null&&i.flags&4){l=C;var x=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&l.focus();break;case"img":x.src&&(l.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var L=i.alternate;if(L!==null){var V=L.memoizedState;if(V!==null){var $=V.dehydrated;$!==null&&No($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ht||i.flags&512&&$l(i)}catch(G){We(i,i.return,G)}}if(i===r){ee=null;break}if(l=i.sibling,l!==null){l.return=i.return,ee=l;break}ee=i.return}}function wp(r){for(;ee!==null;){var i=ee;if(i===r){ee=null;break}var l=i.sibling;if(l!==null){l.return=i.return,ee=l;break}ee=i.return}}function Sp(r){for(;ee!==null;){var i=ee;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ms(4,i)}catch(x){We(i,l,x)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var m=i.return;try{f.componentDidMount()}catch(x){We(i,m,x)}}var v=i.return;try{$l(i)}catch(x){We(i,v,x)}break;case 5:var S=i.return;try{$l(i)}catch(x){We(i,S,x)}}}catch(x){We(i,i.return,x)}if(i===r){ee=null;break}var C=i.sibling;if(C!==null){C.return=i.return,ee=C;break}ee=i.return}}var vT=Math.ceil,gs=U.ReactCurrentDispatcher,Wl=U.ReactCurrentOwner,Yt=U.ReactCurrentBatchConfig,xe=0,ot=null,Qe=null,lt=0,Lt=0,Jr=qn(0),je=0,jo=null,mr=0,ys=0,zl=0,ei=null,xt=null,Jl=0,Kr=1/0,xn=null,vs=!1,Kl=null,Wn=null,Ts=!1,zn=null,ws=0,ti=0,Xl=null,Ss=-1,Es=0;function wt(){return(xe&6)!==0?ze():Ss!==-1?Ss:Ss=ze()}function Jn(r){return(r.mode&1)===0?1:(xe&2)!==0&&lt!==0?lt&-lt:tT.transition!==null?(Es===0&&(Es=pd()),Es):(r=Pe,r!==0||(r=window.event,r=r===void 0?16:Ed(r.type)),r)}function tn(r,i,l,f){if(50<ti)throw ti=0,Xl=null,Error(t(185));xo(r,l,f),((xe&2)===0||r!==ot)&&(r===ot&&((xe&2)===0&&(ys|=l),je===4&&Kn(r,lt)),At(r,f),l===1&&xe===0&&(i.mode&1)===0&&(Kr=ze()+500,Xi&&Bn()))}function At(r,i){var l=r.callbackNode;tv(r,i);var f=Pi(r,r===ot?lt:0);if(f===0)l!==null&&cd(l),r.callbackNode=null,r.callbackPriority=0;else if(i=f&-f,r.callbackPriority!==i){if(l!=null&&cd(l),i===1)r.tag===0?eT(_p.bind(null,r)):lf(_p.bind(null,r)),Xv(function(){(xe&6)===0&&Bn()}),l=null;else{switch(hd(f)){case 1:l=Ra;break;case 4:l=dd;break;case 16:l=Ii;break;case 536870912:l=fd;break;default:l=Ii}l=Pp(l,Ep.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Ep(r,i){if(Ss=-1,Es=0,(xe&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Xr()&&r.callbackNode!==l)return null;var f=Pi(r,r===ot?lt:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||i)i=_s(r,f);else{i=f;var m=xe;xe|=2;var v=xp();(ot!==r||lt!==i)&&(xn=null,Kr=ze()+500,yr(r,i));do try{ST();break}catch(C){Cp(r,C)}while(!0);hl(),gs.current=v,xe=m,Qe!==null?i=0:(ot=null,lt=0,i=je)}if(i!==0){if(i===2&&(m=Na(r),m!==0&&(f=m,i=Ql(r,m))),i===1)throw l=jo,yr(r,0),Kn(r,f),At(r,ze()),l;if(i===6)Kn(r,f);else{if(m=r.current.alternate,(f&30)===0&&!TT(m)&&(i=_s(r,f),i===2&&(v=Na(r),v!==0&&(f=v,i=Ql(r,v))),i===1))throw l=jo,yr(r,0),Kn(r,f),At(r,ze()),l;switch(r.finishedWork=m,r.finishedLanes=f,i){case 0:case 1:throw Error(t(345));case 2:vr(r,xt,xn);break;case 3:if(Kn(r,f),(f&130023424)===f&&(i=Jl+500-ze(),10<i)){if(Pi(r,0)!==0)break;if(m=r.suspendedLanes,(m&f)!==f){wt(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=rl(vr.bind(null,r,xt,xn),i);break}vr(r,xt,xn);break;case 4:if(Kn(r,f),(f&4194240)===f)break;for(i=r.eventTimes,m=-1;0<f;){var S=31-Kt(f);v=1<<S,S=i[S],S>m&&(m=S),f&=~v}if(f=m,f=ze()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*vT(f/1960))-f,10<f){r.timeoutHandle=rl(vr.bind(null,r,xt,xn),f);break}vr(r,xt,xn);break;case 5:vr(r,xt,xn);break;default:throw Error(t(329))}}}return At(r,ze()),r.callbackNode===l?Ep.bind(null,r):null}function Ql(r,i){var l=ei;return r.current.memoizedState.isDehydrated&&(yr(r,i).flags|=256),r=_s(r,i),r!==2&&(i=xt,xt=l,i!==null&&Zl(i)),r}function Zl(r){xt===null?xt=r:xt.push.apply(xt,r)}function TT(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var m=l[f],v=m.getSnapshot;m=m.value;try{if(!Xt(v(),m))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Kn(r,i){for(i&=~zl,i&=~ys,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Kt(i),f=1<<l;r[l]=-1,i&=~f}}function _p(r){if((xe&6)!==0)throw Error(t(327));Xr();var i=Pi(r,0);if((i&1)===0)return At(r,ze()),null;var l=_s(r,i);if(r.tag!==0&&l===2){var f=Na(r);f!==0&&(i=f,l=Ql(r,f))}if(l===1)throw l=jo,yr(r,0),Kn(r,i),At(r,ze()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,vr(r,xt,xn),At(r,ze()),null}function jl(r,i){var l=xe;xe|=1;try{return r(i)}finally{xe=l,xe===0&&(Kr=ze()+500,Xi&&Bn())}}function gr(r){zn!==null&&zn.tag===0&&(xe&6)===0&&Xr();var i=xe;xe|=1;var l=Yt.transition,f=Pe;try{if(Yt.transition=null,Pe=1,r)return r()}finally{Pe=f,Yt.transition=l,xe=i,(xe&6)===0&&Bn()}}function eu(){Lt=Jr.current,Oe(Jr)}function yr(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,Kv(l)),Qe!==null)for(l=Qe.return;l!==null;){var f=l;switch(ul(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ji();break;case 3:Yr(),Oe(Et),Oe(dt),El();break;case 5:wl(f);break;case 4:Yr();break;case 13:Oe(Ve);break;case 19:Oe(Ve);break;case 10:ml(f.type._context);break;case 22:case 23:eu()}l=l.return}if(ot=r,Qe=r=Xn(r.current,null),lt=Lt=i,je=0,jo=null,zl=ys=mr=0,xt=ei=null,fr!==null){for(i=0;i<fr.length;i++)if(l=fr[i],f=l.interleaved,f!==null){l.interleaved=null;var m=f.next,v=l.pending;if(v!==null){var S=v.next;v.next=m,f.next=S}l.pending=f}fr=null}return r}function Cp(r,i){do{var l=Qe;try{if(hl(),ss.current=cs,as){for(var f=Be.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}as=!1}if(hr=0,rt=Ze=Be=null,zo=!1,Jo=0,Wl.current=null,l===null||l.return===null){je=1,jo=i,Qe=null;break}e:{var v=r,S=l.return,C=l,x=i;if(i=lt,C.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var L=x,V=C,$=V.tag;if((V.mode&1)===0&&($===0||$===11||$===15)){var G=V.alternate;G?(V.updateQueue=G.updateQueue,V.memoizedState=G.memoizedState,V.lanes=G.lanes):(V.updateQueue=null,V.memoizedState=null)}var j=Kf(S);if(j!==null){j.flags&=-257,Xf(j,S,C,v,i),j.mode&1&&Jf(v,L,i),i=j,x=L;var ne=i.updateQueue;if(ne===null){var re=new Set;re.add(x),i.updateQueue=re}else ne.add(x);break e}else{if((i&1)===0){Jf(v,L,i),tu();break e}x=Error(t(426))}}else if(qe&&C.mode&1){var Je=Kf(S);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),Xf(Je,S,C,v,i),fl(Wr(x,C));break e}}v=x=Wr(x,C),je!==4&&(je=2),ei===null?ei=[v]:ei.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var P=Wf(v,x,i);Tf(v,P);break e;case 1:C=x;var I=v.type,b=v.stateNode;if((v.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wn===null||!Wn.has(b)))){v.flags|=65536,i&=-i,v.lanes|=i;var W=zf(v,C,i);Tf(v,W);break e}}v=v.return}while(v!==null)}Ip(l)}catch(oe){i=oe,Qe===l&&l!==null&&(Qe=l=l.return);continue}break}while(!0)}function xp(){var r=gs.current;return gs.current=cs,r===null?cs:r}function tu(){(je===0||je===3||je===2)&&(je=4),ot===null||(mr&268435455)===0&&(ys&268435455)===0||Kn(ot,lt)}function _s(r,i){var l=xe;xe|=2;var f=xp();(ot!==r||lt!==i)&&(xn=null,yr(r,i));do try{wT();break}catch(m){Cp(r,m)}while(!0);if(hl(),xe=l,gs.current=f,Qe!==null)throw Error(t(261));return ot=null,lt=0,je}function wT(){for(;Qe!==null;)Ap(Qe)}function ST(){for(;Qe!==null&&!Wy();)Ap(Qe)}function Ap(r){var i=Np(r.alternate,r,Lt);r.memoizedProps=r.pendingProps,i===null?Ip(r):Qe=i,Wl.current=null}function Ip(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=pT(l,i,Lt),l!==null){Qe=l;return}}else{if(l=hT(l,i),l!==null){l.flags&=32767,Qe=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{je=6,Qe=null;return}}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=r}while(i!==null);je===0&&(je=5)}function vr(r,i,l){var f=Pe,m=Yt.transition;try{Yt.transition=null,Pe=1,ET(r,i,l,f)}finally{Yt.transition=m,Pe=f}return null}function ET(r,i,l,f){do Xr();while(zn!==null);if((xe&6)!==0)throw Error(t(327));l=r.finishedWork;var m=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var v=l.lanes|l.childLanes;if(nv(r,v),r===ot&&(Qe=ot=null,lt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ts||(Ts=!0,Pp(Ii,function(){return Xr(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Yt.transition,Yt.transition=null;var S=Pe;Pe=1;var C=xe;xe|=4,Wl.current=null,gT(r,l),yp(l,r),Bv(tl),Li=!!el,tl=el=null,r.current=l,yT(l),zy(),xe=C,Pe=S,Yt.transition=v}else r.current=l;if(Ts&&(Ts=!1,zn=r,ws=m),v=r.pendingLanes,v===0&&(Wn=null),Xy(l.stateNode),At(r,ze()),i!==null)for(f=r.onRecoverableError,l=0;l<i.length;l++)m=i[l],f(m.value,{componentStack:m.stack,digest:m.digest});if(vs)throw vs=!1,r=Kl,Kl=null,r;return(ws&1)!==0&&r.tag!==0&&Xr(),v=r.pendingLanes,(v&1)!==0?r===Xl?ti++:(ti=0,Xl=r):ti=0,Bn(),null}function Xr(){if(zn!==null){var r=hd(ws),i=Yt.transition,l=Pe;try{if(Yt.transition=null,Pe=16>r?16:r,zn===null)var f=!1;else{if(r=zn,zn=null,ws=0,(xe&6)!==0)throw Error(t(331));var m=xe;for(xe|=4,ee=r.current;ee!==null;){var v=ee,S=v.child;if((ee.flags&16)!==0){var C=v.deletions;if(C!==null){for(var x=0;x<C.length;x++){var L=C[x];for(ee=L;ee!==null;){var V=ee;switch(V.tag){case 0:case 11:case 15:Zo(8,V,v)}var $=V.child;if($!==null)$.return=V,ee=$;else for(;ee!==null;){V=ee;var G=V.sibling,j=V.return;if(fp(V),V===L){ee=null;break}if(G!==null){G.return=j,ee=G;break}ee=j}}}var ne=v.alternate;if(ne!==null){var re=ne.child;if(re!==null){ne.child=null;do{var Je=re.sibling;re.sibling=null,re=Je}while(re!==null)}}ee=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ee=S;else e:for(;ee!==null;){if(v=ee,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Zo(9,v,v.return)}var P=v.sibling;if(P!==null){P.return=v.return,ee=P;break e}ee=v.return}}var I=r.current;for(ee=I;ee!==null;){S=ee;var b=S.child;if((S.subtreeFlags&2064)!==0&&b!==null)b.return=S,ee=b;else e:for(S=I;ee!==null;){if(C=ee,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:ms(9,C)}}catch(oe){We(C,C.return,oe)}if(C===S){ee=null;break e}var W=C.sibling;if(W!==null){W.return=C.return,ee=W;break e}ee=C.return}}if(xe=m,Bn(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ki,r)}catch{}f=!0}return f}finally{Pe=l,Yt.transition=i}}return!1}function kp(r,i,l){i=Wr(l,i),i=Wf(r,i,1),r=Hn(r,i,1),i=wt(),r!==null&&(xo(r,1,i),At(r,i))}function We(r,i,l){if(r.tag===3)kp(r,r,l);else for(;i!==null;){if(i.tag===3){kp(i,r,l);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Wn===null||!Wn.has(f))){r=Wr(l,r),r=zf(i,r,1),i=Hn(i,r,1),r=wt(),i!==null&&(xo(i,1,r),At(i,r));break}}i=i.return}}function _T(r,i,l){var f=r.pingCache;f!==null&&f.delete(i),i=wt(),r.pingedLanes|=r.suspendedLanes&l,ot===r&&(lt&l)===l&&(je===4||je===3&&(lt&130023424)===lt&&500>ze()-Jl?yr(r,0):zl|=l),At(r,i)}function Rp(r,i){i===0&&((r.mode&1)===0?i=1:(i=Ni,Ni<<=1,(Ni&130023424)===0&&(Ni=4194304)));var l=wt();r=En(r,i),r!==null&&(xo(r,i,l),At(r,l))}function CT(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Rp(r,l)}function xT(r,i){var l=0;switch(r.tag){case 13:var f=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(i),Rp(r,l)}var Np;Np=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||Et.current)Ct=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return Ct=!1,fT(r,i,l);Ct=(r.flags&131072)!==0}else Ct=!1,qe&&(i.flags&1048576)!==0&&uf(i,Zi,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;ps(r,i),r=i.pendingProps;var m=Or(i,dt.current);Hr(i,l),m=xl(null,i,f,r,m,l);var v=Al();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,_t(f)?(v=!0,Ki(i)):v=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,vl(i),m.updater=ds,i.stateNode=m,m._reactInternals=i,bl(i,f,r,l),i=Ul(null,i,f,!0,v,l)):(i.tag=0,qe&&v&&ll(i),Tt(null,i,m,l),i=i.child),i;case 16:f=i.elementType;e:{switch(ps(r,i),r=i.pendingProps,m=f._init,f=m(f._payload),i.type=f,m=i.tag=IT(f),r=Zt(f,r),m){case 0:i=Dl(null,i,f,r,l);break e;case 1:i=np(null,i,f,r,l);break e;case 11:i=Qf(null,i,f,r,l);break e;case 14:i=Zf(null,i,f,Zt(f.type,r),l);break e}throw Error(t(306,f,""))}return i;case 0:return f=i.type,m=i.pendingProps,m=i.elementType===f?m:Zt(f,m),Dl(r,i,f,m,l);case 1:return f=i.type,m=i.pendingProps,m=i.elementType===f?m:Zt(f,m),np(r,i,f,m,l);case 3:e:{if(rp(i),r===null)throw Error(t(387));f=i.pendingProps,v=i.memoizedState,m=v.element,vf(r,i),os(i,f,null,l);var S=i.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){m=Wr(Error(t(423)),i),i=op(r,i,f,l,m);break e}else if(f!==m){m=Wr(Error(t(424)),i),i=op(r,i,f,l,m);break e}else for(Mt=Gn(i.stateNode.containerInfo.firstChild),bt=i,qe=!0,Qt=null,l=gf(i,null,f,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Vr(),f===m){i=Cn(r,i,l);break e}Tt(r,i,f,l)}i=i.child}return i;case 5:return Sf(i),r===null&&dl(i),f=i.type,m=i.pendingProps,v=r!==null?r.memoizedProps:null,S=m.children,nl(f,m)?S=null:v!==null&&nl(f,v)&&(i.flags|=32),tp(r,i),Tt(r,i,S,l),i.child;case 6:return r===null&&dl(i),null;case 13:return ip(r,i,l);case 4:return Tl(i,i.stateNode.containerInfo),f=i.pendingProps,r===null?i.child=Br(i,null,f,l):Tt(r,i,f,l),i.child;case 11:return f=i.type,m=i.pendingProps,m=i.elementType===f?m:Zt(f,m),Qf(r,i,f,m,l);case 7:return Tt(r,i,i.pendingProps,l),i.child;case 8:return Tt(r,i,i.pendingProps.children,l),i.child;case 12:return Tt(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(f=i.type._context,m=i.pendingProps,v=i.memoizedProps,S=m.value,Ue(ts,f._currentValue),f._currentValue=S,v!==null)if(Xt(v.value,S)){if(v.children===m.children&&!Et.current){i=Cn(r,i,l);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var C=v.dependencies;if(C!==null){S=v.child;for(var x=C.firstContext;x!==null;){if(x.context===f){if(v.tag===1){x=_n(-1,l&-l),x.tag=2;var L=v.updateQueue;if(L!==null){L=L.shared;var V=L.pending;V===null?x.next=x:(x.next=V.next,V.next=x),L.pending=x}}v.lanes|=l,x=v.alternate,x!==null&&(x.lanes|=l),gl(v.return,l,i),C.lanes|=l;break}x=x.next}}else if(v.tag===10)S=v.type===i.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,C=S.alternate,C!==null&&(C.lanes|=l),gl(S,l,i),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===i){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Tt(r,i,m.children,l),i=i.child}return i;case 9:return m=i.type,f=i.pendingProps.children,Hr(i,l),m=$t(m),f=f(m),i.flags|=1,Tt(r,i,f,l),i.child;case 14:return f=i.type,m=Zt(f,i.pendingProps),m=Zt(f.type,m),Zf(r,i,f,m,l);case 15:return jf(r,i,i.type,i.pendingProps,l);case 17:return f=i.type,m=i.pendingProps,m=i.elementType===f?m:Zt(f,m),ps(r,i),i.tag=1,_t(f)?(r=!0,Ki(i)):r=!1,Hr(i,l),Hf(i,f,m),bl(i,f,m,l),Ul(null,i,f,!0,r,l);case 19:return ap(r,i,l);case 22:return ep(r,i,l)}throw Error(t(156,i.tag))};function Pp(r,i){return ud(r,i)}function AT(r,i,l,f){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(r,i,l,f){return new AT(r,i,l,f)}function nu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function IT(r){if(typeof r=="function")return nu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===me)return 11;if(r===Ke)return 14}return 2}function Xn(r,i){var l=r.alternate;return l===null?(l=Wt(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Cs(r,i,l,f,m,v){var S=2;if(f=r,typeof r=="function")nu(r)&&(S=1);else if(typeof r=="string")S=5;else e:switch(r){case q:return Tr(l.children,m,v,i);case ie:S=8,m|=8;break;case z:return r=Wt(12,l,i,m|2),r.elementType=z,r.lanes=v,r;case Ee:return r=Wt(13,l,i,m),r.elementType=Ee,r.lanes=v,r;case Ye:return r=Wt(19,l,i,m),r.elementType=Ye,r.lanes=v,r;case ke:return xs(l,m,v,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case J:S=10;break e;case te:S=9;break e;case me:S=11;break e;case Ke:S=14;break e;case be:S=16,f=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Wt(S,l,i,m),i.elementType=r,i.type=f,i.lanes=v,i}function Tr(r,i,l,f){return r=Wt(7,r,f,i),r.lanes=l,r}function xs(r,i,l,f){return r=Wt(22,r,f,i),r.elementType=ke,r.lanes=l,r.stateNode={isHidden:!1},r}function ru(r,i,l){return r=Wt(6,r,null,i),r.lanes=l,r}function ou(r,i,l){return i=Wt(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function kT(r,i,l,f,m){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pa(0),this.expirationTimes=Pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function iu(r,i,l,f,m,v,S,C,x){return r=new kT(r,i,l,C,x),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Wt(3,null,null,i),r.current=v,v.stateNode=r,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},vl(v),r}function RT(r,i,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:f==null?null:""+f,children:r,containerInfo:i,implementation:l}}function bp(r){if(!r)return Vn;r=r._reactInternals;e:{if(ar(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(_t(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(_t(l))return sf(r,l,i)}return i}function Mp(r,i,l,f,m,v,S,C,x){return r=iu(l,f,!0,r,m,v,S,C,x),r.context=bp(null),l=r.current,f=wt(),m=Jn(l),v=_n(f,m),v.callback=i??null,Hn(l,v,m),r.current.lanes=m,xo(r,m,f),At(r,f),r}function As(r,i,l,f){var m=i.current,v=wt(),S=Jn(m);return l=bp(l),i.context===null?i.context=l:i.pendingContext=l,i=_n(v,S),i.payload={element:r},f=f===void 0?null:f,f!==null&&(i.callback=f),r=Hn(m,i,S),r!==null&&(tn(r,m,S,v),rs(r,m,S)),S}function Is(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Lp(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function su(r,i){Lp(r,i),(r=r.alternate)&&Lp(r,i)}function NT(){return null}var Dp=typeof reportError=="function"?reportError:function(r){console.error(r)};function au(r){this._internalRoot=r}ks.prototype.render=au.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));As(r,i,null,null)},ks.prototype.unmount=au.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;gr(function(){As(null,r,null,null)}),i[vn]=null}};function ks(r){this._internalRoot=r}ks.prototype.unstable_scheduleHydration=function(r){if(r){var i=yd();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Un.length&&i!==0&&i<Un[l].priority;l++);Un.splice(l,0,r),l===0&&wd(r)}};function lu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Rs(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Up(){}function PT(r,i,l,f,m){if(m){if(typeof f=="function"){var v=f;f=function(){var L=Is(S);v.call(L)}}var S=Mp(i,f,r,0,null,!1,!1,"",Up);return r._reactRootContainer=S,r[vn]=S.current,Go(r.nodeType===8?r.parentNode:r),gr(),S}for(;m=r.lastChild;)r.removeChild(m);if(typeof f=="function"){var C=f;f=function(){var L=Is(x);C.call(L)}}var x=iu(r,0,!1,null,null,!1,!1,"",Up);return r._reactRootContainer=x,r[vn]=x.current,Go(r.nodeType===8?r.parentNode:r),gr(function(){As(i,x,l,f)}),x}function Ns(r,i,l,f,m){var v=l._reactRootContainer;if(v){var S=v;if(typeof m=="function"){var C=m;m=function(){var x=Is(S);C.call(x)}}As(i,S,r,m)}else S=PT(l,i,r,m,f);return Is(S)}md=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Co(i.pendingLanes);l!==0&&(ba(i,l|1),At(i,ze()),(xe&6)===0&&(Kr=ze()+500,Bn()))}break;case 13:gr(function(){var f=En(r,1);if(f!==null){var m=wt();tn(f,r,1,m)}}),su(r,1)}},Ma=function(r){if(r.tag===13){var i=En(r,134217728);if(i!==null){var l=wt();tn(i,r,134217728,l)}su(r,134217728)}},gd=function(r){if(r.tag===13){var i=Jn(r),l=En(r,i);if(l!==null){var f=wt();tn(l,r,i,f)}su(r,i)}},yd=function(){return Pe},vd=function(r,i){var l=Pe;try{return Pe=r,i()}finally{Pe=l}},xa=function(r,i,l){switch(i){case"input":if(Rt(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var f=l[i];if(f!==r&&f.form===r.form){var m=zi(f);if(!m)throw Error(t(90));Ci(f),Rt(f,m)}}}break;case"textarea":Se(r,l);break;case"select":i=l.value,i!=null&&an(r,!!l.multiple,i,!1)}},nd=jl,rd=gr;var bT={usingClientEntryPoint:!1,Events:[Bo,Ur,zi,ed,td,jl]},ni={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MT={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ad(r),r===null?null:r.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||NT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ps=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ps.isDisabled&&Ps.supportsFiber)try{ki=Ps.inject(MT),ln=Ps}catch{}}return It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bT,It.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lu(i))throw Error(t(200));return RT(r,i,null,l)},It.createRoot=function(r,i){if(!lu(r))throw Error(t(299));var l=!1,f="",m=Dp;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=iu(r,1,!1,null,null,l,!1,f,m),r[vn]=i.current,Go(r.nodeType===8?r.parentNode:r),new au(i)},It.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ad(i),r=r===null?null:r.stateNode,r},It.flushSync=function(r){return gr(r)},It.hydrate=function(r,i,l){if(!Rs(i))throw Error(t(200));return Ns(null,r,i,!0,l)},It.hydrateRoot=function(r,i,l){if(!lu(r))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,m=!1,v="",S=Dp;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),i=Mp(i,null,r,1,l??null,m,!1,v,S),r[vn]=i.current,Go(r),f)for(r=0;r<f.length;r++)l=f[r],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new ks(i)},It.render=function(r,i,l){if(!Rs(i))throw Error(t(200));return Ns(null,r,i,!1,l)},It.unmountComponentAtNode=function(r){if(!Rs(r))throw Error(t(40));return r._reactRootContainer?(gr(function(){Ns(null,null,r,!1,function(){r._reactRootContainer=null,r[vn]=null})}),!0):!1},It.unstable_batchedUpdates=jl,It.unstable_renderSubtreeIntoContainer=function(r,i,l,f){if(!Rs(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Ns(r,i,l,!1,f)},It.version="18.3.1-next-f1338f8080-20240426",It}var Hp;function BT(){if(Hp)return du.exports;Hp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),du.exports=VT(),du.exports}var Yp;function $T(){if(Yp)return bs;Yp=1;var n=BT();return bs.createRoot=n.createRoot,bs.hydrateRoot=n.hydrateRoot,bs}var HT=$T();const YT=Hm(HT),WT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Wp=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})}),Pu=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.553L16.5 21.75l-.398-1.197a3.375 3.375 0 00-2.456-2.456L12.75 18l1.197-.398a3.375 3.375 0 002.456-2.456L16.5 14.25l.398 1.197a3.375 3.375 0 002.456 2.456l1.197.398-1.197.398a3.375 3.375 0 00-2.456 2.456z"})}),bu=({className:n})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:n,children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),zT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Mu=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),JT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Ym=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:E.jsx("path",{fillRule:"evenodd",d:"M4.5 4.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z",clipRule:"evenodd"})}),KT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),XT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:E.jsx("path",{d:"M13.535 3.322l-2.48 4.03-3.21-2.44-3.32 8.35.33 1.32c1.47 5.86 7.42 9.43 13.28 7.96 5.86-1.47 9.43-7.42 7.96-13.28l-.33-1.32-8.35-3.32-3.88 2.68zM9.015 13.982c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),QT=({className:n})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001a.75.75 0 01.75.75v3.676a.75.75 0 01-1.5 0V12h-4.992a.75.75 0 01-.75-.75V7.5a.75.75 0 01.75-.75h3.676a.75.75 0 010 1.5H16.023a.75.75 0 01-.75.75v3.676a.75.75 0 01.75.75z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 9.75-7.5 9.75s-7.5-2.608-7.5-9.75S9.5 3 12 3s7.5 4.358 7.5 7.5z"})]}),ZT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Wm=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),jT=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),ew=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),zp=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})}),tw=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),nw=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),rw=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 0 1-2.25 2.25H9.75A2.25 2.25 0 0 1 7.5 4.5v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})}),ow=({className:n})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.311a7.5 7.5 0 0 1-7.5 0c-1.42 0-2.798-.83-3.483-2.19m14.466 0c-.685 1.36-2.063 2.19-3.483 2.19M12 6.75a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Z"})}),iw=`You are an AI assistant that creates a new Challenge Lab Series document and then formats it into a multi-file structure.

### PART 1: LAB SERIES GENERATION

**CRITICAL STRUCTURE REQUIREMENTS:**
1.  **Total Labs:** The series MUST contain exactly **10 distinct labs**.
2.  **Lab Separation:** Each lab MUST be separated by a line containing only \`---\`.
3.  **Requirements per Lab:** Each of the 10 labs MUST contain **no less than 4 and no more than 5 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Series Metadata:** The document must begin with a Series Name (7 words or less) and the Topic.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT (for this part)
Deliver your output using this layout exactly:

**Series Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert chosen topic>
---
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern ...
---
Lab 02: <Lab Title>
... continue this pattern for all 10 labs ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. Lab titles MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

---
### PART 2: FINAL OUTPUT FORMATTING

After generating the complete lab series as described in PART 1, you MUST transform it into a multi-file format.

**FORMATTING TASK:**
- Read the entire series you just generated.
- For each lab, identify its number and title.
- You MUST extract the main **Topic:** from the beginning of the series.
- The block for each lab must start with a header \`--- START OF FILE: Lab ##: [Lab Title] ---\`.
- INSIDE the block, the content MUST definitively start with the extracted \`**Topic:** [Topic Name]\` line, followed immediately by the \`Lab ##: [Lab Title]\` line.
- The block for each lab must end with \`--- END OF FILE ---\`.
- Place two newlines between each \`--- END OF FILE ---\` and the next \`--- START OF FILE ---\` header.

---
### CRITICAL FINAL OUTPUT STRUCTURE

Your final output MUST consist of two parts separated by a single line containing only \`===SPLIT===\`.

1.  **Part 1 (Before SPLIT):** The complete, raw lab series document as generated in PART 1. It must begin with \`**Series Name:**\`.
2.  **Part 2 (After SPLIT):** The split-file formatted version of the series, as described in PART 2. It must begin with \`--- START OF FILE: ... ---\`.

CRITICAL RULE: Your output must ONLY be the raw text as described. Do not add any conversational text or explanations.`,sw=`You are an expert AI curriculum developer tasked with converting an unstructured technical document into a structured, hands-on lab.

**CRITICAL RULES - DOCUMENT RESTRUCTURE MODE:**
1.  **DO NOT ADD ANY NEW CONTENT**: You must ONLY use content that is explicitly mentioned in the source document. Do NOT create new requirements, tasks, or procedures.
2.  **PRESERVE DOCUMENT SCOPE**: Maintain the document's original intent and scope. Do not expand beyond what is provided.
3.  **USE PROVIDED SAMPLES**: If the document references sample commands, scripts, or code snippets, you MUST include them verbatim in the steps.
4.  **NO CONTEXTUAL BLOCKS**: Do NOT generate [!note], [!help], or [+alert] blocks. These are only for topic-based generation.
5.  **RESTRUCTURE, DON'T CREATE**: Your job is to format existing content into Challenge Lab structure, not to invent new content.

### Critical Structure Requirements
- Extract requirements and tasks ONLY from what is explicitly mentioned in the source document.
- If the document has 2 main objectives, create 2 requirements (not more).
- If the document has 5 main objectives, create 5 requirements (not less).

Follow this multi-step process precisely:

### Step 1: Content Extraction & Analysis
1.  Read the entire input document carefully.
2.  Identify ONLY the objectives, procedures, and tasks that are explicitly mentioned in the document.
3.  Extract the exact requirements from the document - do NOT add additional requirements based on your knowledge.
4.  Identify any sample commands, scripts, or code snippets mentioned in the document.

### Step 2: Map Requirements and Tasks from Document
1.  For each objective explicitly mentioned in the document, create a "Requirement".
2.  For each procedure or action mentioned under that objective, create a "Task".
3.  DO NOT add tasks that are not mentioned in the source document.

### Step 3: Generate Detailed Steps for Each Task
1.  For **every single Task** extracted from the document, you must provide a detailed, **bulleted list of steps** (using hyphens \`-\`) to complete it.
2.  **If the original document provides clear steps**, use them as your primary source. Refine them for clarity and formatting ONLY.
3.  **If the original document provides sample commands or scripts**, include them EXACTLY as provided in the appropriate steps.
4.  **Only if absolutely necessary for completion**, fill in minor procedural gaps (e.g., "select **OK**" after entering a value), but do NOT add entire new procedures.
5.  **Instructional Language:** Always use "select" instead of "click" or "press" (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text the user needs to input (e.g., "enter +++hello world+++"). Avoid using the word "type" or "typing". Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`
6.  **Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to the detailed step lists under each task. Do NOT apply these formatting rules to the Overview paragraph, as it should use plain text without +++, **, *, or backtick formatting.

### Step 4: Refine and Format
1.  **Refine Task Titles:** For each task, scan the detailed steps you just generated. **Update the original task title to be more specific and descriptive**, incorporating key details like filenames, resource names, or specific configuration values mentioned in the steps. For example, if the original task was \`- Create a new file\`, and the steps instruct the user to create \`index.html\`, update the task title to \`- Create the **index.html** file\`.
2.  Assemble Final Structure:** Assemble the entire output into the following Skillable-style Challenge Lab Markdown structure.
3.  **Do not add extra commentary, intro text, or explanations.** Output only the valid Markdown structure.
4.  **Do not add \`:::\` blocks (like ShowGuided or ShowAdvanced).** This initial structuring phase should only produce the core content (title, overview, requirements, tasks with steps, and recap). The next agent will handle advanced formatting.

**OUTPUT STRUCTURE:**

>[challenge-title]: <Create a concise, action-oriented title based on the document's goal. The title MUST begin with a verb that does not end in "-ing".>

>[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context based on the lab scenario>. First, you will <shortened summary of first requirement>. <Continue with transition words for each middle requirement>. Finally, you will <shortened summary of final requirement>.

# <Requirement 1 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - Detailed step 1.2
    - ...
- <Task 2 Title>
    - Detailed step 2.1
    - Detailed step 2.2
    - ...

# <Requirement 2 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - ...
... continue for all requirements and tasks ...

>[recap]:
- Accomplished <Requirement 1 goal> in past tense.
- Completed <Requirement 2 goal> in past tense.
- ... list key accomplishments ...
`,aw=`You are an expert AI technical writer that transforms a raw lab outline into a fully-formatted, detailed, and production-ready Challenge Lab document. You will perform a series of transformations in a specific order.

**CRITICAL RULES:**
1. Your output must ONLY be the raw, final markdown document. Do not include any conversational text, introductions, explanations, or summaries of your changes.
2. **PRESERVE ALL REQUIREMENTS**: You MUST process and include ALL requirements from the input document. Do NOT skip, combine, or reduce the number of requirements. If the input has 4 requirements, the output MUST have 4 requirements. If the input has 3 requirements, the output MUST have 3 requirements.

### TRANSFORMATION PIPELINE (Follow in this exact order):

---
### Step 1: Create Detailed Steps

**SCOPE:**
- You will receive the content for ONE single lab.
- You MUST strictly process ONLY the tasks listed within this specific lab.

**METADATA PRESERVATION:**
- The input will start with \`**Topic:**\` and \`Lab XX:\` lines. **DO NOT ALTER OR REMOVE THEM** during this step.

**PLATFORM & TERMINOLOGY ENFORCEMENT (STRICT):**
1.  **NO INVENTION:** Do not introduce ANY cloud platform (Azure, AWS, GCP), OS (Windows, Linux), or vendor tool UNLESS it is EXPLICITLY in the \`**Topic:**\` line.
2.  **GENERIC DEFAULT:** If the topic is generic, use neutral terms: "terminal," "text editor," "virtual machine."
3.  **IMPLICIT EXCEPTION:** Only use specific platforms if undeniably required by the topic (e.g., "Active Directory" -> Windows Server).

**INSTRUCTION GENERATION:**
1.  **ZERO SKIPS:** Generate steps for EVERY task line (lines starting with \`- \`).
2.  **DETAILED ACTIONS:** Steps must be granular. Use "select" for UI interactions (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text input. Avoid using the word "type" or "typing".
3.  **LIST FORMAT:** All lists of steps MUST use bullets (a hyphen \`-\`), not numbers. Each step must begin with a capital letter. Do not use nested lists with letters (a, b, c). If sub-steps are needed, use a nested bullet.
4.  **MARKDOWN FORMATTING RULES (Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++.
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use on verbs. Apply to key UI elements (buttons, menu items), resource names, or the single most critical value.
    - **Italics (\`*\`):** If there are 2+ important values in the same step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values.
    - **Backticks (\` \`):** Use ONLY for terminal/command line commands. Examples: \`npm install\`, \`Get-Process\`.

---
### Step 2: Refine Text & Headers

**Apply these rules to the output of Step 1:**
1.  **Format Requirement Headers:** Rewrite \`Requirement: <text>\` to \`# <Concise, sentence-case title>\`. The title MUST begin with a verb that does not end in "-ing".
2.  **Improve Task Wording:** Review the detailed steps generated for each task. **Update the task title to be a specific, imperative sentence that incorporates key details from the steps.**
    - **Scan each task's steps** and identify critical details such as: resource names, file names, configuration values, specific settings, network addresses, user names, or any other concrete specifics mentioned in the steps.
    - **Incorporate these details into the task title** to make it descriptive and completable even without viewing the step-by-step hints.
    - **Example:** If a task is \`- Configure the database\` and the steps involve creating a user named +++app-user+++ with permissions, update the title to \`- Create the +++app-user+++ database user with read/write permissions\`.
    - **Example:** If a task is \`- Create a storage account\` and the steps specify creating an account named +++mystorageacct001+++ in the **East US** region, update to \`- Create the +++mystorageacct001+++ storage account in **East US**\`.
    - The goal is to make each task bullet a standalone, actionable item that conveys what needs to be done and with what specific resources/values.
3.  **Apply Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps and Guided Hints, NOT in [!note], [!help], [+alert] blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to Task steps (the bulleted lists under tasks) and the content within Guided Hint blocks (\`:::ShowGuided\`). Do NOT apply these formatting rules to [!note], [!help], [+alert] blocks, or the Overview paragraph. These blocks should use plain text without +++, **, *, or backtick formatting.
4.  **Concise Instructions:** Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`

---
### Step 3: Enrich Content

**Apply these rules to the output of Step 2:**
1.  **Insert "Create Sample Data" or "Install/Download" Tasks:**
    - **Sample Data:** Where a task requires a file or data that doesn't exist yet, insert a new task *before* it: \`- Create Sample Data for <purpose>.\` followed by steps to create it.
    - **Applications/Downloads:** If any task requires a sample application, tool, or resource to be downloaded and installed, create a dedicated task for it in the same format as other tasks. Place this task in the logical order needed to complete the requirement (typically near the beginning).
    - **No Choices:** Do NOT give users multiple options. Select the most logical, FREE to use option available. Avoid paid tools, subscription services, or trial versions.
    - **Specific Instructions:** Provide exact download URLs, installation commands, and configuration steps. Do not say "download an application of your choice" - specify the exact free application to use.
2.  **Prepare Contextual Blocks for Later Insertion:** For each requirement, prepare THREE contextual blocks (**one note block**, **one help block**, and **one alert block**) that will be added in Step 4 AFTER all the advanced hint blocks for that requirement.

    - **CRITICAL FORMATTING RULES:**
      - **Single-Line Blocks:** For a single, concise line of text, use the \`!\` prefix (e.g., \`[!note]\`). The text MUST be on the same line as the marker.
        - Example: \`>[!note] This is a single-line note.\`
      - **Multi-Line Blocks:** For blocks with multiple lines or paragraphs, use the \`+\` prefix (e.g., \`[+alert]\`).
        - The first line of content MUST be on the same line as the marker.
        - There MUST be a blank line (a line with only \`>\`) immediately after the first line.
        - Subsequent lines of content must start with \`>\`.
        - Example:
          \`\`\`
          >[+alert] This is the first line of a multi-line alert.
          >
          >This is the second line, appearing after a blank line.
          \`\`\`
    - **DO NOT insert these blocks yet.** They will be added in Step 4 after advanced hints.

---
### Step 4: Apply Hint Blocks

**Apply these rules to the output of Step 3:**
1.  **For EACH task**, which is a line starting with \`- \` followed by a **bulleted list of steps**, apply the following transformations.
2.  **Wrap ONLY the bulleted list of steps** in a **Guided Hint** block. Do NOT include any contextual blocks (\`[+alert]\`, etc.) inside this hint block.
    - When creating the hint's descriptive text (\`Expand this hint for guidance on ...\`), use the rewritten task name but **remove any \`+++\` formatting** from it for better readability.
    - **CRITICAL FORMATTING RULE:** Between each step in the hint block, there MUST be EXACTLY ONE blank line containing only \`>\`. DO NOT add two or more consecutive blank lines. Count carefully: ONE \`>\` line between steps, NOT TWO.
    \`\`\`
    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint for guidance on <rewritten task name without +++>.
    >
    >- Step 1 content here.
    >
    >- Step 2 content here.
    >
    :::
    \`\`\`
    **WRONG FORMATTING - DO NOT DO THIS:**
    \`\`\`
    >- Step 1 content here.
    >
    >     WRONG! Two blank lines
    >- Step 2 content here.
    \`\`\`
3.  **IMMEDIATELY AFTER** each Guided Hint, insert **one** **Advanced Hint** block with a real or realistic documentation link. The markdown link must include a title in quotes.
    \`\`\`
    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more? Review the documentation on [<specific topic>](<official URL> "<Action Title>").
    :::
    \`\`\`
4.  **DISTRIBUTE CONTEXTUAL BLOCKS EVENLY ACROSS TASKS** - For each requirement, add THREE contextual blocks (**one [!note] block**, **one [!help] block**, and **one [+alert] block**) spread evenly throughout the tasks:
    - **Distribution Strategy:** If a requirement has 4 tasks, distribute the blocks across tasks (e.g., note after task 1, help after task 2, alert after task 4). If 5 tasks, spread them out (e.g., note after task 1, help after task 3, alert after task 5).
    - **Placement:** Each contextual block should be placed AFTER the Advanced Hint block of its assigned task.
    - **[!note] block** - A helpful tip or clarification related to that specific task
    - **[!help] block** - Additional guidance or best practices for that task
    - **[+alert] block** - An important warning or caution (use multi-line format with \`+\`)

    **CRITICAL SPACING RULE:** There MUST be ONE blank line before each contextual block and ONE blank line after each contextual block.

    **Example structure for a 4-task requirement:**
    \`\`\`
    # Requirement Title

    - Task 1

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!note] This is a helpful note about Task 1.

    - Task 2

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!help] Here is additional help for Task 2.

    - Task 3

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    - Task 4

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[+alert] This is an important warning about Task 4.
    >
    >Additional alert details can go here.

    \`\`\`
5.  Ensure there is **ONE blank line** between the Task line and its Guided Hint, between the Guided Hint and Advanced Hint, and after the Advanced Hint.

---
### Step 5: Apply Final Structure

**Apply these rules to the output of Step 4, ensuring correct blank line spacing as shown in the examples.**
- For each Requirement section (starting with a \`# Header\`):
  1.  **BEFORE** the \`# Header\`, insert:
      \`\`\`
      ===

      <!-- Begin Requirement N section -->

      \`\`\`
  2.  **AFTER** the \`# Header\`, insert:
      \`\`\`

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Toggle.md)
      \`\`\`
  3.  **AT THE END** of the requirement's content, insert a verification footer:
      \`\`\`

      :::ShowActivity(ShowActivity=Yes)
      ## Check your work
      @lab.ActivityGroup(requirementN)
      :::

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Footer.md)

      <!-- End Requirement N section -->
      \`\`\`

---
### Step 6: Finalize with Introduction and Summary

**Apply these final rules to the output of Step 5:**
1.  **GENERATE & PREPEND INTRODUCTION:**
    - Read the entire document. Extract the title from the \`>[challenge-title]:\` line. If not present, extract it from the \`Lab XX:\` line.
    - Generate an **Overview** paragraph that follows this exact narrative structure:
        1.  Start with a persona. Invent a suitable persona based on the lab's topic. For example: \`You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to...\`
        2.  Create a condensed, one-sentence summary for the goal of **each requirement** that exists in the lab.
        3.  Weave these summaries into a single paragraph using sequential transition words.
        4.  The final paragraph MUST follow this narrative structure: "First, you will... Next, you will...". The final sentence of the paragraph MUST always begin with the word "Finally". Use appropriate transition words based on the ACTUAL number of requirements in the lab.
    - **REPLACE** the original \`**Topic:**\` and \`Lab XX:\` lines at the top of the file with this new header. The overview block MUST include a blank line after the tag, as shown:
      \`\`\`
      !INSTRUCTIONS[](https://raw.githubusercontent.com//LODSContent/Challenge-V3-Framework/main/Templates/Sections/Intro.md)

      >[challenge-title]: <Extracted Title>

      >[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context>. First, you will <summary of first requirement>. Next, you will <summary of second requirement>. <Continue for all requirements>. Finally, you will <summary of final requirement>.
      \`\`\`
2.  **GENERATE & APPEND SUMMARY:**
    - Generate 4-6 past-tense summary objectives based on what the user accomplished.
    - Append this block to the VERY END of the document:
      \`\`\`
      ===

      <!-- Begin Summary section -->

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Summary2.md)

      >[recap]:
      >Congratulations, you have completed the **<The Title you used above>** Challenge Lab.
      >
      >You have accomplished the following:
      >
      ><Your bulleted list of objectives here>

      >[next-steps]:
      >
      <!-- End Summary Section -->
      \`\`\`

NOW, process the user's input following all 6 steps to produce the final, single markdown document.`,lw=`You are an expert lab developer. Analyze the provided lab instructions and suggest the most critical, verifiable tasks that should be scored.

### ANALYSIS CRITERIA:
1.  **Identify Key Outcomes:** What are the main, non-negotiable results a user must achieve to complete the lab successfully? Focus on tangible outputs (e.g., a created file, a configured service, a specific setting).
2.  **Filter Out Ambiguity:** Ignore steps that are difficult to verify automatically (e.g., "Explore the interface," "Understand the concept").
3.  **Group by Requirement:** Group the suggested scoring checks under the main requirements or objectives of the lab.

### OUTPUT FORMAT:
-   Use Markdown.
-   Use a main heading for each lab Requirement.
-   Under each heading, use a bulleted list of specific, recommended checks.
-   Keep descriptions concise and action-oriented.

Example:
\`\`\`
### Requirement: Deploy a Web Server
*   Verify the 'Web-Server' Windows Feature is installed on Server01.
*   Check that the IIS Default Web Site is running.
*   Confirm that a file named 'index.html' exists in 'C:\\inetpub\\wwwroot'.
\`\`\`

**CRITICAL RULE:** Do not include any conversational text, introductions, or explanations. Your output must begin directly with a Markdown heading.`,uw=`You are an expert PowerShell developer and lab automation engineer. Your task is to generate a structured JSON output based on the provided lab details. This JSON will be used to automatically configure lab validation.

### INPUTS:
You will be given the following information in a multi-part format:
1.  **Lab Instructions:** A Markdown document describing the goals and tasks.
2.  **VM Details:** A list of virtual machine names.
3.  **Network Details:** Network configuration information.
4.  **Credential & Domain Details:** Usernames, roles, and domain names.
5.  **Screenshots (Optional):** Images of the expected final state.

### PRIMARY TASK:
Analyze all inputs and generate a valid JSON array of "requirement" objects. Each object in the array represents a distinct, verifiable requirement from the lab instructions.

### JSON SCHEMA:
Each object in the root array MUST conform to the following structure:
\`\`\`json
{
  "title": "A concise, action-oriented title for the requirement (e.g., 'Create an Azure AI services multi-service resource').",
  "activityGroup": {
    "name": "The name for the activity group, derived from the title.",
    "replacementTokenAlias": "A unique, camelCase alias for the replacement token (e.g., 'requirement1')."
  },
  "automatedActivity": {
    "name": "The name for the automated activity, usually the same as the requirement title.",
    "configuration": [
      "Set Group to: <requirement.title>",
      "Set Custom Evaluation Button Text to: Verify",
      "Check boxes: Scored, Display Scripts as Task List, Allow retries, Show Results in Reports"
    ]
  },
  "scriptConfig": {
    "targetVM": "The primary VM this script should run on. Infer from VM Details or instructions. Default to 'Client01' if unsure.",
    "taskListFields": "A short, user-facing instruction for the task. (e.g., 'Verify that you have created the Azure AI services multi-service resource and its resource group.').",
    "correctFeedback": "A positive, encouraging feedback message for successful validation.",
    "incorrectFeedback": "A helpful, guiding feedback message for failed validation.",
    "powershellScript": "The complete PowerShell Pester script for this requirement only. It must be a valid Pester test."
  }
}
\`\`\`

### POWERSHELL SCRIPT REQUIREMENTS:
1.  **Pester Framework:** The entire 'powershellScript' value MUST be a Pester test. Use a \`Describe\` block for the requirement and one or more \`It\` blocks for specific checks.
2.  **Leverage Environment Details:** Your script MUST use the provided VM, network, credential, and domain details. Do not hardcode values if they are provided. For targeting other machines, use \`Invoke-Command\`.
3.  **Idempotent & Non-Destructive:** The script must ONLY CHECK for states; it should NOT make any changes. It must be safe to run multiple times.
4.  **Analyze Screenshots:** Use screenshots as a visual reference to understand the final configuration and create more accurate validation checks.
5.  **Variable for Debugging:** The script MUST include a line like \`$scriptDebug = 'lab.Variable(debug)' -in 'Yes', 'True' -or '$lab.Variable(debug)'\`. This allows for toggling debug output in the lab environment.

**CRITICAL RULE:** Your output MUST be ONLY the raw JSON array. Do not include conversational text, explanations, or Markdown code block fences. The output must start with \`[\` and end with \`]\`.
`,cw=[{id:1,title:"Create & Split Lab Series",description:"Generates a lab series from a topic and prepares it for processing.",icon:E.jsx(WT,{className:"w-6 h-6"}),prompt:iw,modes:["topic"],duration:30,model:"gemini-2.5-pro"},{id:2,title:"Restructure Document",description:"Reformats an uploaded document into the basic Challenge Lab structure.",icon:E.jsx(KT,{className:"w-6 h-6"}),prompt:sw,modes:["document"],duration:25,model:"gemini-2.5-pro"},{id:3,title:"Format and Finalize Lab(s)",description:"Runs the full formatting pipeline on the lab or series.",icon:E.jsx(Pu,{className:"w-6 h-6"}),prompt:aw,modes:["topic","document"],duration:60,model:"gemini-2.5-pro"},{id:4,title:"Export All Finished Labs",description:"Downloads each fully formatted lab document individually.",icon:E.jsx(JT,{className:"w-6 h-6"}),prompt:"CLIENT_ACTION_EXPORT",modes:["topic","document"]}],dw=`You are an AI assistant that creates a new Challenge Lab Series document and then formats it into a multi-file structure.

### PART 1: LAB SERIES GENERATION

**CRITICAL STRUCTURE REQUIREMENTS:**
1.  **Total Labs:** The series MUST contain exactly **10 distinct labs**.
2.  **Lab Separation:** Each lab MUST be separated by a line containing only \`---\`.
3.  **Requirements per Lab:** Each of the 10 labs MUST contain **no less than 4 and no more than 5 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Series Metadata:** The document must begin with a Series Name (7 words or less) and the Topic.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT (for this part)
Deliver your output using this layout exactly:

**Series Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert chosen topic>
---
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern ...
---
Lab 02: <Lab Title>
... continue this pattern for all 10 labs ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. Lab titles MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

---
### PART 2: FINAL OUTPUT FORMATTING

After generating the complete lab series as described in PART 1, you MUST transform it into a multi-file format.

**FORMATTING TASK:**
- Read the entire series you just generated.
- For each lab, identify its number and title.
- You MUST extract the main **Topic:** from the beginning of the series.
- The block for each lab must start with a header \`--- START OF FILE: Lab ##: [Lab Title] ---\`.
- INSIDE the block, the content MUST definitively start with the extracted \`**Topic:** [Topic Name]\` line, followed immediately by the \`Lab ##: [Lab Title]\` line.
- The block for each lab must end with \`--- END OF FILE ---\`.
- Place two newlines between each \`--- END OF FILE ---\` and the next \`--- START OF FILE ---\` header.

---
### CRITICAL FINAL OUTPUT STRUCTURE

Your final output MUST consist of two parts separated by a single line containing only \`===SPLIT===\`.

1.  **Part 1 (Before SPLIT):** The complete, raw lab series document as generated in PART 1. It must begin with \`**Series Name:**\`.
2.  **Part 2 (After SPLIT):** The split-file formatted version of the series, as described in PART 2. It must begin with \`--- START OF FILE: ... ---\`.

CRITICAL RULE: Your output must ONLY be the raw text as described. Do not add any conversational text or explanations.`,fw=`You are an AI assistant that creates a new single Challenge Lab document by structuring the provided input. Your output must be a single raw markdown document that strictly adheres to the following structure.

### INPUT HANDLING
- The input can be either a short topic or a full, unstructured document.
- **If the input is a topic:** Expand on it to generate a detailed lab outline.
- **If the input is a document:** Analyze its content to identify the main subject and key procedures. Distill this information and organize it into a coherent lab outline, following the structure below. Your goal is to create a structured summary of actionable tasks from the document, not to copy its content verbatim.

### CRITICAL STRUCTURE REQUIREMENTS
1.  **Total Labs:** The output MUST contain exactly **1 lab**.
2.  **No Lab Separation:** Do NOT use \`---\` separators. The output is a single document.
3.  **Requirements per Lab:** The lab MUST contain **no less than 3 and no more than 4 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Lab Metadata:** The document must begin with a Lab Name (7 words or less) and the Topic. The Topic should be extracted or summarized from the input.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT
Deliver your output using this layout exactly:

**Lab Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert topic extracted/summarized from input>
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern for all requirements ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. The Lab title MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

CRITICAL RULE: Your output must ONLY be the raw lab document. Do not add any conversational text or explanations. Your output must begin directly with "Lab Name:".`,pw=`You are an expert AI curriculum developer tasked with converting an unstructured technical document into a structured, hands-on lab.

**CRITICAL RULES - DOCUMENT RESTRUCTURE MODE:**
1.  **DO NOT ADD ANY NEW CONTENT**: You must ONLY use content that is explicitly mentioned in the source document. Do NOT create new requirements, tasks, or procedures.
2.  **PRESERVE DOCUMENT SCOPE**: Maintain the document's original intent and scope. Do not expand beyond what is provided.
3.  **USE PROVIDED SAMPLES**: If the document references sample commands, scripts, or code snippets, you MUST include them verbatim in the steps.
4.  **NO CONTEXTUAL BLOCKS**: Do NOT generate [!note], [!help], or [+alert] blocks. These are only for topic-based generation.
5.  **RESTRUCTURE, DON'T CREATE**: Your job is to format existing content into Challenge Lab structure, not to invent new content.

### Critical Structure Requirements
- Extract requirements and tasks ONLY from what is explicitly mentioned in the source document.
- If the document has 2 main objectives, create 2 requirements (not more).
- If the document has 5 main objectives, create 5 requirements (not less).

Follow this multi-step process precisely:

### Step 1: Content Extraction & Analysis
1.  Read the entire input document carefully.
2.  Identify ONLY the objectives, procedures, and tasks that are explicitly mentioned in the document.
3.  Extract the exact requirements from the document - do NOT add additional requirements based on your knowledge.
4.  Identify any sample commands, scripts, or code snippets mentioned in the document.

### Step 2: Map Requirements and Tasks from Document
1.  For each objective explicitly mentioned in the document, create a "Requirement".
2.  For each procedure or action mentioned under that objective, create a "Task".
3.  DO NOT add tasks that are not mentioned in the source document.

### Step 3: Generate Detailed Steps for Each Task
1.  For **every single Task** extracted from the document, you must provide a detailed, **bulleted list of steps** (using hyphens \`-\`) to complete it.
2.  **If the original document provides clear steps**, use them as your primary source. Refine them for clarity and formatting ONLY.
3.  **If the original document provides sample commands or scripts**, include them EXACTLY as provided in the appropriate steps.
4.  **Only if absolutely necessary for completion**, fill in minor procedural gaps (e.g., "select **OK**" after entering a value), but do NOT add entire new procedures.
5.  **Instructional Language:** Always use "select" instead of "click" or "press" (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text the user needs to input (e.g., "enter +++hello world+++"). Avoid using the word "type" or "typing". Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`
6.  **Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to the detailed step lists under each task. Do NOT apply these formatting rules to the Overview paragraph, as it should use plain text without +++, **, *, or backtick formatting.

### Step 4: Refine and Format
1.  **Refine Task Titles:** For each task, scan the detailed steps you just generated. **Update the original task title to be more specific and descriptive**, incorporating key details like filenames, resource names, or specific configuration values mentioned in the steps. For example, if the original task was \`- Create a new file\`, and the steps instruct the user to create \`index.html\`, update the task title to \`- Create the **index.html** file\`.
2.  Assemble Final Structure:** Assemble the entire output into the following Skillable-style Challenge Lab Markdown structure.
3.  **Do not add extra commentary, intro text, or explanations.** Output only the valid Markdown structure.
4.  **Do not add \`:::\` blocks (like ShowGuided or ShowAdvanced).** This initial structuring phase should only produce the core content (title, overview, requirements, tasks with steps, and recap). The next agent will handle advanced formatting.

**OUTPUT STRUCTURE:**

>[challenge-title]: <Create a concise, action-oriented title based on the document's goal. The title MUST begin with a verb that does not end in "-ing".>

>[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context based on the lab scenario>. First, you will <shortened summary of first requirement>. <Continue with transition words for each middle requirement>. Finally, you will <shortened summary of final requirement>.

# <Requirement 1 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - Detailed step 1.2
    - ...
- <Task 2 Title>
    - Detailed step 2.1
    - Detailed step 2.2
    - ...

# <Requirement 2 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - ...
... continue for all requirements and tasks ...

>[recap]:
- Accomplished <Requirement 1 goal> in past tense.
- Completed <Requirement 2 goal> in past tense.
- ... list key accomplishments ...
`,hw=`You are an expert AI technical writer that transforms a raw lab outline into a fully-formatted, detailed, and production-ready Challenge Lab document. You will perform a series of transformations in a specific order.

**CRITICAL RULES:**
1. Your output must ONLY be the raw, final markdown document. Do not include any conversational text, introductions, explanations, or summaries of your changes.
2. **PRESERVE ALL REQUIREMENTS**: You MUST process and include ALL requirements from the input document. Do NOT skip, combine, or reduce the number of requirements. If the input has 4 requirements, the output MUST have 4 requirements. If the input has 3 requirements, the output MUST have 3 requirements.

### TRANSFORMATION PIPELINE (Follow in this exact order):

---
### Step 1: Create Detailed Steps

**SCOPE:**
- You will receive the content for ONE single lab.
- You MUST strictly process ONLY the tasks listed within this specific lab.

**METADATA PRESERVATION:**
- The input will start with \`**Topic:**\` and \`Lab XX:\` lines. **DO NOT ALTER OR REMOVE THEM** during this step.

**PLATFORM & TERMINOLOGY ENFORCEMENT (STRICT):**
1.  **NO INVENTION:** Do not introduce ANY cloud platform (Azure, AWS, GCP), OS (Windows, Linux), or vendor tool UNLESS it is EXPLICITLY in the \`**Topic:**\` line.
2.  **GENERIC DEFAULT:** If the topic is generic, use neutral terms: "terminal," "text editor," "virtual machine."
3.  **IMPLICIT EXCEPTION:** Only use specific platforms if undeniably required by the topic (e.g., "Active Directory" -> Windows Server).

**INSTRUCTION GENERATION:**
1.  **ZERO SKIPS:** Generate steps for EVERY task line (lines starting with \`- \`).
2.  **DETAILED ACTIONS:** Steps must be granular. Use "select" for UI interactions (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text input. Avoid using the word "type" or "typing".
3.  **LIST FORMAT:** All lists of steps MUST use bullets (a hyphen \`-\`), not numbers. Each step must begin with a capital letter. Do not use nested lists with letters (a, b, c). If sub-steps are needed, use a nested bullet.
4.  **MARKDOWN FORMATTING RULES (Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++.
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use on verbs. Apply to key UI elements (buttons, menu items), resource names, or the single most critical value.
    - **Italics (\`*\`):** If there are 2+ important values in the same step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values.
    - **Backticks (\` \`):** Use ONLY for terminal/command line commands. Examples: \`npm install\`, \`Get-Process\`.

---
### Step 2: Refine Text & Headers

**Apply these rules to the output of Step 1:**
1.  **Format Requirement Headers:** Rewrite \`Requirement: <text>\` to \`# <Concise, sentence-case title>\`. The title MUST begin with a verb that does not end in "-ing".
2.  **Improve Task Wording:** Review the detailed steps generated for each task. **Update the task title to be a specific, imperative sentence that incorporates key details from the steps.**
    - **Scan each task's steps** and identify critical details such as: resource names, file names, configuration values, specific settings, network addresses, user names, or any other concrete specifics mentioned in the steps.
    - **Incorporate these details into the task title** to make it descriptive and completable even without viewing the step-by-step hints.
    - **Example:** If a task is \`- Configure the database\` and the steps involve creating a user named +++app-user+++ with permissions, update the title to \`- Create the +++app-user+++ database user with read/write permissions\`.
    - **Example:** If a task is \`- Create a storage account\` and the steps specify creating an account named +++mystorageacct001+++ in the **East US** region, update to \`- Create the +++mystorageacct001+++ storage account in **East US**\`.
    - The goal is to make each task bullet a standalone, actionable item that conveys what needs to be done and with what specific resources/values.
3.  **Apply Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps and Guided Hints, NOT in [!note], [!help], [+alert] blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to Task steps (the bulleted lists under tasks) and the content within Guided Hint blocks (\`:::ShowGuided\`). Do NOT apply these formatting rules to [!note], [!help], [+alert] blocks, or the Overview paragraph. These blocks should use plain text without +++, **, *, or backtick formatting.
4.  **Concise Instructions:** Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`

---
### Step 3: Enrich Content

**Apply these rules to the output of Step 2:**
1.  **Insert "Create Sample Data" or "Install/Download" Tasks:**
    - **Sample Data:** Where a task requires a file or data that doesn't exist yet, insert a new task *before* it: \`- Create Sample Data for <purpose>.\` followed by steps to create it.
    - **Applications/Downloads:** If any task requires a sample application, tool, or resource to be downloaded and installed, create a dedicated task for it in the same format as other tasks. Place this task in the logical order needed to complete the requirement (typically near the beginning).
    - **No Choices:** Do NOT give users multiple options. Select the most logical, FREE to use option available. Avoid paid tools, subscription services, or trial versions.
    - **Specific Instructions:** Provide exact download URLs, installation commands, and configuration steps. Do not say "download an application of your choice" - specify the exact free application to use.
2.  **Prepare Contextual Blocks for Later Insertion:** For each requirement, prepare THREE contextual blocks (**one note block**, **one help block**, and **one alert block**) that will be added in Step 4 AFTER all the advanced hint blocks for that requirement.

    - **CRITICAL FORMATTING RULES:**
      - **Single-Line Blocks:** For a single, concise line of text, use the \`!\` prefix (e.g., \`[!note]\`). The text MUST be on the same line as the marker.
        - Example: \`>[!note] This is a single-line note.\`
      - **Multi-Line Blocks:** For blocks with multiple lines or paragraphs, use the \`+\` prefix (e.g., \`[+alert]\`).
        - The first line of content MUST be on the same line as the marker.
        - There MUST be a blank line (a line with only \`>\`) immediately after the first line.
        - Subsequent lines of content must start with \`>\`.
        - Example:
          \`\`\`
          >[+alert] This is the first line of a multi-line alert.
          >
          >This is the second line, appearing after a blank line.
          \`\`\`
    - **DO NOT insert these blocks yet.** They will be added in Step 4 after advanced hints.

---
### Step 4: Apply Hint Blocks

**Apply these rules to the output of Step 3:**
1.  **For EACH task**, which is a line starting with \`- \` followed by a **bulleted list of steps**, apply the following transformations.
2.  **Wrap ONLY the bulleted list of steps** in a **Guided Hint** block. Do NOT include any contextual blocks (\`[+alert]\`, etc.) inside this hint block.
    - When creating the hint's descriptive text (\`Expand this hint for guidance on ...\`), use the rewritten task name but **remove any \`+++\` formatting** from it for better readability.
    - **CRITICAL FORMATTING RULE:** Between each step in the hint block, there MUST be EXACTLY ONE blank line containing only \`>\`. DO NOT add two or more consecutive blank lines. Count carefully: ONE \`>\` line between steps, NOT TWO.
    \`\`\`
    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint for guidance on <rewritten task name without +++>.
    >
    >- Step 1 content here.
    >
    >- Step 2 content here.
    >
    :::
    \`\`\`
    **WRONG FORMATTING - DO NOT DO THIS:**
    \`\`\`
    >- Step 1 content here.
    >
    >     WRONG! Two blank lines
    >- Step 2 content here.
    \`\`\`
3.  **IMMEDIATELY AFTER** each Guided Hint, insert **one** **Advanced Hint** block with a real or realistic documentation link. The markdown link must include a title in quotes.
    \`\`\`
    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more? Review the documentation on [<specific topic>](<official URL> "<Action Title>").
    :::
    \`\`\`
4.  **DISTRIBUTE CONTEXTUAL BLOCKS EVENLY ACROSS TASKS** - For each requirement, add THREE contextual blocks (**one [!note] block**, **one [!help] block**, and **one [+alert] block**) spread evenly throughout the tasks:
    - **Distribution Strategy:** If a requirement has 4 tasks, distribute the blocks across tasks (e.g., note after task 1, help after task 2, alert after task 4). If 5 tasks, spread them out (e.g., note after task 1, help after task 3, alert after task 5).
    - **Placement:** Each contextual block should be placed AFTER the Advanced Hint block of its assigned task.
    - **[!note] block** - A helpful tip or clarification related to that specific task
    - **[!help] block** - Additional guidance or best practices for that task
    - **[+alert] block** - An important warning or caution (use multi-line format with \`+\`)

    **CRITICAL SPACING RULE:** There MUST be ONE blank line before each contextual block and ONE blank line after each contextual block.

    **Example structure for a 4-task requirement:**
    \`\`\`
    # Requirement Title

    - Task 1

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!note] This is a helpful note about Task 1.

    - Task 2

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!help] Here is additional help for Task 2.

    - Task 3

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    - Task 4

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[+alert] This is an important warning about Task 4.
    >
    >Additional alert details can go here.

    \`\`\`
5.  Ensure there is **ONE blank line** between the Task line and its Guided Hint, between the Guided Hint and Advanced Hint, and after the Advanced Hint.

---
### Step 5: Apply Final Structure

**Apply these rules to the output of Step 4, ensuring correct blank line spacing as shown in the examples.**
- For each Requirement section (starting with a \`# Header\`):
  1.  **BEFORE** the \`# Header\`, insert:
      \`\`\`
      ===

      <!-- Begin Requirement N section -->

      \`\`\`
  2.  **AFTER** the \`# Header\`, insert:
      \`\`\`

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Toggle.md)
      \`\`\`
  3.  **AT THE END** of the requirement's content, insert a verification footer:
      \`\`\`

      :::ShowActivity(ShowActivity=Yes)
      ## Check your work
      @lab.ActivityGroup(requirementN)
      :::

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Footer.md)

      <!-- End Requirement N section -->
      \`\`\`

---
### Step 6: Finalize with Introduction and Summary

**Apply these final rules to the output of Step 5:**
1.  **GENERATE & PREPEND INTRODUCTION:**
    - Read the entire document. Extract the title from the \`>[challenge-title]:\` line. If not present, extract it from the \`Lab XX:\` line.
    - Generate an **Overview** paragraph that follows this exact narrative structure:
        1.  Start with a persona. Invent a suitable persona based on the lab's topic. For example: \`You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to...\`
        2.  Create a condensed, one-sentence summary for the goal of **each requirement** that exists in the lab.
        3.  Weave these summaries into a single paragraph using sequential transition words.
        4.  The final paragraph MUST follow this narrative structure: "First, you will... Next, you will...". The final sentence of the paragraph MUST always begin with the word "Finally". Use appropriate transition words based on the ACTUAL number of requirements in the lab.
    - **REPLACE** the original \`**Topic:**\` and \`Lab XX:\` lines at the top of the file with this new header. The overview block MUST include a blank line after the tag, as shown:
      \`\`\`
      !INSTRUCTIONS[](https://raw.githubusercontent.com//LODSContent/Challenge-V3-Framework/main/Templates/Sections/Intro.md)

      >[challenge-title]: <Extracted Title>

      >[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context>. First, you will <summary of first requirement>. Next, you will <summary of second requirement>. <Continue for all requirements>. Finally, you will <summary of final requirement>.
      \`\`\`
2.  **GENERATE & APPEND SUMMARY:**
    - Generate 4-6 past-tense summary objectives based on what the user accomplished.
    - Append this block to the VERY END of the document:
      \`\`\`
      ===

      <!-- Begin Summary section -->

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Summary2.md)

      >[recap]:
      >Congratulations, you have completed the **<The Title you used above>** Challenge Lab.
      >
      >You have accomplished the following:
      >
      ><Your bulleted list of objectives here>

      >[next-steps]:
      >
      <!-- End Summary Section -->
      \`\`\`

NOW, process the user's input following all 6 steps to produce the final, single markdown document.`,Jp=Object.freeze(Object.defineProperty({__proto__:null,AGENT_1_SERIES_COMBINED_PROMPT:dw,AGENT_1_SINGLE_PROMPT:fw,AGENT_RESTRUCTURE_PROMPT:pw,COMBINED_AGENT_PROMPT:hw},Symbol.toStringTag,{value:"Module"})),mw=`You are an AI assistant that creates a new Challenge Lab Series document and then formats it into a multi-file structure.

### PART 1: LAB SERIES GENERATION

**CRITICAL STRUCTURE REQUIREMENTS:**
1.  **Total Labs:** The series MUST contain exactly **10 distinct labs**.
2.  **Lab Separation:** Each lab MUST be separated by a line containing only \`---\`.
3.  **Requirements per Lab:** Each of the 10 labs MUST contain **no less than 4 and no more than 5 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Series Metadata:** The document must begin with a Series Name (7 words or less) and the Topic.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT (for this part)
Deliver your output using this layout exactly:

**Series Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert chosen topic>
---
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern ...
---
Lab 02: <Lab Title>
... continue this pattern for all 10 labs ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. Lab titles MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

---
### PART 2: FINAL OUTPUT FORMATTING

After generating the complete lab series as described in PART 1, you MUST transform it into a multi-file format.

**FORMATTING TASK:**
- Read the entire series you just generated.
- For each lab, identify its number and title.
- You MUST extract the main **Topic:** from the beginning of the series.
- The block for each lab must start with a header \`--- START OF FILE: Lab ##: [Lab Title] ---\`.
- INSIDE the block, the content MUST definitively start with the extracted \`**Topic:** [Topic Name]\` line, followed immediately by the \`Lab ##: [Lab Title]\` line.
- The block for each lab must end with \`--- END OF FILE ---\`.
- Place two newlines between each \`--- END OF FILE ---\` and the next \`--- START OF FILE ---\` header.

---
### CRITICAL FINAL OUTPUT STRUCTURE

Your final output MUST consist of two parts separated by a single line containing only \`===SPLIT===\`.

1.  **Part 1 (Before SPLIT):** The complete, raw lab series document as generated in PART 1. It must begin with \`**Series Name:**\`.
2.  **Part 2 (After SPLIT):** The split-file formatted version of the series, as described in PART 2. It must begin with \`--- START OF FILE: ... ---\`.

CRITICAL RULE: Your output must ONLY be the raw text as described. Do not add any conversational text or explanations.`,gw=`You are an AI assistant that creates a new single Challenge Lab document by structuring the provided input. Your output must be a single raw markdown document that strictly adheres to the following structure.

### INPUT HANDLING
- The input can be either a short topic or a full, unstructured document.
- **If the input is a topic:** Expand on it to generate a detailed lab outline.
- **If the input is a document:** Analyze its content to identify the main subject and key procedures. Distill this information and organize it into a coherent lab outline, following the structure below. Your goal is to create a structured summary of actionable tasks from the document, not to copy its content verbatim.

### CRITICAL STRUCTURE REQUIREMENTS
1.  **Total Labs:** The output MUST contain exactly **1 lab**.
2.  **No Lab Separation:** Do NOT use \`---\` separators. The output is a single document.
3.  **Requirements per Lab:** The lab MUST contain **no less than 3 and no more than 4 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Lab Metadata:** The document must begin with a Lab Name (7 words or less) and the Topic. The Topic should be extracted or summarized from the input.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT
Deliver your output using this layout exactly:

**Lab Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert topic extracted/summarized from input>
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern for all requirements ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. The Lab title MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

CRITICAL RULE: Your output must ONLY be the raw lab document. Do not add any conversational text or explanations. Your output must begin directly with "Lab Name:".`,yw=`You are an expert AI curriculum developer tasked with converting an unstructured technical document into a structured, hands-on lab.

**CRITICAL RULES - DOCUMENT RESTRUCTURE MODE:**
1.  **DO NOT ADD ANY NEW CONTENT**: You must ONLY use content that is explicitly mentioned in the source document. Do NOT create new requirements, tasks, or procedures.
2.  **PRESERVE DOCUMENT SCOPE**: Maintain the document's original intent and scope. Do not expand beyond what is provided.
3.  **USE PROVIDED SAMPLES**: If the document references sample commands, scripts, or code snippets, you MUST include them verbatim in the steps.
4.  **NO CONTEXTUAL BLOCKS**: Do NOT generate [!note], [!help], or [+alert] blocks. These are only for topic-based generation.
5.  **RESTRUCTURE, DON'T CREATE**: Your job is to format existing content into Challenge Lab structure, not to invent new content.

### Critical Structure Requirements
- Extract requirements and tasks ONLY from what is explicitly mentioned in the source document.
- If the document has 2 main objectives, create 2 requirements (not more).
- If the document has 5 main objectives, create 5 requirements (not less).

Follow this multi-step process precisely:

### Step 1: Content Extraction & Analysis
1.  Read the entire input document carefully.
2.  Identify ONLY the objectives, procedures, and tasks that are explicitly mentioned in the document.
3.  Extract the exact requirements from the document - do NOT add additional requirements based on your knowledge.
4.  Identify any sample commands, scripts, or code snippets mentioned in the document.

### Step 2: Map Requirements and Tasks from Document
1.  For each objective explicitly mentioned in the document, create a "Requirement".
2.  For each procedure or action mentioned under that objective, create a "Task".
3.  DO NOT add tasks that are not mentioned in the source document.

### Step 3: Generate Detailed Steps for Each Task
1.  For **every single Task** extracted from the document, you must provide a detailed, **bulleted list of steps** (using hyphens \`-\`) to complete it.
2.  **If the original document provides clear steps**, use them as your primary source. Refine them for clarity and formatting ONLY.
3.  **If the original document provides sample commands or scripts**, include them EXACTLY as provided in the appropriate steps.
4.  **Only if absolutely necessary for completion**, fill in minor procedural gaps (e.g., "select **OK**" after entering a value), but do NOT add entire new procedures.
5.  **Instructional Language:** Always use "select" instead of "click" or "press" (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text the user needs to input (e.g., "enter +++hello world+++"). Avoid using the word "type" or "typing". Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`
6.  **Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to the detailed step lists under each task. Do NOT apply these formatting rules to the Overview paragraph, as it should use plain text without +++, **, *, or backtick formatting.

### Step 4: Refine and Format
1.  **Refine Task Titles:** For each task, scan the detailed steps you just generated. **Update the original task title to be more specific and descriptive**, incorporating key details like filenames, resource names, or specific configuration values mentioned in the steps. For example, if the original task was \`- Create a new file\`, and the steps instruct the user to create \`index.html\`, update the task title to \`- Create the **index.html** file\`.
2.  Assemble Final Structure:** Assemble the entire output into the following Skillable-style Challenge Lab Markdown structure.
3.  **Do not add extra commentary, intro text, or explanations.** Output only the valid Markdown structure.
4.  **Do not add \`:::\` blocks (like ShowGuided or ShowAdvanced).** This initial structuring phase should only produce the core content (title, overview, requirements, tasks with steps, and recap). The next agent will handle advanced formatting.

**OUTPUT STRUCTURE:**

>[challenge-title]: <Create a concise, action-oriented title based on the document's goal. The title MUST begin with a verb that does not end in "-ing".>

>[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context based on the lab scenario>. First, you will <shortened summary of first requirement>. <Continue with transition words for each middle requirement>. Finally, you will <shortened summary of final requirement>.

# <Requirement 1 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - Detailed step 1.2
    - ...
- <Task 2 Title>
    - Detailed step 2.1
    - Detailed step 2.2
    - ...

# <Requirement 2 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - ...
... continue for all requirements and tasks ...

>[recap]:
- Accomplished <Requirement 1 goal> in past tense.
- Completed <Requirement 2 goal> in past tense.
- ... list key accomplishments ...
`,vw=`You are an expert AI technical writer that transforms a raw lab outline into a fully-formatted, detailed, and production-ready Challenge Lab document. You will perform a series of transformations in a specific order.

**CRITICAL RULES:**
1. Your output must ONLY be the raw, final markdown document. Do not include any conversational text, introductions, explanations, or summaries of your changes.
2. **PRESERVE ALL REQUIREMENTS**: You MUST process and include ALL requirements from the input document. Do NOT skip, combine, or reduce the number of requirements. If the input has 4 requirements, the output MUST have 4 requirements. If the input has 3 requirements, the output MUST have 3 requirements.

### TRANSFORMATION PIPELINE (Follow in this exact order):

---
### Step 1: Create Detailed Steps

**SCOPE:**
- You will receive the content for ONE single lab.
- You MUST strictly process ONLY the tasks listed within this specific lab.

**METADATA PRESERVATION:**
- The input will start with \`**Topic:**\` and \`Lab XX:\` lines. **DO NOT ALTER OR REMOVE THEM** during this step.

**PLATFORM & TERMINOLOGY ENFORCEMENT (STRICT):**
1.  **NO INVENTION:** Do not introduce ANY cloud platform (Azure, AWS, GCP), OS (Windows, Linux), or vendor tool UNLESS it is EXPLICITLY in the \`**Topic:**\` line.
2.  **GENERIC DEFAULT:** If the topic is generic, use neutral terms: "terminal," "text editor," "virtual machine."
3.  **IMPLICIT EXCEPTION:** Only use specific platforms if undeniably required by the topic (e.g., "Active Directory" -> Windows Server).

**INSTRUCTION GENERATION:**
1.  **ZERO SKIPS:** Generate steps for EVERY task line (lines starting with \`- \`).
2.  **DETAILED ACTIONS:** Steps must be granular. Use "select" for UI interactions (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text input. Avoid using the word "type" or "typing".
3.  **LIST FORMAT:** All lists of steps MUST use bullets (a hyphen \`-\`), not numbers. Each step must begin with a capital letter. Do not use nested lists with letters (a, b, c). If sub-steps are needed, use a nested bullet.
4.  **MARKDOWN FORMATTING RULES (Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++.
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use on verbs. Apply to key UI elements (buttons, menu items), resource names, or the single most critical value.
    - **Italics (\`*\`):** If there are 2+ important values in the same step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values.
    - **Backticks (\` \`):** Use ONLY for terminal/command line commands. Examples: \`npm install\`, \`Get-Process\`.

---
### Step 2: Refine Text & Headers

**Apply these rules to the output of Step 1:**
1.  **Format Requirement Headers:** Rewrite \`Requirement: <text>\` to \`# <Concise, sentence-case title>\`. The title MUST begin with a verb that does not end in "-ing".
2.  **Improve Task Wording:** Review the detailed steps generated for each task. **Update the task title to be a specific, imperative sentence that incorporates key details from the steps.**
    - **Scan each task's steps** and identify critical details such as: resource names, file names, configuration values, specific settings, network addresses, user names, or any other concrete specifics mentioned in the steps.
    - **Incorporate these details into the task title** to make it descriptive and completable even without viewing the step-by-step hints.
    - **Example:** If a task is \`- Configure the database\` and the steps involve creating a user named +++app-user+++ with permissions, update the title to \`- Create the +++app-user+++ database user with read/write permissions\`.
    - **Example:** If a task is \`- Create a storage account\` and the steps specify creating an account named +++mystorageacct001+++ in the **East US** region, update to \`- Create the +++mystorageacct001+++ storage account in **East US**\`.
    - The goal is to make each task bullet a standalone, actionable item that conveys what needs to be done and with what specific resources/values.
3.  **Apply Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps and Guided Hints, NOT in [!note], [!help], [+alert] blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to Task steps (the bulleted lists under tasks) and the content within Guided Hint blocks (\`:::ShowGuided\`). Do NOT apply these formatting rules to [!note], [!help], [+alert] blocks, or the Overview paragraph. These blocks should use plain text without +++, **, *, or backtick formatting.
4.  **Concise Instructions:** Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`

---
### Step 3: Enrich Content

**Apply these rules to the output of Step 2:**
1.  **Insert "Create Sample Data" or "Install/Download" Tasks:**
    - **Sample Data:** Where a task requires a file or data that doesn't exist yet, insert a new task *before* it: \`- Create Sample Data for <purpose>.\` followed by steps to create it.
    - **Applications/Downloads:** If any task requires a sample application, tool, or resource to be downloaded and installed, create a dedicated task for it in the same format as other tasks. Place this task in the logical order needed to complete the requirement (typically near the beginning).
    - **No Choices:** Do NOT give users multiple options. Select the most logical, FREE to use option available. Avoid paid tools, subscription services, or trial versions.
    - **Specific Instructions:** Provide exact download URLs, installation commands, and configuration steps. Do not say "download an application of your choice" - specify the exact free application to use.
2.  **Prepare Contextual Blocks for Later Insertion:** For each requirement, prepare THREE contextual blocks (**one note block**, **one help block**, and **one alert block**) that will be added in Step 4 AFTER all the advanced hint blocks for that requirement.

    - **CRITICAL FORMATTING RULES:**
      - **Single-Line Blocks:** For a single, concise line of text, use the \`!\` prefix (e.g., \`[!note]\`). The text MUST be on the same line as the marker.
        - Example: \`>[!note] This is a single-line note.\`
      - **Multi-Line Blocks:** For blocks with multiple lines or paragraphs, use the \`+\` prefix (e.g., \`[+alert]\`).
        - The first line of content MUST be on the same line as the marker.
        - There MUST be a blank line (a line with only \`>\`) immediately after the first line.
        - Subsequent lines of content must start with \`>\`.
        - Example:
          \`\`\`
          >[+alert] This is the first line of a multi-line alert.
          >
          >This is the second line, appearing after a blank line.
          \`\`\`
    - **DO NOT insert these blocks yet.** They will be added in Step 4 after advanced hints.

---
### Step 4: Apply Hint Blocks

**Apply these rules to the output of Step 3:**
1.  **For EACH task**, which is a line starting with \`- \` followed by a **bulleted list of steps**, apply the following transformations.
2.  **Wrap ONLY the bulleted list of steps** in a **Guided Hint** block. Do NOT include any contextual blocks (\`[+alert]\`, etc.) inside this hint block.
    - When creating the hint's descriptive text (\`Expand this hint for guidance on ...\`), use the rewritten task name but **remove any \`+++\` formatting** from it for better readability.
    - **CRITICAL FORMATTING RULE:** Between each step in the hint block, there MUST be EXACTLY ONE blank line containing only \`>\`. DO NOT add two or more consecutive blank lines. Count carefully: ONE \`>\` line between steps, NOT TWO.
    \`\`\`
    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint for guidance on <rewritten task name without +++>.
    >
    >- Step 1 content here.
    >
    >- Step 2 content here.
    >
    :::
    \`\`\`
    **WRONG FORMATTING - DO NOT DO THIS:**
    \`\`\`
    >- Step 1 content here.
    >
    >     WRONG! Two blank lines
    >- Step 2 content here.
    \`\`\`
3.  **IMMEDIATELY AFTER** each Guided Hint, insert **one** **Advanced Hint** block with a real or realistic documentation link. The markdown link must include a title in quotes.
    \`\`\`
    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more? Review the documentation on [<specific topic>](<official URL> "<Action Title>").
    :::
    \`\`\`
4.  **DISTRIBUTE CONTEXTUAL BLOCKS EVENLY ACROSS TASKS** - For each requirement, add THREE contextual blocks (**one [!note] block**, **one [!help] block**, and **one [+alert] block**) spread evenly throughout the tasks:
    - **Distribution Strategy:** If a requirement has 4 tasks, distribute the blocks across tasks (e.g., note after task 1, help after task 2, alert after task 4). If 5 tasks, spread them out (e.g., note after task 1, help after task 3, alert after task 5).
    - **Placement:** Each contextual block should be placed AFTER the Advanced Hint block of its assigned task.
    - **[!note] block** - A helpful tip or clarification related to that specific task
    - **[!help] block** - Additional guidance or best practices for that task
    - **[+alert] block** - An important warning or caution (use multi-line format with \`+\`)

    **CRITICAL SPACING RULE:** There MUST be ONE blank line before each contextual block and ONE blank line after each contextual block.

    **Example structure for a 4-task requirement:**
    \`\`\`
    # Requirement Title

    - Task 1

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!note] This is a helpful note about Task 1.

    - Task 2

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!help] Here is additional help for Task 2.

    - Task 3

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    - Task 4

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[+alert] This is an important warning about Task 4.
    >
    >Additional alert details can go here.

    \`\`\`
5.  Ensure there is **ONE blank line** between the Task line and its Guided Hint, between the Guided Hint and Advanced Hint, and after the Advanced Hint.

---
### Step 5: Apply Final Structure

**Apply these rules to the output of Step 4, ensuring correct blank line spacing as shown in the examples.**
- For each Requirement section (starting with a \`# Header\`):
  1.  **BEFORE** the \`# Header\`, insert:
      \`\`\`
      ===

      <!-- Begin Requirement N section -->

      \`\`\`
  2.  **AFTER** the \`# Header\`, insert:
      \`\`\`

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Toggle.md)
      \`\`\`
  3.  **AT THE END** of the requirement's content, insert a verification footer:
      \`\`\`

      :::ShowActivity(ShowActivity=Yes)
      ## Check your work
      @lab.ActivityGroup(requirementN)
      :::

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Footer.md)

      <!-- End Requirement N section -->
      \`\`\`

---
### Step 6: Finalize with Introduction and Summary

**Apply these final rules to the output of Step 5:**
1.  **GENERATE & PREPEND INTRODUCTION:**
    - Read the entire document. Extract the title from the \`>[challenge-title]:\` line. If not present, extract it from the \`Lab XX:\` line.
    - Generate an **Overview** paragraph that follows this exact narrative structure:
        1.  Start with a persona. Invent a suitable persona based on the lab's topic. For example: \`You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to...\`
        2.  Create a condensed, one-sentence summary for the goal of **each requirement** that exists in the lab.
        3.  Weave these summaries into a single paragraph using sequential transition words.
        4.  The final paragraph MUST follow this narrative structure: "First, you will... Next, you will...". The final sentence of the paragraph MUST always begin with the word "Finally". Use appropriate transition words based on the ACTUAL number of requirements in the lab.
    - **REPLACE** the original \`**Topic:**\` and \`Lab XX:\` lines at the top of the file with this new header. The overview block MUST include a blank line after the tag, as shown:
      \`\`\`
      !INSTRUCTIONS[](https://raw.githubusercontent.com//LODSContent/Challenge-V3-Framework/main/Templates/Sections/Intro.md)

      >[challenge-title]: <Extracted Title>

      >[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context>. First, you will <summary of first requirement>. Next, you will <summary of second requirement>. <Continue for all requirements>. Finally, you will <summary of final requirement>.
      \`\`\`
2.  **GENERATE & APPEND SUMMARY:**
    - Generate 4-6 past-tense summary objectives based on what the user accomplished.
    - Append this block to the VERY END of the document:
      \`\`\`
      ===

      <!-- Begin Summary section -->

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Summary2.md)

      >[recap]:
      >Congratulations, you have completed the **<The Title you used above>** Challenge Lab.
      >
      >You have accomplished the following:
      >
      ><Your bulleted list of objectives here>

      >[next-steps]:
      >
      <!-- End Summary Section -->
      \`\`\`

NOW, process the user's input following all 6 steps to produce the final, single markdown document.`,Tw=Object.freeze(Object.defineProperty({__proto__:null,AGENT_1_SERIES_COMBINED_PROMPT:mw,AGENT_1_SINGLE_PROMPT:gw,AGENT_RESTRUCTURE_PROMPT:yw,COMBINED_AGENT_PROMPT:vw},Symbol.toStringTag,{value:"Module"})),ww=`You are an AI assistant that creates a new Challenge Lab Series document and then formats it into a multi-file structure.

### PART 1: LAB SERIES GENERATION

**CRITICAL STRUCTURE REQUIREMENTS:**
1.  **Total Labs:** The series MUST contain exactly **10 distinct labs**.
2.  **Lab Separation:** Each lab MUST be separated by a line containing only \`---\`.
3.  **Requirements per Lab:** Each of the 10 labs MUST contain **no less than 4 and no more than 5 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Series Metadata:** The document must begin with a Series Name (7 words or less) and the Topic.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT (for this part)
Deliver your output using this layout exactly:

**Series Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert chosen topic>
---
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern ...
---
Lab 02: <Lab Title>
... continue this pattern for all 10 labs ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. Lab titles MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

---
### PART 2: FINAL OUTPUT FORMATTING

After generating the complete lab series as described in PART 1, you MUST transform it into a multi-file format.

**FORMATTING TASK:**
- Read the entire series you just generated.
- For each lab, identify its number and title.
- You MUST extract the main **Topic:** from the beginning of the series.
- The block for each lab must start with a header \`--- START OF FILE: Lab ##: [Lab Title] ---\`.
- INSIDE the block, the content MUST definitively start with the extracted \`**Topic:** [Topic Name]\` line, followed immediately by the \`Lab ##: [Lab Title]\` line.
- The block for each lab must end with \`--- END OF FILE ---\`.
- Place two newlines between each \`--- END OF FILE ---\` and the next \`--- START OF FILE ---\` header.

---
### CRITICAL FINAL OUTPUT STRUCTURE

Your final output MUST consist of two parts separated by a single line containing only \`===SPLIT===\`.

1.  **Part 1 (Before SPLIT):** The complete, raw lab series document as generated in PART 1. It must begin with \`**Series Name:**\`.
2.  **Part 2 (After SPLIT):** The split-file formatted version of the series, as described in PART 2. It must begin with \`--- START OF FILE: ... ---\`.

CRITICAL RULE: Your output must ONLY be the raw text as described. Do not add any conversational text or explanations.`,Sw=`You are an AI assistant that creates a new single Challenge Lab document by structuring the provided input. Your output must be a single raw markdown document that strictly adheres to the following structure.

### INPUT HANDLING
- The input can be either a short topic or a full, unstructured document.
- **If the input is a topic:** Expand on it to generate a detailed lab outline.
- **If the input is a document:** Analyze its content to identify the main subject and key procedures. Distill this information and organize it into a coherent lab outline, following the structure below. Your goal is to create a structured summary of actionable tasks from the document, not to copy its content verbatim.

### CRITICAL STRUCTURE REQUIREMENTS
1.  **Total Labs:** The output MUST contain exactly **1 lab**.
2.  **No Lab Separation:** Do NOT use \`---\` separators. The output is a single document.
3.  **Requirements per Lab:** The lab MUST contain **no less than 3 and no more than 4 requirements**.
4.  **Tasks per Requirement:** Each requirement MUST contain **no less than 4 and no more than 5 tasks**.
5.  **Lab Metadata:** The document must begin with a Lab Name (7 words or less) and the Topic. The Topic should be extracted or summarized from the input.

**FAILURE TO FOLLOW THESE STRUCTURAL RULES WILL RESULT IN AN INVALID OUTPUT.**

### CONTENT RULES
1.  **Practical and Action-Oriented:** Every lab, requirement, and task must be something a user can *do*. The focus is on practical application.
2.  **No Theoretical Content:** Avoid creating any content that is purely theoretical or knowledge-based.
3.  **Forbidden Verbs:** Do not use verbs that imply theoretical understanding. This includes, but is not to: "Identify", "Explain", "Review", "Describe", "Understand", "Learn", "Examine".
4.  **Approved Verbs:** Use strong, action-oriented verbs. Examples include: "Create", "Configure", "Deploy", "Implement", "Verify", "Connect", "Add", "Modify", "Remove", "Secure".
5.  **Certification Alignment:** If the topic contains or relates to certification exams (such as AWS Certified Solutions Architect, Microsoft Azure Administrator, CompTIA Security+, etc.), use the **official exam objectives or skill domains** as the primary basis for creating lab requirements and tasks. Align the lab structure with what candidates need to know for the certification.

### COST & ACCESSIBILITY
- When researching for information to create Tasks, ALWAYS use free / no cost solutions instead of paid or subscription options.
- Do NOT provide multiple options for tools, applications, or approaches. Select ONE specific, FREE option and provide exact instructions for it.
- Avoid trial versions, freemium services with limited features, or tools that require credit card registration.

### OUTPUT FORMAT
Deliver your output using this layout exactly:

**Lab Name:** <Auto-generated one-sentence name based on topic>
**Topic:** <Insert topic extracted/summarized from input>
Lab 01: <Lab Title>
Requirement: <Requirement 1>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
Requirement: <Requirement 2>
- <Task 1>
- <Task 2>
- <Task 3>
- <Task 4>
... continue this pattern for all requirements ...

### WRITING & STYLE STANDARDS
-   Maintain consistent Markdown syntax and structure throughout.
-   Use **clear, action-oriented verbs** for Titles and Tasks. The Lab title MUST begin with a verb that does not end in "-ing".
-   Keep task phrasing **concise but complete**.
-   Focus each requirement on a **distinct sub-skill** within the lab topic.

CRITICAL RULE: Your output must ONLY be the raw lab document. Do not add any conversational text or explanations. Your output must begin directly with "Lab Name:".`,Ew=`You are an expert AI curriculum developer tasked with converting an unstructured technical document into a structured, hands-on lab.

**CRITICAL RULES - DOCUMENT RESTRUCTURE MODE:**
1.  **DO NOT ADD ANY NEW CONTENT**: You must ONLY use content that is explicitly mentioned in the source document. Do NOT create new requirements, tasks, or procedures.
2.  **PRESERVE DOCUMENT SCOPE**: Maintain the document's original intent and scope. Do not expand beyond what is provided.
3.  **USE PROVIDED SAMPLES**: If the document references sample commands, scripts, or code snippets, you MUST include them verbatim in the steps.
4.  **NO CONTEXTUAL BLOCKS**: Do NOT generate [!note], [!help], or [+alert] blocks. These are only for topic-based generation.
5.  **RESTRUCTURE, DON'T CREATE**: Your job is to format existing content into Challenge Lab structure, not to invent new content.

### Critical Structure Requirements
- Extract requirements and tasks ONLY from what is explicitly mentioned in the source document.
- If the document has 2 main objectives, create 2 requirements (not more).
- If the document has 5 main objectives, create 5 requirements (not less).

Follow this multi-step process precisely:

### Step 1: Content Extraction & Analysis
1.  Read the entire input document carefully.
2.  Identify ONLY the objectives, procedures, and tasks that are explicitly mentioned in the document.
3.  Extract the exact requirements from the document - do NOT add additional requirements based on your knowledge.
4.  Identify any sample commands, scripts, or code snippets mentioned in the document.

### Step 2: Map Requirements and Tasks from Document
1.  For each objective explicitly mentioned in the document, create a "Requirement".
2.  For each procedure or action mentioned under that objective, create a "Task".
3.  DO NOT add tasks that are not mentioned in the source document.

### Step 3: Generate Detailed Steps for Each Task
1.  For **every single Task** extracted from the document, you must provide a detailed, **bulleted list of steps** (using hyphens \`-\`) to complete it.
2.  **If the original document provides clear steps**, use them as your primary source. Refine them for clarity and formatting ONLY.
3.  **If the original document provides sample commands or scripts**, include them EXACTLY as provided in the appropriate steps.
4.  **Only if absolutely necessary for completion**, fill in minor procedural gaps (e.g., "select **OK**" after entering a value), but do NOT add entire new procedures.
5.  **Instructional Language:** Always use "select" instead of "click" or "press" (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text the user needs to input (e.g., "enter +++hello world+++"). Avoid using the word "type" or "typing". Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`
6.  **Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to the detailed step lists under each task. Do NOT apply these formatting rules to the Overview paragraph, as it should use plain text without +++, **, *, or backtick formatting.

### Step 4: Refine and Format
1.  **Refine Task Titles:** For each task, scan the detailed steps you just generated. **Update the original task title to be more specific and descriptive**, incorporating key details like filenames, resource names, or specific configuration values mentioned in the steps. For example, if the original task was \`- Create a new file\`, and the steps instruct the user to create \`index.html\`, update the task title to \`- Create the **index.html** file\`.
2.  Assemble Final Structure:** Assemble the entire output into the following Skillable-style Challenge Lab Markdown structure.
3.  **Do not add extra commentary, intro text, or explanations.** Output only the valid Markdown structure.
4.  **Do not add \`:::\` blocks (like ShowGuided or ShowAdvanced).** This initial structuring phase should only produce the core content (title, overview, requirements, tasks with steps, and recap). The next agent will handle advanced formatting.

**OUTPUT STRUCTURE:**

>[challenge-title]: <Create a concise, action-oriented title based on the document's goal. The title MUST begin with a verb that does not end in "-ing".>

>[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context based on the lab scenario>. First, you will <shortened summary of first requirement>. <Continue with transition words for each middle requirement>. Finally, you will <shortened summary of final requirement>.

# <Requirement 1 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - Detailed step 1.2
    - ...
- <Task 2 Title>
    - Detailed step 2.1
    - Detailed step 2.2
    - ...

# <Requirement 2 Title>
- <Task 1 Title>
    - Detailed step 1.1
    - ...
... continue for all requirements and tasks ...

>[recap]:
- Accomplished <Requirement 1 goal> in past tense.
- Completed <Requirement 2 goal> in past tense.
- ... list key accomplishments ...
`,_w=`You are an expert AI technical writer that transforms a raw lab outline into a fully-formatted, detailed, and production-ready Challenge Lab document. You will perform a series of transformations in a specific order.

**CRITICAL RULES:**
1. Your output must ONLY be the raw, final markdown document. Do not include any conversational text, introductions, explanations, or summaries of your changes.
2. **PRESERVE ALL REQUIREMENTS**: You MUST process and include ALL requirements from the input document. Do NOT skip, combine, or reduce the number of requirements. If the input has 4 requirements, the output MUST have 4 requirements. If the input has 3 requirements, the output MUST have 3 requirements.

### TRANSFORMATION PIPELINE (Follow in this exact order):

---
### Step 1: Create Detailed Steps

**SCOPE:**
- You will receive the content for ONE single lab.
- You MUST strictly process ONLY the tasks listed within this specific lab.

**METADATA PRESERVATION:**
- The input will start with \`**Topic:**\` and \`Lab XX:\` lines. **DO NOT ALTER OR REMOVE THEM** during this step.

**PLATFORM & TERMINOLOGY ENFORCEMENT (STRICT):**
1.  **NO INVENTION:** Do not introduce ANY cloud platform (Azure, AWS, GCP), OS (Windows, Linux), or vendor tool UNLESS it is EXPLICITLY in the \`**Topic:**\` line.
2.  **GENERIC DEFAULT:** If the topic is generic, use neutral terms: "terminal," "text editor," "virtual machine."
3.  **IMPLICIT EXCEPTION:** Only use specific platforms if undeniably required by the topic (e.g., "Active Directory" -> Windows Server).

**INSTRUCTION GENERATION:**
1.  **ZERO SKIPS:** Generate steps for EVERY task line (lines starting with \`- \`).
2.  **DETAILED ACTIONS:** Steps must be granular. Use "select" for UI interactions (e.g., "select the **File** menu", "select **Enter**"), with the only exception being "right-click". Use "enter" for text input. Avoid using the word "type" or "typing".
3.  **LIST FORMAT:** All lists of steps MUST use bullets (a hyphen \`-\`), not numbers. Each step must begin with a capital letter. Do not use nested lists with letters (a, b, c). If sub-steps are needed, use a nested bullet.
4.  **MARKDOWN FORMATTING RULES (Apply ONLY in Task Steps, NOT in contextual blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++.
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use on verbs. Apply to key UI elements (buttons, menu items), resource names, or the single most critical value.
    - **Italics (\`*\`):** If there are 2+ important values in the same step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values.
    - **Backticks (\` \`):** Use ONLY for terminal/command line commands. Examples: \`npm install\`, \`Get-Process\`.

---
### Step 2: Refine Text & Headers

**Apply these rules to the output of Step 1:**
1.  **Format Requirement Headers:** Rewrite \`Requirement: <text>\` to \`# <Concise, sentence-case title>\`. The title MUST begin with a verb that does not end in "-ing".
2.  **Improve Task Wording:** Review the detailed steps generated for each task. **Update the task title to be a specific, imperative sentence that incorporates key details from the steps.**
    - **Scan each task's steps** and identify critical details such as: resource names, file names, configuration values, specific settings, network addresses, user names, or any other concrete specifics mentioned in the steps.
    - **Incorporate these details into the task title** to make it descriptive and completable even without viewing the step-by-step hints.
    - **Example:** If a task is \`- Configure the database\` and the steps involve creating a user named +++app-user+++ with permissions, update the title to \`- Create the +++app-user+++ database user with read/write permissions\`.
    - **Example:** If a task is \`- Create a storage account\` and the steps specify creating an account named +++mystorageacct001+++ in the **East US** region, update to \`- Create the +++mystorageacct001+++ storage account in **East US**\`.
    - The goal is to make each task bullet a standalone, actionable item that conveys what needs to be done and with what specific resources/values.
3.  **Apply Markdown Formatting Rules (CRITICAL - Apply ONLY in Task Steps and Guided Hints, NOT in [!note], [!help], [+alert] blocks or Overview):**
    - **Triple Plus Signs (\`+++\`):** Use ONLY when the step instructs the user to "enter" or "type" a value that is NOT a terminal command. Examples: +++myPassword123+++, +++192.168.1.1+++, +++user@example.com+++. Do NOT use for terminal commands (use backticks instead).
    - **Bold (\`**\`):** Use for the MOST important value in a step. Never use bold on verbs or action words. Apply to key UI elements (buttons, menu items), resource names, regions, or the single most critical value. Example: Select the **Create** button, enter +++myapp+++ in the **Name** field.
    - **Italics (\`*\`):** If there are 2 or more important values in the same line/step, use bold (\`**\`) for the most important and italics (\`*\`) for other important values. Also use for secondary UI elements or values displayed on screen that are not directly interacted with. Example: Select *Review + create*, and then select **Create**.
    - **Backticks (\` \`):** Use ONLY for commands or syntax entered into a terminal/command line. Examples: \`npm install\`, \`Get-Process\`, \`docker run\`. Never use for regular text values that should be entered in forms.
    - **SCOPE RESTRICTION:** These formatting rules apply ONLY to Task steps (the bulleted lists under tasks) and the content within Guided Hint blocks (\`:::ShowGuided\`). Do NOT apply these formatting rules to [!note], [!help], [+alert] blocks, or the Overview paragraph. These blocks should use plain text without +++, **, *, or backtick formatting.
4.  **Concise Instructions:** Where appropriate, combine two short, sequential \`select\` actions into a single sentence. For example: \`Select *Review + create*, and then select **Create**.\`

---
### Step 3: Enrich Content

**Apply these rules to the output of Step 2:**
1.  **Insert "Create Sample Data" or "Install/Download" Tasks:**
    - **Sample Data:** Where a task requires a file or data that doesn't exist yet, insert a new task *before* it: \`- Create Sample Data for <purpose>.\` followed by steps to create it.
    - **Applications/Downloads:** If any task requires a sample application, tool, or resource to be downloaded and installed, create a dedicated task for it in the same format as other tasks. Place this task in the logical order needed to complete the requirement (typically near the beginning).
    - **No Choices:** Do NOT give users multiple options. Select the most logical, FREE to use option available. Avoid paid tools, subscription services, or trial versions.
    - **Specific Instructions:** Provide exact download URLs, installation commands, and configuration steps. Do not say "download an application of your choice" - specify the exact free application to use.
2.  **Prepare Contextual Blocks for Later Insertion:** For each requirement, prepare THREE contextual blocks (**one note block**, **one help block**, and **one alert block**) that will be added in Step 4 AFTER all the advanced hint blocks for that requirement.

    - **CRITICAL FORMATTING RULES:**
      - **Single-Line Blocks:** For a single, concise line of text, use the \`!\` prefix (e.g., \`[!note]\`). The text MUST be on the same line as the marker.
        - Example: \`>[!note] This is a single-line note.\`
      - **Multi-Line Blocks:** For blocks with multiple lines or paragraphs, use the \`+\` prefix (e.g., \`[+alert]\`).
        - The first line of content MUST be on the same line as the marker.
        - There MUST be a blank line (a line with only \`>\`) immediately after the first line.
        - Subsequent lines of content must start with \`>\`.
        - Example:
          \`\`\`
          >[+alert] This is the first line of a multi-line alert.
          >
          >This is the second line, appearing after a blank line.
          \`\`\`
    - **DO NOT insert these blocks yet.** They will be added in Step 4 after advanced hints.

---
### Step 4: Apply Hint Blocks

**Apply these rules to the output of Step 3:**
1.  **For EACH task**, which is a line starting with \`- \` followed by a **bulleted list of steps**, apply the following transformations.
2.  **Wrap ONLY the bulleted list of steps** in a **Guided Hint** block. Do NOT include any contextual blocks (\`[+alert]\`, etc.) inside this hint block.
    - When creating the hint's descriptive text (\`Expand this hint for guidance on ...\`), use the rewritten task name but **remove any \`+++\` formatting** from it for better readability.
    - **CRITICAL FORMATTING RULE:** Between each step in the hint block, there MUST be EXACTLY ONE blank line containing only \`>\`. DO NOT add two or more consecutive blank lines. Count carefully: ONE \`>\` line between steps, NOT TWO.
    \`\`\`
    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint for guidance on <rewritten task name without +++>.
    >
    >- Step 1 content here.
    >
    >- Step 2 content here.
    >
    :::
    \`\`\`
    **WRONG FORMATTING - DO NOT DO THIS:**
    \`\`\`
    >- Step 1 content here.
    >
    >     WRONG! Two blank lines
    >- Step 2 content here.
    \`\`\`
3.  **IMMEDIATELY AFTER** each Guided Hint, insert **one** **Advanced Hint** block with a real or realistic documentation link. The markdown link must include a title in quotes.
    \`\`\`
    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more? Review the documentation on [<specific topic>](<official URL> "<Action Title>").
    :::
    \`\`\`
4.  **DISTRIBUTE CONTEXTUAL BLOCKS EVENLY ACROSS TASKS** - For each requirement, add THREE contextual blocks (**one [!note] block**, **one [!help] block**, and **one [+alert] block**) spread evenly throughout the tasks:
    - **Distribution Strategy:** If a requirement has 4 tasks, distribute the blocks across tasks (e.g., note after task 1, help after task 2, alert after task 4). If 5 tasks, spread them out (e.g., note after task 1, help after task 3, alert after task 5).
    - **Placement:** Each contextual block should be placed AFTER the Advanced Hint block of its assigned task.
    - **[!note] block** - A helpful tip or clarification related to that specific task
    - **[!help] block** - Additional guidance or best practices for that task
    - **[+alert] block** - An important warning or caution (use multi-line format with \`+\`)

    **CRITICAL SPACING RULE:** There MUST be ONE blank line before each contextual block and ONE blank line after each contextual block.

    **Example structure for a 4-task requirement:**
    \`\`\`
    # Requirement Title

    - Task 1

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!note] This is a helpful note about Task 1.

    - Task 2

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[!help] Here is additional help for Task 2.

    - Task 3

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    - Task 4

    :::ShowGuided(ShowGuided=Yes)
    >[+hint] Expand this hint...
    >
    >- Step 1
    >
    :::

    :::ShowAdvanced(ShowAdvanced=Yes)
    >[!knowledge] Want to learn more?...
    :::

    >[+alert] This is an important warning about Task 4.
    >
    >Additional alert details can go here.

    \`\`\`
5.  Ensure there is **ONE blank line** between the Task line and its Guided Hint, between the Guided Hint and Advanced Hint, and after the Advanced Hint.

---
### Step 5: Apply Final Structure

**Apply these rules to the output of Step 4, ensuring correct blank line spacing as shown in the examples.**
- For each Requirement section (starting with a \`# Header\`):
  1.  **BEFORE** the \`# Header\`, insert:
      \`\`\`
      ===

      <!-- Begin Requirement N section -->

      \`\`\`
  2.  **AFTER** the \`# Header\`, insert:
      \`\`\`

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Toggle.md)
      \`\`\`
  3.  **AT THE END** of the requirement's content, insert a verification footer:
      \`\`\`

      :::ShowActivity(ShowActivity=Yes)
      ## Check your work
      @lab.ActivityGroup(requirementN)
      :::

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Footer.md)

      <!-- End Requirement N section -->
      \`\`\`

---
### Step 6: Finalize with Introduction and Summary

**Apply these final rules to the output of Step 5:**
1.  **GENERATE & PREPEND INTRODUCTION:**
    - Read the entire document. Extract the title from the \`>[challenge-title]:\` line. If not present, extract it from the \`Lab XX:\` line.
    - Generate an **Overview** paragraph that follows this exact narrative structure:
        1.  Start with a persona. Invent a suitable persona based on the lab's topic. For example: \`You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to...\`
        2.  Create a condensed, one-sentence summary for the goal of **each requirement** that exists in the lab.
        3.  Weave these summaries into a single paragraph using sequential transition words.
        4.  The final paragraph MUST follow this narrative structure: "First, you will... Next, you will...". The final sentence of the paragraph MUST always begin with the word "Finally". Use appropriate transition words based on the ACTUAL number of requirements in the lab.
    - **REPLACE** the original \`**Topic:**\` and \`Lab XX:\` lines at the top of the file with this new header. The overview block MUST include a blank line after the tag, as shown:
      \`\`\`
      !INSTRUCTIONS[](https://raw.githubusercontent.com//LODSContent/Challenge-V3-Framework/main/Templates/Sections/Intro.md)

      >[challenge-title]: <Extracted Title>

      >[overview]: You are a @lab.Variable(GlobalDeveloper) at @lab.Variable(GlobalCompany), a company that needs to <brief context>. First, you will <summary of first requirement>. Next, you will <summary of second requirement>. <Continue for all requirements>. Finally, you will <summary of final requirement>.
      \`\`\`
2.  **GENERATE & APPEND SUMMARY:**
    - Generate 4-6 past-tense summary objectives based on what the user accomplished.
    - Append this block to the VERY END of the document:
      \`\`\`
      ===

      <!-- Begin Summary section -->

      !INSTRUCTIONS[](https://raw.githubusercontent.com/LODSContent/Challenge-V3-Framework/main/Templates/Sections/Summary2.md)

      >[recap]:
      >Congratulations, you have completed the **<The Title you used above>** Challenge Lab.
      >
      >You have accomplished the following:
      >
      ><Your bulleted list of objectives here>

      >[next-steps]:
      >
      <!-- End Summary Section -->
      \`\`\`

NOW, process the user's input following all 6 steps to produce the final, single markdown document.`,Cw=Object.freeze(Object.defineProperty({__proto__:null,AGENT_1_SERIES_COMBINED_PROMPT:ww,AGENT_1_SINGLE_PROMPT:Sw,AGENT_RESTRUCTURE_PROMPT:Ew,COMBINED_AGENT_PROMPT:_w},Symbol.toStringTag,{value:"Module"}));function Kp(n){switch(n){case"openai":return Jp;case"gemini":return Tw;case"ollama":return Cw;default:return Jp}}const xw=({agent:n,onClick:e,status:t,isDisabled:o,isViewing:s,progress:a=0})=>{const d="flex items-center p-3 rounded-lg w-full text-left transition-all duration-200 ease-in-out relative overflow-hidden",p=o?"opacity-60 cursor-not-allowed":"hover:bg-gray-700 transform hover:scale-105",g={pending:"bg-dark-card border border-dark-border",processing:"bg-dark-card border border-dark-border",done:"bg-green-500/10 border border-green-500/30",error:"bg-red-500/10 border border-red-500/30",skipped:"bg-dark-card border border-dark-border"},h=s?"ring-2 ring-brand-secondary":"",y=()=>{switch(t){case"processing":return E.jsx(bu,{className:"w-5 h-5 animate-spin text-brand-primary"});case"done":return E.jsx(zT,{className:"w-5 h-5 text-green-400"});case"error":return E.jsx(Mu,{className:"w-5 h-5 text-red-400"});case"skipped":return E.jsx("span",{className:"text-sm font-mono text-dark-text-secondary",children:"-"});default:return null}};return E.jsxs("button",{onClick:e,disabled:o,className:`${d} ${p} ${g[t]} ${h}`,"aria-label":`${n.title}. Status: ${t}. ${s?"Currently viewing output.":""}`,"aria-pressed":s,children:[E.jsx("div",{className:"absolute top-0 left-0 h-full bg-brand-primary/20 transition-all duration-300 ease-linear",style:{width:`${t==="processing"?a:0}%`},role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100}),E.jsxs("div",{className:"relative z-10 flex items-center w-full",children:[E.jsx("div",{className:`mr-4 p-2 rounded-md ${t==="processing"?"bg-brand-primary text-white":"bg-gray-600 text-dark-text"}`,children:n.icon}),E.jsxs("div",{className:"flex-1 text-left",children:[E.jsx("p",{className:`font-semibold ${t==="done"?"text-green-400":"text-white"}`,children:n.title}),E.jsx("p",{className:`text-sm ${t==="done"?"text-green-400/80":"text-dark-text-secondary"}`,children:n.description})]}),E.jsx("div",{className:"ml-4 w-5 h-5 flex items-center justify-center",children:y()})]})]})},oc=({title:n,content:e,setContent:t,isReadOnly:o=!1,isLoading:s=!1,isDisabled:a=!1,placeholder:d="Enter your text here...",showTitle:p=!0})=>E.jsxs("div",{className:`flex flex-col h-full ${p?"bg-dark-card rounded-lg border border-dark-border shadow-lg":""}`,children:[p&&E.jsx("h3",{className:"text-lg font-semibold p-3 border-b border-dark-border",children:n}),E.jsxs("div",{className:"relative flex-grow min-h-0",children:[E.jsx("textarea",{value:e,onChange:g=>t&&t(g.target.value),readOnly:o,disabled:a,placeholder:d,className:`w-full h-full p-4 bg-transparent text-dark-text resize-none focus:outline-none focus:ring-0 disabled:opacity-70 ${p?"rounded-b-lg":""}`}),s&&E.jsx("div",{className:`absolute inset-0 bg-dark-card/80 flex items-center justify-center ${p?"rounded-b-lg":""}`,children:E.jsxs("div",{className:"text-center",children:[E.jsxs("svg",{className:"animate-spin h-8 w-8 text-brand-primary mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),E.jsx("p",{className:"mt-2 text-dark-text-secondary",children:"Processing..."})]})})]})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Aw,Iw;function kw(){return{geminiUrl:Aw,vertexUrl:Iw}}function Rw(n,e,t,o){var s,a;if(!(n!=null&&n.baseUrl)){const d=kw();return e?(s=d.vertexUrl)!==null&&s!==void 0?s:t:(a=d.geminiUrl)!==null&&a!==void 0?a:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pn{}function Q(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(n,e,t){for(let a=0;a<e.length-1;a++){const d=e[a];if(d.endsWith("[]")){const p=d.slice(0,-2);if(!(p in n))if(Array.isArray(t))n[p]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[p])){const g=n[p];if(Array.isArray(t))for(let h=0;h<g.length;h++){const y=g[h];c(y,e.slice(a+1),t[h])}else for(const h of g)c(h,e.slice(a+1),t)}return}else if(d.endsWith("[0]")){const p=d.slice(0,-3);p in n||(n[p]=[{}]);const g=n[p];c(g[0],e.slice(a+1),t);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const o=e[e.length-1],s=n[o];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function u(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in n){const d=n[a];return Array.isArray(d)?d.map(p=>u(p,e.slice(o+1),t)):t}else return t}else n=n[s]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function Nw(n,e){for(const[t,o]of Object.entries(e)){const s=t.split("."),a=o.split("."),d=new Set;let p=-1;for(let g=0;g<s.length;g++)if(s[g]==="*"){p=g;break}if(p!==-1&&a.length>p)for(let g=p;g<a.length;g++){const h=a[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&d.add(h)}Lu(n,s,a,0,d)}}function Lu(n,e,t,o,s){if(o>=e.length||typeof n!="object"||n===null)return;const a=e[o];if(a.endsWith("[]")){const d=a.slice(0,-2),p=n;if(d in p&&Array.isArray(p[d]))for(const g of p[d])Lu(g,e,t,o+1,s)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const d=n,p=Object.keys(d).filter(h=>!h.startsWith("_")&&!s.has(h)),g={};for(const h of p)g[h]=d[h];for(const[h,y]of Object.entries(g)){const T=[];for(const w of t.slice(o))w==="*"?T.push(h):T.push(w);c(d,T,y)}for(const h of p)delete d[h]}}else{const d=n;a in d&&Lu(d[a],e,t,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ic(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pw(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["operationName"],t);const o=u(n,["resourceName"]);return o!=null&&c(e,["_url","resourceName"],o),e}function bw(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],Lw(d)),e}function Mw(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],Dw(d)),e}function Lw(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>Uw(d))),c(e,["generatedVideos"],a)}const o=u(n,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function Dw(n){const e={},t=u(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>Fw(d))),c(e,["generatedVideos"],a)}const o=u(n,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function Uw(n){const e={},t=u(n,["video"]);return t!=null&&c(e,["video"],$w(t)),e}function Fw(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],Hw(t)),e}function Ow(n){const e={},t=u(n,["operationName"]);return t!=null&&c(e,["_url","operationName"],t),e}function Gw(n){const e={},t=u(n,["operationName"]);return t!=null&&c(e,["_url","operationName"],t),e}function qw(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],Vw(d)),e}function Vw(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["parent"]);o!=null&&c(e,["parent"],o);const s=u(n,["documentName"]);return s!=null&&c(e,["documentName"],s),e}function zm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],Bw(d)),e}function Bw(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["parent"]);o!=null&&c(e,["parent"],o);const s=u(n,["documentName"]);return s!=null&&c(e,["documentName"],s),e}function $w(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["uri"],t);const o=u(n,["encodedVideo"]);o!=null&&c(e,["videoBytes"],ic(o));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function Hw(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const o=u(n,["bytesBase64Encoded"]);o!=null&&c(e,["videoBytes"],ic(o));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xp;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xp||(Xp={}));var Qp;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Qp||(Qp={}));var Zp;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Zp||(Zp={}));var tr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(tr||(tr={}));var jp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(jp||(jp={}));var eh;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eh||(eh={}));var th;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(th||(th={}));var nh;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(nh||(nh={}));var rh;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(rh||(rh={}));var oh;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(oh||(oh={}));var ih;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ih||(ih={}));var sh;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(sh||(sh={}));var ah;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(ah||(ah={}));var lh;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(lh||(lh={}));var uh;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uh||(uh={}));var ch;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ch||(ch={}));var dh;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(dh||(dh={}));var fh;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(fh||(fh={}));var Xs;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Xs||(Xs={}));var ph;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ph||(ph={}));var hh;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(hh||(hh={}));var mh;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mh||(mh={}));var Du;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Du||(Du={}));var gh;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(gh||(gh={}));var yh;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(yh||(yh={}));var vh;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(vh||(vh={}));var Th;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Th||(Th={}));var wh;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wh||(wh={}));var Sh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Sh||(Sh={}));var Eh;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Eh||(Eh={}));var _h;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(_h||(_h={}));var Ch;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Ch||(Ch={}));var xh;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xh||(xh={}));var Ah;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ah||(Ah={}));var Ih;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ih||(Ih={}));var kh;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kh||(kh={}));var Rh;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Rh||(Rh={}));var Nh;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Nh||(Nh={}));var Ph;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Ph||(Ph={}));var bh;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(bh||(bh={}));var Mh;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Mh||(Mh={}));var Lh;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Lh||(Lh={}));var Dh;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Dh||(Dh={}));var Uh;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Uh||(Uh={}));var Fh;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Fh||(Fh={}));var Oh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Oh||(Oh={}));var Gh;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Gh||(Gh={}));var qh;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qh||(qh={}));var Vh;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Vh||(Vh={}));var Bh;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Bh||(Bh={}));var $h;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($h||($h={}));var Hh;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Hh||(Hh={}));var oo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(oo||(oo={}));class Uu{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class oi{get text(){var e,t,o,s,a,d,p,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const T=[];for(const w of(g=(p=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[_,A]of Object.entries(w))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(A!==null||A!==void 0)&&T.push(_);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;y=!0,h+=w.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,t,o,s,a,d,p,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const T of(g=(p=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[w,_]of Object.entries(T))w!=="inlineData"&&(_!==null||_!==void 0)&&y.push(w);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,o,s,a,d,p,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(p=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,o,s,a,d,p,g,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(g=(p=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,o,s,a,d,p,g,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(g=(p=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class Yh{}class Wh{}class Yw{}class Ww{}class zw{}class Jw{}class zh{}class Jh{}class Kh{}class Kw{}class Qs{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Qs;let s;const a=e;return t?s=Mw(a):s=bw(a),Object.assign(o,s),o}}class Xh{}class Qh{}class Zh{}class Xw{}class Qw{}class Zw{}class sc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new sc,a=qw(e);return Object.assign(o,a),o}}class jw{}class eS{}class tS{}class jh{}class nS{get text(){var e,t,o;let s="",a=!1;const d=[];for(const p of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[g,h]of Object.entries(p))g!=="text"&&g!=="thought"&&h!==null&&d.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;a=!0,s+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,o;let s="";const a=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[p,g]of Object.entries(d))p!=="inlineData"&&g!==null&&a.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(s+=atob(d.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class rS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ac{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new ac,a=zm(e);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ie(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jm(n,e){const t=Ie(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Km(n){return Array.isArray(n)?n.map(e=>Zs(e)):[Zs(n)]}function Zs(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Xm(n){const e=Zs(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qm(n){const e=Zs(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function em(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Zm(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>em(e)):[em(n)]}function Fu(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function tm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function nm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function gt(n){if(n==null)throw new Error("ContentUnion is required");return Fu(n)?n:{role:"user",parts:Zm(n)}}function lc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=gt(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=gt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>gt(t)):[gt(e)]}function Jt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(tm(n)||nm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gt(n)]}const e=[],t=[],o=Fu(n[0]);for(const s of n){const a=Fu(s);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(tm(s)||nm(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return o||e.push({role:"user",parts:Zm(t)}),e}function oS(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(tr).includes(t[0].toUpperCase())?t[0].toUpperCase():tr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(tr).includes(o.toUpperCase())?o.toUpperCase():tr.TYPE_UNSPECIFIED})}}function so(n){const e={},t=["items"],o=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&oS(n.type,e);for(const[d,p]of Object.entries(n))if(p!=null)if(d=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(tr).includes(p.toUpperCase())?p.toUpperCase():tr.TYPE_UNSPECIFIED}else if(t.includes(d))e[d]=so(p);else if(o.includes(d)){const g=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}g.push(so(h))}e[d]=g}else if(s.includes(d)){const g={};for(const[h,y]of Object.entries(p))g[h]=so(y);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=p}return e}function uc(n){return so(n)}function cc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function dc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ho(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=so(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=so(e.response));return n}function mo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function iS(n,e,t,o=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function bn(n,e){if(typeof e!="string")throw new Error("name must be a string");return iS(n,e,"cachedContents")}function jm(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function rr(n){return ic(n)}function sS(n){return n!=null&&typeof n=="object"&&"name"in n}function aS(n){return n!=null&&typeof n=="object"&&"video"in n}function lS(n){return n!=null&&typeof n=="object"&&"uri"in n}function eg(n){var e;let t;if(sS(n)&&(t=n.name),!(lS(n)&&(t=n.uri,t===void 0))&&!(aS(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function tg(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function ng(n){for(const e of["models","tunedModels","publisherModels"])if(uS(n,e))return n[e];return[]}function uS(n,e){return n!==null&&typeof n=="object"&&e in n}function cS(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function dS(n,e={}){const t=[],o=new Set;for(const s of n){const a=s.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const d=cS(s,e);d.functionDeclarations&&t.push(...d.functionDeclarations)}return{functionDeclarations:t}}function rg(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function fS(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function og(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let a=!1;for(const d of s){if(typeof d!="object"||d===null)continue;const g=d.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function go(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function ig(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pS(n){const e={},t=u(n,["responsesFile"]);t!=null&&c(e,["fileName"],t);const o=u(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>HS(d))),c(e,["inlinedResponses"],a)}const s=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["inlinedEmbedContentResponses"],a)}return e}function hS(n){const e={},t=u(n,["predictionsFormat"]);t!=null&&c(e,["format"],t);const o=u(n,["gcsDestination","outputUriPrefix"]);o!=null&&c(e,["gcsUri"],o);const s=u(n,["bigqueryDestination","outputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function mS(n){const e={},t=u(n,["format"]);t!=null&&c(e,["predictionsFormat"],t);const o=u(n,["gcsUri"]);o!=null&&c(e,["gcsDestination","outputUriPrefix"],o);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigqueryDestination","outputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bs(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata","displayName"]);o!=null&&c(e,["displayName"],o);const s=u(n,["metadata","state"]);s!=null&&c(e,["state"],ig(s));const a=u(n,["metadata","createTime"]);a!=null&&c(e,["createTime"],a);const d=u(n,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const p=u(n,["metadata","updateTime"]);p!=null&&c(e,["updateTime"],p);const g=u(n,["metadata","model"]);g!=null&&c(e,["model"],g);const h=u(n,["metadata","output"]);return h!=null&&c(e,["dest"],pS(og(h))),e}function Ou(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(n,["state"]);s!=null&&c(e,["state"],ig(s));const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const p=u(n,["startTime"]);p!=null&&c(e,["startTime"],p);const g=u(n,["endTime"]);g!=null&&c(e,["endTime"],g);const h=u(n,["updateTime"]);h!=null&&c(e,["updateTime"],h);const y=u(n,["model"]);y!=null&&c(e,["model"],y);const T=u(n,["inputConfig"]);T!=null&&c(e,["src"],gS(T));const w=u(n,["outputConfig"]);w!=null&&c(e,["dest"],hS(og(w)));const _=u(n,["completionStats"]);return _!=null&&c(e,["completionStats"],_),e}function gS(n){const e={},t=u(n,["instancesFormat"]);t!=null&&c(e,["format"],t);const o=u(n,["gcsSource","uris"]);o!=null&&c(e,["gcsUri"],o);const s=u(n,["bigquerySource","inputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function yS(n,e){const t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=u(e,["fileName"]);o!=null&&c(t,["fileName"],o);const s=u(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>$S(n,d))),c(t,["requests","requests"],a)}return t}function vS(n){const e={},t=u(n,["format"]);t!=null&&c(e,["instancesFormat"],t);const o=u(n,["gcsUri"]);o!=null&&c(e,["gcsSource","uris"],o);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigquerySource","inputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function TS(n){const e={},t=u(n,["data"]);if(t!=null&&c(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function wS(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],go(n,o)),t}function SS(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],go(n,o)),t}function ES(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],t);const o=u(n,["citationMetadata"]);o!=null&&c(e,["citationMetadata"],_S(o));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const a=u(n,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(n,["avgLogprobs"]);d!=null&&c(e,["avgLogprobs"],d);const p=u(n,["groundingMetadata"]);p!=null&&c(e,["groundingMetadata"],p);const g=u(n,["index"]);g!=null&&c(e,["index"],g);const h=u(n,["logprobsResult"]);h!=null&&c(e,["logprobsResult"],h);const y=u(n,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(_=>_)),c(e,["safetyRatings"],w)}const T=u(n,["urlContextMetadata"]);return T!=null&&c(e,["urlContextMetadata"],T),e}function _S(n){const e={},t=u(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["citations"],o)}return e}function sg(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>QS(a))),c(e,["parts"],s)}const o=u(n,["role"]);return o!=null&&c(e,["role"],o),e}function CS(n,e){const t={},o=u(n,["displayName"]);if(e!==void 0&&o!=null&&c(e,["batch","displayName"],o),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function xS(n,e){const t={},o=u(n,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=u(n,["dest"]);return e!==void 0&&s!=null&&c(e,["outputConfig"],mS(fS(s))),t}function rm(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["src"]);s!=null&&c(t,["batch","inputConfig"],yS(n,rg(n,s)));const a=u(e,["config"]);return a!=null&&CS(a,t),t}function AS(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["model"],Ie(n,o));const s=u(e,["src"]);s!=null&&c(t,["inputConfig"],vS(rg(n,s)));const a=u(e,["config"]);return a!=null&&xS(a,t),t}function IS(n,e){const t={},o=u(n,["displayName"]);return e!==void 0&&o!=null&&c(e,["batch","displayName"],o),t}function kS(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["src"]);s!=null&&c(t,["batch","inputConfig"],DS(n,s));const a=u(e,["config"]);return a!=null&&IS(a,t),t}function RS(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],go(n,o)),t}function NS(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],go(n,o)),t}function PS(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);return a!=null&&c(e,["error"],a),e}function bS(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);return a!=null&&c(e,["error"],a),e}function MS(n,e){const t={},o=u(e,["contents"]);if(o!=null){let a=lc(n,o);Array.isArray(a)&&(a=a.map(d=>d)),c(t,["requests[]","request","content"],a)}const s=u(e,["config"]);return s!=null&&(c(t,["_self"],LS(s,t)),Nw(t,{"requests[].*":"requests[].request.*"})),t}function LS(n,e){const t={},o=u(n,["taskType"]);e!==void 0&&o!=null&&c(e,["requests[]","taskType"],o);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const a=u(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&c(e,["requests[]","outputDimensionality"],a),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function DS(n,e){const t={},o=u(e,["fileName"]);o!=null&&c(t,["file_name"],o);const s=u(e,["inlinedRequests"]);return s!=null&&c(t,["requests"],MS(n,s)),t}function US(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function FS(n,e,t){const o={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],sg(gt(s)));const a=u(e,["temperature"]);a!=null&&c(o,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(o,["topP"],d);const p=u(e,["topK"]);p!=null&&c(o,["topK"],p);const g=u(e,["candidateCount"]);g!=null&&c(o,["candidateCount"],g);const h=u(e,["maxOutputTokens"]);h!=null&&c(o,["maxOutputTokens"],h);const y=u(e,["stopSequences"]);y!=null&&c(o,["stopSequences"],y);const T=u(e,["responseLogprobs"]);T!=null&&c(o,["responseLogprobs"],T);const w=u(e,["logprobs"]);w!=null&&c(o,["logprobs"],w);const _=u(e,["presencePenalty"]);_!=null&&c(o,["presencePenalty"],_);const A=u(e,["frequencyPenalty"]);A!=null&&c(o,["frequencyPenalty"],A);const k=u(e,["seed"]);k!=null&&c(o,["seed"],k);const N=u(e,["responseMimeType"]);N!=null&&c(o,["responseMimeType"],N);const B=u(e,["responseSchema"]);B!=null&&c(o,["responseSchema"],uc(B));const D=u(e,["responseJsonSchema"]);if(D!=null&&c(o,["responseJsonSchema"],D),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=u(e,["safetySettings"]);if(t!==void 0&&F!=null){let me=F;Array.isArray(me)&&(me=me.map(Ee=>ZS(Ee))),c(t,["safetySettings"],me)}const U=u(e,["tools"]);if(t!==void 0&&U!=null){let me=mo(U);Array.isArray(me)&&(me=me.map(Ee=>jS(ho(Ee)))),c(t,["tools"],me)}const H=u(e,["toolConfig"]);if(t!==void 0&&H!=null&&c(t,["toolConfig"],H),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=u(e,["cachedContent"]);t!==void 0&&O!=null&&c(t,["cachedContent"],bn(n,O));const q=u(e,["responseModalities"]);q!=null&&c(o,["responseModalities"],q);const ie=u(e,["mediaResolution"]);ie!=null&&c(o,["mediaResolution"],ie);const z=u(e,["speechConfig"]);if(z!=null&&c(o,["speechConfig"],cc(z)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=u(e,["thinkingConfig"]);J!=null&&c(o,["thinkingConfig"],J);const te=u(e,["imageConfig"]);return te!=null&&c(o,["imageConfig"],te),o}function OS(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(h=>ES(h))),c(e,["candidates"],g)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const a=u(n,["promptFeedback"]);a!=null&&c(e,["promptFeedback"],a);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const p=u(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function GS(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],go(n,o)),t}function qS(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],go(n,o)),t}function VS(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=u(n,["enableWidget"]);return t!=null&&c(e,["enableWidget"],t),e}function BS(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],t),e}function $S(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["request","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let p=Jt(s);Array.isArray(p)&&(p=p.map(g=>sg(g))),c(t,["request","contents"],p)}const a=u(e,["metadata"]);a!=null&&c(t,["metadata"],a);const d=u(e,["config"]);return d!=null&&c(t,["request","generationConfig"],FS(n,d,u(t,["request"],{}))),t}function HS(n){const e={},t=u(n,["response"]);t!=null&&c(e,["response"],OS(t));const o=u(n,["error"]);return o!=null&&c(e,["error"],o),e}function YS(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);if(e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function WS(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const a=u(n,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),t}function zS(n){const e={},t=u(n,["config"]);return t!=null&&YS(t,e),e}function JS(n){const e={},t=u(n,["config"]);return t!=null&&WS(t,e),e}function KS(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>Bs(d))),c(e,["batchJobs"],a)}return e}function XS(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>Ou(d))),c(e,["batchJobs"],a)}return e}function QS(n){const e={},t=u(n,["functionCall"]);t!=null&&c(e,["functionCall"],t);const o=u(n,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);const s=u(n,["executableCode"]);s!=null&&c(e,["executableCode"],s);const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],US(a));const d=u(n,["functionResponse"]);d!=null&&c(e,["functionResponse"],d);const p=u(n,["inlineData"]);p!=null&&c(e,["inlineData"],TS(p));const g=u(n,["text"]);g!=null&&c(e,["text"],g);const h=u(n,["thought"]);h!=null&&c(e,["thought"],h);const y=u(n,["thoughtSignature"]);y!=null&&c(e,["thoughtSignature"],y);const T=u(n,["videoMetadata"]);return T!=null&&c(e,["videoMetadata"],T),e}function ZS(n){const e={},t=u(n,["category"]);if(t!=null&&c(e,["category"],t),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(n,["threshold"]);return o!=null&&c(e,["threshold"],o),e}function jS(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(n,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const s=u(n,["computerUse"]);s!=null&&c(e,["computerUse"],s);const a=u(n,["fileSearch"]);a!=null&&c(e,["fileSearch"],a);const d=u(n,["codeExecution"]);if(d!=null&&c(e,["codeExecution"],d),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],VS(p));const g=u(n,["googleSearch"]);g!=null&&c(e,["googleSearch"],BS(g));const h=u(n,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Nn||(Nn={}));class Cr{constructor(e,t,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,s)}init(e,t,o){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!o||Object.keys(o).length===0?d={config:{}}:typeof o=="object"?d=Object.assign({},o):d=o,d.config&&(d.config.pageToken=t.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(a=(s=d.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eE=class extends Pn{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Cr(Nn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=rm(this.apiClient,e),o=t._url,s=Q("{model}:batchGenerateContent",o),p=t.batch.inputConfig.requests,g=p.requests,h=[];for(const y of g){const T=Object.assign({},y);if(T.systemInstruction){const w=T.systemInstruction;delete T.systemInstruction;const _=T.request;_.systemInstruction=w,T.request=_}h.push(T)}return p.requests=h,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const a=this.getGcsUri(e),d=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${s}`;else if(d)o.dest=`${d}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=AS(this.apiClient,e);return p=Q("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>Ou(y))}else{const h=rm(this.apiClient,e);return p=Q("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Bs(y))}}async createEmbeddingsInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=kS(this.apiClient,e);return a=Q("{model}:asyncBatchEmbedContent",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>Bs(g))}}async get(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=qS(this.apiClient,e);return p=Q("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>Ou(y))}else{const h=GS(this.apiClient,e);return p=Q("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Bs(y))}}async cancel(e){var t,o,s,a;let d="",p={};if(this.apiClient.isVertexAI()){const g=SS(this.apiClient,e);d=Q("batchPredictionJobs/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=wS(this.apiClient,e);d=Q("batches/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=JS(e);return p=Q("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=XS(y),w=new jh;return Object.assign(w,T),w})}else{const h=zS(e);return p=Q("batches",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=KS(y),w=new jh;return Object.assign(w,T),w})}}async delete(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=NS(this.apiClient,e);return p=Q("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>bS(y))}else{const h=RS(this.apiClient,e);return p=Q("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>PS(y))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tE(n){const e={},t=u(n,["data"]);if(t!=null&&c(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function om(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>EE(a))),c(e,["parts"],s)}const o=u(n,["role"]);return o!=null&&c(e,["role"],o),e}function nE(n,e){const t={},o=u(n,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const a=u(n,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let y=Jt(d);Array.isArray(y)&&(y=y.map(T=>om(T))),c(e,["contents"],y)}const p=u(n,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],om(gt(p)));const g=u(n,["tools"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(T=>_E(T))),c(e,["tools"],y)}const h=u(n,["toolConfig"]);if(e!==void 0&&h!=null&&c(e,["toolConfig"],h),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function rE(n,e){const t={},o=u(n,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const a=u(n,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let T=Jt(d);Array.isArray(T)&&(T=T.map(w=>w)),c(e,["contents"],T)}const p=u(n,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],gt(p));const g=u(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>CE(w))),c(e,["tools"],T)}const h=u(n,["toolConfig"]);e!==void 0&&h!=null&&c(e,["toolConfig"],h);const y=u(n,["kmsKeyName"]);return e!==void 0&&y!=null&&c(e,["encryption_spec","kmsKeyName"],y),t}function oE(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["model"],Jm(n,o));const s=u(e,["config"]);return s!=null&&nE(s,t),t}function iE(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["model"],Jm(n,o));const s=u(e,["config"]);return s!=null&&rE(s,t),t}function sE(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],bn(n,o)),t}function aE(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],bn(n,o)),t}function lE(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function uE(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function cE(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function dE(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const a=u(n,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function fE(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],bn(n,o)),t}function pE(n,e){const t={},o=u(e,["name"]);return o!=null&&c(t,["_url","name"],bn(n,o)),t}function hE(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=u(n,["enableWidget"]);return t!=null&&c(e,["enableWidget"],t),e}function mE(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],t),e}function gE(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function yE(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function vE(n){const e={},t=u(n,["config"]);return t!=null&&gE(t,e),e}function TE(n){const e={},t=u(n,["config"]);return t!=null&&yE(t,e),e}function wE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["cachedContents"],a)}return e}function SE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["cachedContents"],a)}return e}function EE(n){const e={},t=u(n,["functionCall"]);t!=null&&c(e,["functionCall"],t);const o=u(n,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);const s=u(n,["executableCode"]);s!=null&&c(e,["executableCode"],s);const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],cE(a));const d=u(n,["functionResponse"]);d!=null&&c(e,["functionResponse"],d);const p=u(n,["inlineData"]);p!=null&&c(e,["inlineData"],tE(p));const g=u(n,["text"]);g!=null&&c(e,["text"],g);const h=u(n,["thought"]);h!=null&&c(e,["thought"],h);const y=u(n,["thoughtSignature"]);y!=null&&c(e,["thoughtSignature"],y);const T=u(n,["videoMetadata"]);return T!=null&&c(e,["videoMetadata"],T),e}function _E(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(n,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const s=u(n,["computerUse"]);s!=null&&c(e,["computerUse"],s);const a=u(n,["fileSearch"]);a!=null&&c(e,["fileSearch"],a);const d=u(n,["codeExecution"]);if(d!=null&&c(e,["codeExecution"],d),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],hE(p));const g=u(n,["googleSearch"]);g!=null&&c(e,["googleSearch"],mE(g));const h=u(n,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function CE(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(w=>dE(w))),c(e,["functionDeclarations"],T)}const o=u(n,["retrieval"]);o!=null&&c(e,["retrieval"],o);const s=u(n,["googleSearchRetrieval"]);s!=null&&c(e,["googleSearchRetrieval"],s);const a=u(n,["computerUse"]);if(a!=null&&c(e,["computerUse"],a),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=u(n,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const p=u(n,["enterpriseWebSearch"]);p!=null&&c(e,["enterpriseWebSearch"],p);const g=u(n,["googleMaps"]);g!=null&&c(e,["googleMaps"],g);const h=u(n,["googleSearch"]);h!=null&&c(e,["googleSearch"],h);const y=u(n,["urlContext"]);return y!=null&&c(e,["urlContext"],y),e}function xE(n,e){const t={},o=u(n,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function AE(n,e){const t={},o=u(n,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function IE(n,e){const t={},o=u(e,["name"]);o!=null&&c(t,["_url","name"],bn(n,o));const s=u(e,["config"]);return s!=null&&xE(s,t),t}function kE(n,e){const t={},o=u(e,["name"]);o!=null&&c(t,["_url","name"],bn(n,o));const s=u(e,["config"]);return s!=null&&AE(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RE extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Cr(Nn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=iE(this.apiClient,e);return p=Q("cachedContents",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>y)}else{const h=oE(this.apiClient,e);return p=Q("cachedContents",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>y)}}async get(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=pE(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>y)}else{const h=fE(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>y)}}async delete(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=aE(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=uE(y),w=new Qh;return Object.assign(w,T),w})}else{const h=sE(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=lE(y),w=new Qh;return Object.assign(w,T),w})}}async update(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=kE(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>y)}else{const h=IE(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>y)}}async listInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=TE(e);return p=Q("cachedContents",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=SE(y),w=new Zh;return Object.assign(w,T),w})}else{const h=vE(e);return p=Q("cachedContents",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=wE(y),w=new Zh;return Object.assign(w,T),w})}}}function im(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(n){return this instanceof Ge?(this.v=n,this):new Ge(n)}function ao(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(_){return function(A){return Promise.resolve(A).then(_,T)}}function p(_,A){o[_]&&(s[_]=function(k){return new Promise(function(N,B){a.push([_,k,N,B])>1||g(_,k)})},A&&(s[_]=A(s[_])))}function g(_,A){try{h(o[_](A))}catch(k){w(a[0][3],k)}}function h(_){_.value instanceof Ge?Promise.resolve(_.value.v).then(y,T):w(a[0][2],_)}function y(_){g("next",_)}function T(_){g("throw",_)}function w(_,A){_(A),a.shift(),a.length&&g(a[0][0],a[0][1])}}function fi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof im=="function"?im(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(a){t[a]=n[a]&&function(d){return new Promise(function(p,g){d=n[a](d),s(p,g,d.done,d.value)})}}function s(a,d,p,g){Promise.resolve(g).then(function(h){a({value:h,done:p})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NE(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ag(t)}function ag(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function PE(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function sm(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const s=[];let a=!0;for(;o<t&&n[o].role==="model";)s.push(n[o]),a&&!ag(n[o])&&(a=!1),o++;a?e.push(...s):e.pop()}return e}class bE{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ME(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let ME=class{constructor(e,t,o,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),PE(a)}async sendMessage(e){var t;await this.sendPromise;const o=gt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,d,p;const g=await s,h=(d=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content,y=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let w=[];y!=null&&(w=(p=y.slice(T))!==null&&p!==void 0?p:[]);const _=h?[h]:[];this.recordHistory(o,_,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const o=gt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,o)}getHistory(e=!1){const t=e?sm(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,s;return ao(this,arguments,function*(){var d,p,g,h;const y=[];try{for(var T=!0,w=fi(e),_;_=yield Ge(w.next()),d=_.done,!d;T=!0){h=_.value,T=!1;const A=h;if(NE(A)){const k=(s=(o=A.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;k!==void 0&&y.push(k)}yield yield Ge(A)}}catch(A){p={error:A}}finally{try{!T&&!d&&(g=w.return)&&(yield Ge(g.call(w)))}finally{if(p)throw p.error}}this.recordHistory(t,y)})}recordHistory(e,t,o){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...sm(o)):this.history.push(e),this.history.push(...s)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,oa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LE(n){const e={},t=u(n,["file"]);return t!=null&&c(e,["file"],t),e}function DE(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function UE(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["_url","file"],eg(t)),e}function FE(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function OE(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["_url","file"],eg(t)),e}function GE(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function qE(n){const e={},t=u(n,["config"]);return t!=null&&GE(t,e),e}function VE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let BE=class extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Cr(Nn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=qE(e);return a=Q("files",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>{const h=VE(g),y=new jw;return Object.assign(y,h),y})}}async createInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=LE(e);return a=Q("upload/v1beta/files",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=DE(g),y=new eS;return Object.assign(y,h),y})}}async get(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=OE(e);return a=Q("files/{file}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=UE(e);return a=Q("files/{file}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>{const h=FE(g),y=new tS;return Object.assign(y,h),y})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $s(n){const e={},t=u(n,["data"]);if(t!=null&&c(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function $E(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>o_(a))),c(e,["parts"],s)}const o=u(n,["role"]);return o!=null&&c(e,["role"],o),e}function HE(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function YE(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const a=u(n,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function WE(n){const e={},t=u(n,["modelSelectionConfig"]);t!=null&&c(e,["modelConfig"],t);const o=u(n,["responseJsonSchema"]);o!=null&&c(e,["responseJsonSchema"],o);const s=u(n,["audioTimestamp"]);s!=null&&c(e,["audioTimestamp"],s);const a=u(n,["candidateCount"]);a!=null&&c(e,["candidateCount"],a);const d=u(n,["enableAffectiveDialog"]);d!=null&&c(e,["enableAffectiveDialog"],d);const p=u(n,["frequencyPenalty"]);p!=null&&c(e,["frequencyPenalty"],p);const g=u(n,["logprobs"]);g!=null&&c(e,["logprobs"],g);const h=u(n,["maxOutputTokens"]);h!=null&&c(e,["maxOutputTokens"],h);const y=u(n,["mediaResolution"]);y!=null&&c(e,["mediaResolution"],y);const T=u(n,["presencePenalty"]);T!=null&&c(e,["presencePenalty"],T);const w=u(n,["responseLogprobs"]);w!=null&&c(e,["responseLogprobs"],w);const _=u(n,["responseMimeType"]);_!=null&&c(e,["responseMimeType"],_);const A=u(n,["responseModalities"]);A!=null&&c(e,["responseModalities"],A);const k=u(n,["responseSchema"]);k!=null&&c(e,["responseSchema"],k);const N=u(n,["routingConfig"]);N!=null&&c(e,["routingConfig"],N);const B=u(n,["seed"]);B!=null&&c(e,["seed"],B);const D=u(n,["speechConfig"]);D!=null&&c(e,["speechConfig"],lg(D));const F=u(n,["stopSequences"]);F!=null&&c(e,["stopSequences"],F);const U=u(n,["temperature"]);U!=null&&c(e,["temperature"],U);const H=u(n,["thinkingConfig"]);H!=null&&c(e,["thinkingConfig"],H);const O=u(n,["topK"]);O!=null&&c(e,["topK"],O);const q=u(n,["topP"]);if(q!=null&&c(e,["topP"],q),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zE(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=u(n,["enableWidget"]);return t!=null&&c(e,["enableWidget"],t),e}function JE(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],t),e}function KE(n,e){const t={},o=u(n,["generationConfig"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig"],o);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const a=u(n,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const p=u(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const h=u(n,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const T=u(n,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],dc(T));const w=u(n,["thinkingConfig"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","thinkingConfig"],w);const _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const A=u(n,["systemInstruction"]);e!==void 0&&A!=null&&c(e,["setup","systemInstruction"],$E(gt(A)));const k=u(n,["tools"]);if(e!==void 0&&k!=null){let O=mo(k);Array.isArray(O)&&(O=O.map(q=>s_(ho(q)))),c(e,["setup","tools"],O)}const N=u(n,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],i_(N));const B=u(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","inputAudioTranscription"],B);const D=u(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","outputAudioTranscription"],D);const F=u(n,["realtimeInputConfig"]);e!==void 0&&F!=null&&c(e,["setup","realtimeInputConfig"],F);const U=u(n,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],U);const H=u(n,["proactivity"]);return e!==void 0&&H!=null&&c(e,["setup","proactivity"],H),t}function XE(n,e){const t={},o=u(n,["generationConfig"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig"],WE(o));const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const a=u(n,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const p=u(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const h=u(n,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const T=u(n,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],lg(dc(T)));const w=u(n,["thinkingConfig"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","thinkingConfig"],w);const _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const A=u(n,["systemInstruction"]);e!==void 0&&A!=null&&c(e,["setup","systemInstruction"],gt(A));const k=u(n,["tools"]);if(e!==void 0&&k!=null){let O=mo(k);Array.isArray(O)&&(O=O.map(q=>a_(ho(q)))),c(e,["setup","tools"],O)}const N=u(n,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],N);const B=u(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","inputAudioTranscription"],B);const D=u(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","outputAudioTranscription"],D);const F=u(n,["realtimeInputConfig"]);e!==void 0&&F!=null&&c(e,["setup","realtimeInputConfig"],F);const U=u(n,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],U);const H=u(n,["proactivity"]);return e!==void 0&&H!=null&&c(e,["setup","proactivity"],H),t}function QE(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["setup","model"],Ie(n,o));const s=u(e,["config"]);return s!=null&&c(t,["config"],KE(s,t)),t}function ZE(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["setup","model"],Ie(n,o));const s=u(e,["config"]);return s!=null&&c(t,["config"],XE(s,t)),t}function jE(n){const e={},t=u(n,["musicGenerationConfig"]);return t!=null&&c(e,["musicGenerationConfig"],t),e}function e_(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["weightedPrompts"],o)}return e}function t_(n){const e={},t=u(n,["media"]);if(t!=null){let h=Km(t);Array.isArray(h)&&(h=h.map(y=>$s(y))),c(e,["mediaChunks"],h)}const o=u(n,["audio"]);o!=null&&c(e,["audio"],$s(Qm(o)));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const a=u(n,["video"]);a!=null&&c(e,["video"],$s(Xm(a)));const d=u(n,["text"]);d!=null&&c(e,["text"],d);const p=u(n,["activityStart"]);p!=null&&c(e,["activityStart"],p);const g=u(n,["activityEnd"]);return g!=null&&c(e,["activityEnd"],g),e}function n_(n){const e={},t=u(n,["media"]);if(t!=null){let h=Km(t);Array.isArray(h)&&(h=h.map(y=>y)),c(e,["mediaChunks"],h)}const o=u(n,["audio"]);o!=null&&c(e,["audio"],Qm(o));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const a=u(n,["video"]);a!=null&&c(e,["video"],Xm(a));const d=u(n,["text"]);d!=null&&c(e,["text"],d);const p=u(n,["activityStart"]);p!=null&&c(e,["activityStart"],p);const g=u(n,["activityEnd"]);return g!=null&&c(e,["activityEnd"],g),e}function r_(n){const e={},t=u(n,["setupComplete"]);t!=null&&c(e,["setupComplete"],t);const o=u(n,["serverContent"]);o!=null&&c(e,["serverContent"],o);const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],s);const a=u(n,["toolCallCancellation"]);a!=null&&c(e,["toolCallCancellation"],a);const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],l_(d));const p=u(n,["goAway"]);p!=null&&c(e,["goAway"],p);const g=u(n,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],g),e}function o_(n){const e={},t=u(n,["functionCall"]);t!=null&&c(e,["functionCall"],t);const o=u(n,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);const s=u(n,["executableCode"]);s!=null&&c(e,["executableCode"],s);const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],HE(a));const d=u(n,["functionResponse"]);d!=null&&c(e,["functionResponse"],d);const p=u(n,["inlineData"]);p!=null&&c(e,["inlineData"],$s(p));const g=u(n,["text"]);g!=null&&c(e,["text"],g);const h=u(n,["thought"]);h!=null&&c(e,["thought"],h);const y=u(n,["thoughtSignature"]);y!=null&&c(e,["thoughtSignature"],y);const T=u(n,["videoMetadata"]);return T!=null&&c(e,["videoMetadata"],T),e}function i_(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lg(n){const e={},t=u(n,["languageCode"]);t!=null&&c(e,["languageCode"],t);const o=u(n,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],o),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function s_(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(n,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const s=u(n,["computerUse"]);s!=null&&c(e,["computerUse"],s);const a=u(n,["fileSearch"]);a!=null&&c(e,["fileSearch"],a);const d=u(n,["codeExecution"]);if(d!=null&&c(e,["codeExecution"],d),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],zE(p));const g=u(n,["googleSearch"]);g!=null&&c(e,["googleSearch"],JE(g));const h=u(n,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function a_(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(w=>YE(w))),c(e,["functionDeclarations"],T)}const o=u(n,["retrieval"]);o!=null&&c(e,["retrieval"],o);const s=u(n,["googleSearchRetrieval"]);s!=null&&c(e,["googleSearchRetrieval"],s);const a=u(n,["computerUse"]);if(a!=null&&c(e,["computerUse"],a),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=u(n,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const p=u(n,["enterpriseWebSearch"]);p!=null&&c(e,["enterpriseWebSearch"],p);const g=u(n,["googleMaps"]);g!=null&&c(e,["googleMaps"],g);const h=u(n,["googleSearch"]);h!=null&&c(e,["googleSearch"],h);const y=u(n,["urlContext"]);return y!=null&&c(e,["urlContext"],y),e}function l_(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const o=u(n,["cachedContentTokenCount"]);o!=null&&c(e,["cachedContentTokenCount"],o);const s=u(n,["candidatesTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const a=u(n,["toolUsePromptTokenCount"]);a!=null&&c(e,["toolUsePromptTokenCount"],a);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const p=u(n,["totalTokenCount"]);p!=null&&c(e,["totalTokenCount"],p);const g=u(n,["promptTokensDetails"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(A=>A)),c(e,["promptTokensDetails"],_)}const h=u(n,["cacheTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(A=>A)),c(e,["cacheTokensDetails"],_)}const y=u(n,["candidatesTokensDetails"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(A=>A)),c(e,["responseTokensDetails"],_)}const T=u(n,["toolUsePromptTokensDetails"]);if(T!=null){let _=T;Array.isArray(_)&&(_=_.map(A=>A)),c(e,["toolUsePromptTokensDetails"],_)}const w=u(n,["trafficType"]);return w!=null&&c(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u_(n){const e={},t=u(n,["data"]);if(t!=null&&c(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function c_(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],t);const o=u(n,["citationMetadata"]);o!=null&&c(e,["citationMetadata"],d_(o));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const a=u(n,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(n,["avgLogprobs"]);d!=null&&c(e,["avgLogprobs"],d);const p=u(n,["groundingMetadata"]);p!=null&&c(e,["groundingMetadata"],p);const g=u(n,["index"]);g!=null&&c(e,["index"],g);const h=u(n,["logprobsResult"]);h!=null&&c(e,["logprobsResult"],h);const y=u(n,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(_=>_)),c(e,["safetyRatings"],w)}const T=u(n,["urlContextMetadata"]);return T!=null&&c(e,["urlContextMetadata"],T),e}function d_(n){const e={},t=u(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["citations"],o)}return e}function f_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let a=Jt(s);Array.isArray(a)&&(a=a.map(d=>d)),c(t,["contents"],a)}return t}function p_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),c(e,["tokensInfo"],s)}return e}function h_(n){const e={},t=u(n,["values"]);t!=null&&c(e,["values"],t);const o=u(n,["statistics"]);return o!=null&&c(e,["statistics"],m_(o)),e}function m_(n){const e={},t=u(n,["truncated"]);t!=null&&c(e,["truncated"],t);const o=u(n,["token_count"]);return o!=null&&c(e,["tokenCount"],o),e}function ia(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>w0(a))),c(e,["parts"],s)}const o=u(n,["role"]);return o!=null&&c(e,["role"],o),e}function g_(n){const e={},t=u(n,["controlType"]);t!=null&&c(e,["controlType"],t);const o=u(n,["enableControlImageComputation"]);return o!=null&&c(e,["computeControl"],o),e}function y_(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function v_(n,e){const t={},o=u(n,["systemInstruction"]);e!==void 0&&o!=null&&c(e,["systemInstruction"],gt(o));const s=u(n,["tools"]);if(e!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>pg(p))),c(e,["tools"],d)}const a=u(n,["generationConfig"]);return e!==void 0&&a!=null&&c(e,["generationConfig"],a0(a)),t}function T_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let d=Jt(s);Array.isArray(d)&&(d=d.map(p=>ia(p))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&y_(a),t}function w_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let d=Jt(s);Array.isArray(d)&&(d=d.map(p=>p)),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&v_(a,t),t}function S_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["totalTokens"]);o!=null&&c(e,["totalTokens"],o);const s=u(n,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function E_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["totalTokens"]);return o!=null&&c(e,["totalTokens"],o),e}function __(n,e){const t={},o=u(e,["model"]);return o!=null&&c(t,["_url","name"],Ie(n,o)),t}function C_(n,e){const t={},o=u(e,["model"]);return o!=null&&c(t,["_url","name"],Ie(n,o)),t}function x_(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function A_(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function I_(n,e){const t={},o=u(n,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const a=u(n,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const p=u(n,["guidanceScale"]);e!==void 0&&p!=null&&c(e,["parameters","guidanceScale"],p);const g=u(n,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const y=u(n,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const T=u(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const w=u(n,["includeRaiReason"]);e!==void 0&&w!=null&&c(e,["parameters","includeRaiReason"],w);const _=u(n,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const A=u(n,["outputMimeType"]);e!==void 0&&A!=null&&c(e,["parameters","outputOptions","mimeType"],A);const k=u(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&c(e,["parameters","outputOptions","compressionQuality"],k);const N=u(n,["addWatermark"]);e!==void 0&&N!=null&&c(e,["parameters","addWatermark"],N);const B=u(n,["labels"]);e!==void 0&&B!=null&&c(e,["labels"],B);const D=u(n,["editMode"]);e!==void 0&&D!=null&&c(e,["parameters","editMode"],D);const F=u(n,["baseSteps"]);return e!==void 0&&F!=null&&c(e,["parameters","editConfig","baseSteps"],F),t}function k_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const a=u(e,["referenceImages"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(g=>A0(g))),c(t,["instances[0]","referenceImages"],p)}const d=u(e,["config"]);return d!=null&&I_(d,t),t}function R_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>sa(a))),c(e,["generatedImages"],s)}return e}function N_(n,e){const t={},o=u(n,["taskType"]);e!==void 0&&o!=null&&c(e,["requests[]","taskType"],o);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const a=u(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&c(e,["requests[]","outputDimensionality"],a),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function P_(n,e){const t={},o=u(n,["taskType"]);e!==void 0&&o!=null&&c(e,["instances[]","task_type"],o);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["instances[]","title"],s);const a=u(n,["outputDimensionality"]);e!==void 0&&a!=null&&c(e,["parameters","outputDimensionality"],a);const d=u(n,["mimeType"]);e!==void 0&&d!=null&&c(e,["instances[]","mimeType"],d);const p=u(n,["autoTruncate"]);return e!==void 0&&p!=null&&c(e,["parameters","autoTruncate"],p),t}function b_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let p=lc(n,s);Array.isArray(p)&&(p=p.map(g=>g)),c(t,["requests[]","content"],p)}const a=u(e,["config"]);a!=null&&N_(a,t);const d=u(e,["model"]);return d!==void 0&&c(t,["requests[]","model"],Ie(n,d)),t}function M_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let d=lc(n,s);Array.isArray(d)&&(d=d.map(p=>p)),c(t,["instances[]","content"],d)}const a=u(e,["config"]);return a!=null&&P_(a,t),t}function L_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["embeddings"],a)}const s=u(n,["metadata"]);return s!=null&&c(e,["metadata"],s),e}function D_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>h_(d))),c(e,["embeddings"],a)}const s=u(n,["metadata"]);return s!=null&&c(e,["metadata"],s),e}function U_(n){const e={},t=u(n,["endpoint"]);t!=null&&c(e,["name"],t);const o=u(n,["deployedModelId"]);return o!=null&&c(e,["deployedModelId"],o),e}function F_(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function O_(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const o=u(n,["name"]);o!=null&&c(e,["name"],o);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const a=u(n,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const p=u(n,["responseJsonSchema"]);return p!=null&&c(e,["responseJsonSchema"],p),e}function G_(n,e,t){const o={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],ia(gt(s)));const a=u(e,["temperature"]);a!=null&&c(o,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(o,["topP"],d);const p=u(e,["topK"]);p!=null&&c(o,["topK"],p);const g=u(e,["candidateCount"]);g!=null&&c(o,["candidateCount"],g);const h=u(e,["maxOutputTokens"]);h!=null&&c(o,["maxOutputTokens"],h);const y=u(e,["stopSequences"]);y!=null&&c(o,["stopSequences"],y);const T=u(e,["responseLogprobs"]);T!=null&&c(o,["responseLogprobs"],T);const w=u(e,["logprobs"]);w!=null&&c(o,["logprobs"],w);const _=u(e,["presencePenalty"]);_!=null&&c(o,["presencePenalty"],_);const A=u(e,["frequencyPenalty"]);A!=null&&c(o,["frequencyPenalty"],A);const k=u(e,["seed"]);k!=null&&c(o,["seed"],k);const N=u(e,["responseMimeType"]);N!=null&&c(o,["responseMimeType"],N);const B=u(e,["responseSchema"]);B!=null&&c(o,["responseSchema"],uc(B));const D=u(e,["responseJsonSchema"]);if(D!=null&&c(o,["responseJsonSchema"],D),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=u(e,["safetySettings"]);if(t!==void 0&&F!=null){let me=F;Array.isArray(me)&&(me=me.map(Ee=>I0(Ee))),c(t,["safetySettings"],me)}const U=u(e,["tools"]);if(t!==void 0&&U!=null){let me=mo(U);Array.isArray(me)&&(me=me.map(Ee=>M0(ho(Ee)))),c(t,["tools"],me)}const H=u(e,["toolConfig"]);if(t!==void 0&&H!=null&&c(t,["toolConfig"],H),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=u(e,["cachedContent"]);t!==void 0&&O!=null&&c(t,["cachedContent"],bn(n,O));const q=u(e,["responseModalities"]);q!=null&&c(o,["responseModalities"],q);const ie=u(e,["mediaResolution"]);ie!=null&&c(o,["mediaResolution"],ie);const z=u(e,["speechConfig"]);if(z!=null&&c(o,["speechConfig"],cc(z)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=u(e,["thinkingConfig"]);J!=null&&c(o,["thinkingConfig"],J);const te=u(e,["imageConfig"]);return te!=null&&c(o,["imageConfig"],te),o}function q_(n,e,t){const o={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],gt(s));const a=u(e,["temperature"]);a!=null&&c(o,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(o,["topP"],d);const p=u(e,["topK"]);p!=null&&c(o,["topK"],p);const g=u(e,["candidateCount"]);g!=null&&c(o,["candidateCount"],g);const h=u(e,["maxOutputTokens"]);h!=null&&c(o,["maxOutputTokens"],h);const y=u(e,["stopSequences"]);y!=null&&c(o,["stopSequences"],y);const T=u(e,["responseLogprobs"]);T!=null&&c(o,["responseLogprobs"],T);const w=u(e,["logprobs"]);w!=null&&c(o,["logprobs"],w);const _=u(e,["presencePenalty"]);_!=null&&c(o,["presencePenalty"],_);const A=u(e,["frequencyPenalty"]);A!=null&&c(o,["frequencyPenalty"],A);const k=u(e,["seed"]);k!=null&&c(o,["seed"],k);const N=u(e,["responseMimeType"]);N!=null&&c(o,["responseMimeType"],N);const B=u(e,["responseSchema"]);B!=null&&c(o,["responseSchema"],uc(B));const D=u(e,["responseJsonSchema"]);D!=null&&c(o,["responseJsonSchema"],D);const F=u(e,["routingConfig"]);F!=null&&c(o,["routingConfig"],F);const U=u(e,["modelSelectionConfig"]);U!=null&&c(o,["modelConfig"],U);const H=u(e,["safetySettings"]);if(t!==void 0&&H!=null){let be=H;Array.isArray(be)&&(be=be.map(ke=>ke)),c(t,["safetySettings"],be)}const O=u(e,["tools"]);if(t!==void 0&&O!=null){let be=mo(O);Array.isArray(be)&&(be=be.map(ke=>pg(ho(ke)))),c(t,["tools"],be)}const q=u(e,["toolConfig"]);t!==void 0&&q!=null&&c(t,["toolConfig"],q);const ie=u(e,["labels"]);t!==void 0&&ie!=null&&c(t,["labels"],ie);const z=u(e,["cachedContent"]);t!==void 0&&z!=null&&c(t,["cachedContent"],bn(n,z));const J=u(e,["responseModalities"]);J!=null&&c(o,["responseModalities"],J);const te=u(e,["mediaResolution"]);te!=null&&c(o,["mediaResolution"],te);const me=u(e,["speechConfig"]);me!=null&&c(o,["speechConfig"],fg(cc(me)));const Ee=u(e,["audioTimestamp"]);Ee!=null&&c(o,["audioTimestamp"],Ee);const Ye=u(e,["thinkingConfig"]);Ye!=null&&c(o,["thinkingConfig"],Ye);const Ke=u(e,["imageConfig"]);return Ke!=null&&c(o,["imageConfig"],Ke),o}function am(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let d=Jt(s);Array.isArray(d)&&(d=d.map(p=>ia(p))),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["generationConfig"],G_(n,a,t)),t}function lm(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["contents"]);if(s!=null){let d=Jt(s);Array.isArray(d)&&(d=d.map(p=>p)),c(t,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(t,["generationConfig"],q_(n,a,t)),t}function um(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(h=>c_(h))),c(e,["candidates"],g)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const a=u(n,["promptFeedback"]);a!=null&&c(e,["promptFeedback"],a);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const p=u(n,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function cm(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(y=>y)),c(e,["candidates"],h)}const s=u(n,["createTime"]);s!=null&&c(e,["createTime"],s);const a=u(n,["modelVersion"]);a!=null&&c(e,["modelVersion"],a);const d=u(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const p=u(n,["responseId"]);p!=null&&c(e,["responseId"],p);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function V_(n,e){const t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=u(n,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const a=u(n,["guidanceScale"]);if(e!==void 0&&a!=null&&c(e,["parameters","guidanceScale"],a),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const p=u(n,["personGeneration"]);e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p);const g=u(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&c(e,["parameters","includeSafetyAttributes"],g);const h=u(n,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const y=u(n,["language"]);e!==void 0&&y!=null&&c(e,["parameters","language"],y);const T=u(n,["outputMimeType"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","mimeType"],T);const w=u(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&c(e,["parameters","outputOptions","compressionQuality"],w),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=u(n,["imageSize"]);if(e!==void 0&&_!=null&&c(e,["parameters","sampleImageSize"],_),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function B_(n,e){const t={},o=u(n,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const a=u(n,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const p=u(n,["guidanceScale"]);e!==void 0&&p!=null&&c(e,["parameters","guidanceScale"],p);const g=u(n,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const y=u(n,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const T=u(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const w=u(n,["includeRaiReason"]);e!==void 0&&w!=null&&c(e,["parameters","includeRaiReason"],w);const _=u(n,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const A=u(n,["outputMimeType"]);e!==void 0&&A!=null&&c(e,["parameters","outputOptions","mimeType"],A);const k=u(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&c(e,["parameters","outputOptions","compressionQuality"],k);const N=u(n,["addWatermark"]);e!==void 0&&N!=null&&c(e,["parameters","addWatermark"],N);const B=u(n,["labels"]);e!==void 0&&B!=null&&c(e,["labels"],B);const D=u(n,["imageSize"]);e!==void 0&&D!=null&&c(e,["parameters","sampleImageSize"],D);const F=u(n,["enhancePrompt"]);return e!==void 0&&F!=null&&c(e,["parameters","enhancePrompt"],F),t}function $_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const a=u(e,["config"]);return a!=null&&V_(a,t),t}function H_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const a=u(e,["config"]);return a!=null&&B_(a,t),t}function Y_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>r0(d))),c(e,["generatedImages"],a)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],cg(s)),e}function W_(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>sa(d))),c(e,["generatedImages"],a)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],dg(s)),e}function z_(n,e){const t={},o=u(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(n,["durationSeconds"]);if(e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(n,["aspectRatio"]);e!==void 0&&a!=null&&c(e,["parameters","aspectRatio"],a);const d=u(n,["resolution"]);e!==void 0&&d!=null&&c(e,["parameters","resolution"],d);const p=u(n,["personGeneration"]);if(e!==void 0&&p!=null&&c(e,["parameters","personGeneration"],p),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=u(n,["negativePrompt"]);e!==void 0&&g!=null&&c(e,["parameters","negativePrompt"],g);const h=u(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=u(n,["lastFrame"]);e!==void 0&&y!=null&&c(e,["instances[0]","lastFrame"],aa(y));const T=u(n,["referenceImages"]);if(e!==void 0&&T!=null){let w=T;Array.isArray(w)&&(w=w.map(_=>W0(_))),c(e,["instances[0]","referenceImages"],w)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function J_(n,e){const t={},o=u(n,["numberOfVideos"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const a=u(n,["fps"]);e!==void 0&&a!=null&&c(e,["parameters","fps"],a);const d=u(n,["durationSeconds"]);e!==void 0&&d!=null&&c(e,["parameters","durationSeconds"],d);const p=u(n,["seed"]);e!==void 0&&p!=null&&c(e,["parameters","seed"],p);const g=u(n,["aspectRatio"]);e!==void 0&&g!=null&&c(e,["parameters","aspectRatio"],g);const h=u(n,["resolution"]);e!==void 0&&h!=null&&c(e,["parameters","resolution"],h);const y=u(n,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const T=u(n,["pubsubTopic"]);e!==void 0&&T!=null&&c(e,["parameters","pubsubTopic"],T);const w=u(n,["negativePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","negativePrompt"],w);const _=u(n,["enhancePrompt"]);e!==void 0&&_!=null&&c(e,["parameters","enhancePrompt"],_);const A=u(n,["generateAudio"]);e!==void 0&&A!=null&&c(e,["parameters","generateAudio"],A);const k=u(n,["lastFrame"]);e!==void 0&&k!=null&&c(e,["instances[0]","lastFrame"],sn(k));const N=u(n,["referenceImages"]);if(e!==void 0&&N!=null){let F=N;Array.isArray(F)&&(F=F.map(U=>z0(U))),c(e,["instances[0]","referenceImages"],F)}const B=u(n,["mask"]);e!==void 0&&B!=null&&c(e,["instances[0]","mask"],Y0(B));const D=u(n,["compressionQuality"]);return e!==void 0&&D!=null&&c(e,["parameters","compressionQuality"],D),t}function K_(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],j_(d)),e}function X_(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],e0(d)),e}function Q_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const a=u(e,["image"]);a!=null&&c(t,["instances[0]","image"],aa(a));const d=u(e,["video"]);d!=null&&c(t,["instances[0]","video"],hg(d));const p=u(e,["source"]);p!=null&&t0(p,t);const g=u(e,["config"]);return g!=null&&z_(g,t),t}function Z_(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const a=u(e,["image"]);a!=null&&c(t,["instances[0]","image"],sn(a));const d=u(e,["video"]);d!=null&&c(t,["instances[0]","video"],mg(d));const p=u(e,["source"]);p!=null&&n0(p,t);const g=u(e,["config"]);return g!=null&&J_(g,t),t}function j_(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>i0(d))),c(e,["generatedVideos"],a)}const o=u(n,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function e0(n){const e={},t=u(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>s0(d))),c(e,["generatedVideos"],a)}const o=u(n,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function t0(n,e){const t={},o=u(n,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],aa(s));const a=u(n,["video"]);return e!==void 0&&a!=null&&c(e,["instances[0]","video"],hg(a)),t}function n0(n,e){const t={},o=u(n,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],sn(s));const a=u(n,["video"]);return e!==void 0&&a!=null&&c(e,["instances[0]","video"],mg(a)),t}function r0(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],f0(t));const o=u(n,["raiFilteredReason"]);o!=null&&c(e,["raiFilteredReason"],o);const s=u(n,["_self"]);return s!=null&&c(e,["safetyAttributes"],cg(s)),e}function sa(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],ug(t));const o=u(n,["raiFilteredReason"]);o!=null&&c(e,["raiFilteredReason"],o);const s=u(n,["_self"]);s!=null&&c(e,["safetyAttributes"],dg(s));const a=u(n,["prompt"]);return a!=null&&c(e,["enhancedPrompt"],a),e}function o0(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["mask"],ug(t));const o=u(n,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),c(e,["labels"],s)}return e}function i0(n){const e={},t=u(n,["video"]);return t!=null&&c(e,["video"],$0(t)),e}function s0(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],H0(t)),e}function a0(n){const e={},t=u(n,["modelSelectionConfig"]);t!=null&&c(e,["modelConfig"],t);const o=u(n,["responseJsonSchema"]);o!=null&&c(e,["responseJsonSchema"],o);const s=u(n,["audioTimestamp"]);s!=null&&c(e,["audioTimestamp"],s);const a=u(n,["candidateCount"]);a!=null&&c(e,["candidateCount"],a);const d=u(n,["enableAffectiveDialog"]);d!=null&&c(e,["enableAffectiveDialog"],d);const p=u(n,["frequencyPenalty"]);p!=null&&c(e,["frequencyPenalty"],p);const g=u(n,["logprobs"]);g!=null&&c(e,["logprobs"],g);const h=u(n,["maxOutputTokens"]);h!=null&&c(e,["maxOutputTokens"],h);const y=u(n,["mediaResolution"]);y!=null&&c(e,["mediaResolution"],y);const T=u(n,["presencePenalty"]);T!=null&&c(e,["presencePenalty"],T);const w=u(n,["responseLogprobs"]);w!=null&&c(e,["responseLogprobs"],w);const _=u(n,["responseMimeType"]);_!=null&&c(e,["responseMimeType"],_);const A=u(n,["responseModalities"]);A!=null&&c(e,["responseModalities"],A);const k=u(n,["responseSchema"]);k!=null&&c(e,["responseSchema"],k);const N=u(n,["routingConfig"]);N!=null&&c(e,["routingConfig"],N);const B=u(n,["seed"]);B!=null&&c(e,["seed"],B);const D=u(n,["speechConfig"]);D!=null&&c(e,["speechConfig"],fg(D));const F=u(n,["stopSequences"]);F!=null&&c(e,["stopSequences"],F);const U=u(n,["temperature"]);U!=null&&c(e,["temperature"],U);const H=u(n,["thinkingConfig"]);H!=null&&c(e,["thinkingConfig"],H);const O=u(n,["topK"]);O!=null&&c(e,["topK"],O);const q=u(n,["topP"]);if(q!=null&&c(e,["topP"],q),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function l0(n,e){const t={},o=u(e,["model"]);return o!=null&&c(t,["_url","name"],Ie(n,o)),t}function u0(n,e){const t={},o=u(e,["model"]);return o!=null&&c(t,["_url","name"],Ie(n,o)),t}function c0(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=u(n,["enableWidget"]);return t!=null&&c(e,["enableWidget"],t),e}function d0(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],t),e}function f0(n){const e={},t=u(n,["bytesBase64Encoded"]);t!=null&&c(e,["imageBytes"],rr(t));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function ug(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const o=u(n,["bytesBase64Encoded"]);o!=null&&c(e,["imageBytes"],rr(o));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function aa(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["imageBytes"]);t!=null&&c(e,["bytesBase64Encoded"],rr(t));const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function sn(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const o=u(n,["imageBytes"]);o!=null&&c(e,["bytesBase64Encoded"],rr(o));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function p0(n,e,t){const o={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const p=u(e,["queryBase"]);return t!==void 0&&p!=null&&c(t,["_url","models_url"],tg(n,p)),o}function h0(n,e,t){const o={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const a=u(e,["pageToken"]);t!==void 0&&a!=null&&c(t,["_query","pageToken"],a);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const p=u(e,["queryBase"]);return t!==void 0&&p!=null&&c(t,["_url","models_url"],tg(n,p)),o}function m0(n,e){const t={},o=u(e,["config"]);return o!=null&&p0(n,o,t),t}function g0(n,e){const t={},o=u(e,["config"]);return o!=null&&h0(n,o,t),t}function y0(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["_self"]);if(s!=null){let a=ng(s);Array.isArray(a)&&(a=a.map(d=>Gu(d))),c(e,["models"],a)}return e}function v0(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["_self"]);if(s!=null){let a=ng(s);Array.isArray(a)&&(a=a.map(d=>qu(d))),c(e,["models"],a)}return e}function T0(n){const e={},t=u(n,["maskMode"]);t!=null&&c(e,["maskMode"],t);const o=u(n,["segmentationClasses"]);o!=null&&c(e,["maskClasses"],o);const s=u(n,["maskDilation"]);return s!=null&&c(e,["dilation"],s),e}function Gu(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const a=u(n,["version"]);a!=null&&c(e,["version"],a);const d=u(n,["_self"]);d!=null&&c(e,["tunedModelInfo"],L0(d));const p=u(n,["inputTokenLimit"]);p!=null&&c(e,["inputTokenLimit"],p);const g=u(n,["outputTokenLimit"]);g!=null&&c(e,["outputTokenLimit"],g);const h=u(n,["supportedGenerationMethods"]);h!=null&&c(e,["supportedActions"],h);const y=u(n,["temperature"]);y!=null&&c(e,["temperature"],y);const T=u(n,["maxTemperature"]);T!=null&&c(e,["maxTemperature"],T);const w=u(n,["topP"]);w!=null&&c(e,["topP"],w);const _=u(n,["topK"]);_!=null&&c(e,["topK"],_);const A=u(n,["thinking"]);return A!=null&&c(e,["thinking"],A),e}function qu(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["displayName"]);o!=null&&c(e,["displayName"],o);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const a=u(n,["versionId"]);a!=null&&c(e,["version"],a);const d=u(n,["deployedModels"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(w=>U_(w))),c(e,["endpoints"],T)}const p=u(n,["labels"]);p!=null&&c(e,["labels"],p);const g=u(n,["_self"]);g!=null&&c(e,["tunedModelInfo"],D0(g));const h=u(n,["defaultCheckpointId"]);h!=null&&c(e,["defaultCheckpointId"],h);const y=u(n,["checkpoints"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),c(e,["checkpoints"],T)}return e}function w0(n){const e={},t=u(n,["functionCall"]);t!=null&&c(e,["functionCall"],t);const o=u(n,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);const s=u(n,["executableCode"]);s!=null&&c(e,["executableCode"],s);const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],F_(a));const d=u(n,["functionResponse"]);d!=null&&c(e,["functionResponse"],d);const p=u(n,["inlineData"]);p!=null&&c(e,["inlineData"],u_(p));const g=u(n,["text"]);g!=null&&c(e,["text"],g);const h=u(n,["thought"]);h!=null&&c(e,["thought"],h);const y=u(n,["thoughtSignature"]);y!=null&&c(e,["thoughtSignature"],y);const T=u(n,["videoMetadata"]);return T!=null&&c(e,["videoMetadata"],T),e}function S0(n){const e={},t=u(n,["productImage"]);return t!=null&&c(e,["image"],sn(t)),e}function E0(n,e){const t={},o=u(n,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=u(n,["baseSteps"]);e!==void 0&&s!=null&&c(e,["parameters","baseSteps"],s);const a=u(n,["outputGcsUri"]);e!==void 0&&a!=null&&c(e,["parameters","storageUri"],a);const d=u(n,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const g=u(n,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const h=u(n,["addWatermark"]);e!==void 0&&h!=null&&c(e,["parameters","addWatermark"],h);const y=u(n,["outputMimeType"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","mimeType"],y);const T=u(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","compressionQuality"],T);const w=u(n,["enhancePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","enhancePrompt"],w);const _=u(n,["labels"]);return e!==void 0&&_!=null&&c(e,["labels"],_),t}function _0(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["source"]);s!=null&&x0(s,t);const a=u(e,["config"]);return a!=null&&E0(a,t),t}function C0(n){const e={},t=u(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>sa(s))),c(e,["generatedImages"],o)}return e}function x0(n,e){const t={},o=u(n,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);const s=u(n,["personImage"]);e!==void 0&&s!=null&&c(e,["instances[0]","personImage","image"],sn(s));const a=u(n,["productImages"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>S0(p))),c(e,["instances[0]","productImages"],d)}return t}function A0(n){const e={},t=u(n,["referenceImage"]);t!=null&&c(e,["referenceImage"],sn(t));const o=u(n,["referenceId"]);o!=null&&c(e,["referenceId"],o);const s=u(n,["referenceType"]);s!=null&&c(e,["referenceType"],s);const a=u(n,["maskImageConfig"]);a!=null&&c(e,["maskImageConfig"],T0(a));const d=u(n,["controlImageConfig"]);d!=null&&c(e,["controlImageConfig"],g_(d));const p=u(n,["styleImageConfig"]);p!=null&&c(e,["styleImageConfig"],p);const g=u(n,["subjectImageConfig"]);return g!=null&&c(e,["subjectImageConfig"],g),e}function cg(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const o=u(n,["safetyAttributes","scores"]);o!=null&&c(e,["scores"],o);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function dg(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const o=u(n,["safetyAttributes","scores"]);o!=null&&c(e,["scores"],o);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function I0(n){const e={},t=u(n,["category"]);if(t!=null&&c(e,["category"],t),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=u(n,["threshold"]);return o!=null&&c(e,["threshold"],o),e}function k0(n){const e={},t=u(n,["image"]);return t!=null&&c(e,["image"],sn(t)),e}function R0(n,e){const t={},o=u(n,["mode"]);e!==void 0&&o!=null&&c(e,["parameters","mode"],o);const s=u(n,["maxPredictions"]);e!==void 0&&s!=null&&c(e,["parameters","maxPredictions"],s);const a=u(n,["confidenceThreshold"]);e!==void 0&&a!=null&&c(e,["parameters","confidenceThreshold"],a);const d=u(n,["maskDilation"]);e!==void 0&&d!=null&&c(e,["parameters","maskDilation"],d);const p=u(n,["binaryColorThreshold"]);e!==void 0&&p!=null&&c(e,["parameters","binaryColorThreshold"],p);const g=u(n,["labels"]);return e!==void 0&&g!=null&&c(e,["labels"],g),t}function N0(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["source"]);s!=null&&b0(s,t);const a=u(e,["config"]);return a!=null&&R0(a,t),t}function P0(n){const e={},t=u(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>o0(s))),c(e,["generatedMasks"],o)}return e}function b0(n,e){const t={},o=u(n,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],sn(s));const a=u(n,["scribbleImage"]);return e!==void 0&&a!=null&&c(e,["instances[0]","scribble"],k0(a)),t}function fg(n){const e={},t=u(n,["languageCode"]);t!=null&&c(e,["languageCode"],t);const o=u(n,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],o),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function M0(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(n,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const s=u(n,["computerUse"]);s!=null&&c(e,["computerUse"],s);const a=u(n,["fileSearch"]);a!=null&&c(e,["fileSearch"],a);const d=u(n,["codeExecution"]);if(d!=null&&c(e,["codeExecution"],d),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],c0(p));const g=u(n,["googleSearch"]);g!=null&&c(e,["googleSearch"],d0(g));const h=u(n,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function pg(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(w=>O_(w))),c(e,["functionDeclarations"],T)}const o=u(n,["retrieval"]);o!=null&&c(e,["retrieval"],o);const s=u(n,["googleSearchRetrieval"]);s!=null&&c(e,["googleSearchRetrieval"],s);const a=u(n,["computerUse"]);if(a!=null&&c(e,["computerUse"],a),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=u(n,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const p=u(n,["enterpriseWebSearch"]);p!=null&&c(e,["enterpriseWebSearch"],p);const g=u(n,["googleMaps"]);g!=null&&c(e,["googleMaps"],g);const h=u(n,["googleSearch"]);h!=null&&c(e,["googleSearch"],h);const y=u(n,["urlContext"]);return y!=null&&c(e,["urlContext"],y),e}function L0(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const o=u(n,["createTime"]);o!=null&&c(e,["createTime"],o);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function D0(n){const e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&c(e,["baseModel"],t);const o=u(n,["createTime"]);o!=null&&c(e,["createTime"],o);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function U0(n,e){const t={},o=u(n,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const a=u(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&c(e,["defaultCheckpointId"],a),t}function F0(n,e){const t={},o=u(n,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const a=u(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&c(e,["defaultCheckpointId"],a),t}function O0(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","name"],Ie(n,o));const s=u(e,["config"]);return s!=null&&U0(s,t),t}function G0(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["config"]);return s!=null&&F0(s,t),t}function q0(n,e){const t={},o=u(n,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=u(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&c(e,["parameters","safetySetting"],s);const a=u(n,["personGeneration"]);e!==void 0&&a!=null&&c(e,["parameters","personGeneration"],a);const d=u(n,["includeRaiReason"]);e!==void 0&&d!=null&&c(e,["parameters","includeRaiReason"],d);const p=u(n,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const g=u(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&c(e,["parameters","outputOptions","compressionQuality"],g);const h=u(n,["enhanceInputImage"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=u(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const T=u(n,["labels"]);e!==void 0&&T!=null&&c(e,["labels"],T);const w=u(n,["numberOfImages"]);e!==void 0&&w!=null&&c(e,["parameters","sampleCount"],w);const _=u(n,["mode"]);return e!==void 0&&_!=null&&c(e,["parameters","mode"],_),t}function V0(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["_url","model"],Ie(n,o));const s=u(e,["image"]);s!=null&&c(t,["instances[0]","image"],sn(s));const a=u(e,["upscaleFactor"]);a!=null&&c(t,["parameters","upscaleConfig","upscaleFactor"],a);const d=u(e,["config"]);return d!=null&&q0(d,t),t}function B0(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>sa(a))),c(e,["generatedImages"],s)}return e}function $0(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["uri"],t);const o=u(n,["encodedVideo"]);o!=null&&c(e,["videoBytes"],rr(o));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function H0(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const o=u(n,["bytesBase64Encoded"]);o!=null&&c(e,["videoBytes"],rr(o));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Y0(n){const e={},t=u(n,["image"]);t!=null&&c(e,["_self"],sn(t));const o=u(n,["maskMode"]);return o!=null&&c(e,["maskMode"],o),e}function W0(n){const e={},t=u(n,["image"]);t!=null&&c(e,["image"],aa(t));const o=u(n,["referenceType"]);return o!=null&&c(e,["referenceType"],o),e}function z0(n){const e={},t=u(n,["image"]);t!=null&&c(e,["image"],sn(t));const o=u(n,["referenceType"]);return o!=null&&c(e,["referenceType"],o),e}function hg(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["uri"],t);const o=u(n,["videoBytes"]);o!=null&&c(e,["encodedVideo"],rr(o));const s=u(n,["mimeType"]);return s!=null&&c(e,["encoding"],s),e}function mg(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["gcsUri"],t);const o=u(n,["videoBytes"]);o!=null&&c(e,["bytesBase64Encoded"],rr(o));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J0="Content-Type",K0="X-Server-Timeout",X0="User-Agent",Vu="x-goog-api-client",Q0="1.29.1",Z0=`google-genai-sdk/${Q0}`,j0="v1beta1",eC="v1beta",dm=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class tC{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:j0,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:eC,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const s=[this.getRequestUrlInternal(t)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[d,p]of Object.entries(e.queryParams))s.searchParams.append(d,String(p));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?o[s]=Object.assign(Object.assign({},o[s]),a):a!==void 0&&(o[s]=a);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,s){if(t&&t.timeout||s){const a=new AbortController,d=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const p=setTimeout(()=>a.abort(),t.timeout);p&&typeof p.unref=="function"&&p.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=d}return t&&t.extraBody!==null&&nC(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async s=>(await fm(s),new Uu(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async s=>(await fm(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return ao(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let d="";for(;;){const{done:p,value:g}=yield Ge(s.read());if(p){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(g,{stream:!0});try{const T=JSON.parse(h);if("error"in T){const w=JSON.parse(JSON.stringify(T.error)),_=w.status,A=w.code,k=`got status: ${_}. ${JSON.stringify(T)}`;if(A>=400&&A<600)throw new oa({message:k,status:A})}}catch(T){if(T.name==="ApiError")throw T}d+=h;let y=d.match(dm);for(;y;){const T=y[1];try{const w=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ge(new Uu(w)),d=d.slice(y[0].length),y=d.match(dm)}catch(w){throw new Error(`exception parsing stream chunk ${T}. ${w}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=Z0+" "+this.clientOptions.userAgentExtra;return e[X0]=t,e[Vu]=t,e[J0]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))o.append(s,a);e.timeout&&e.timeout>0&&o.append(K0,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,d=await a.stat(e);s.sizeBytes=String(d.size);const p=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=p;const g={file:s},h=this.getFileName(e),y=Q("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,g,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,o){var s;const a=this.clientOptions.uploader,d=await a.stat(t),p=String(d.size),g=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:d.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),T={};o!=null&&o.customMetadata&&(T.customMetadata=o.customMetadata),o!=null&&o.chunkingConfig&&(T.chunkingConfig=o.chunkingConfig);const w=await this.fetchUploadUrl(h,p,g,y,T,o==null?void 0:o.httpOptions);return a.uploadToFileSearchStore(t,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,s,a,d){var p;let g={};d?g=d:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(p=h==null?void 0:h.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function fm(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(o);throw t>=400&&t<600?new oa({message:s,status:t}):new Error(s)}}function nC(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,d){const p=Object.assign({},a);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const h=d[g],y=p[g];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?p[g]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),p[g]=h)}return p}const s=o(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rC="mcp_used/unknown";let oC=!1;function gg(n){for(const e of n)if(iC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return oC}function yg(n){var e;const t=(e=n[Vu])!==null&&e!==void 0?e:"";n[Vu]=(t+` ${rC}`).trimStart()}function iC(n){return n!==null&&typeof n=="object"&&n instanceof fc}function sC(n,e=100){return ao(this,arguments,function*(){let o,s=0;for(;s<e;){const a=yield Ge(n.listTools({cursor:o}));for(const d of a.tools)yield yield Ge(d),s++;if(!a.nextCursor)break;o=a.nextCursor}})}class fc{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new fc(e,t)}async initialize(){var e,t,o,s;if(this.mcpTools.length>0)return;const a={},d=[];for(const y of this.mcpClients)try{for(var p=!0,g=(t=void 0,fi(sC(y))),h;h=await g.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const T=s;d.push(T);const w=T.name;if(a[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);a[w]=y}}catch(T){t={error:T}}finally{try{!p&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}this.mcpTools=d,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),dS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const d=await s.callTool({name:o.name,arguments:o.args},void 0,a);t.push({functionResponse:{name:o.name,response:d.isError?{error:d}:d}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function aC(n,e,t){const o=new rS;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(o,s),e(o)}class lC{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),d=dC(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const y=new Promise(F=>{h=F}),T=e.callbacks,w=function(){h({})},_=this.apiClient,A={onopen:w,onmessage:F=>{aC(_,T.onmessage,F)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(F){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(F){}},k=this.webSocketFactory.create(g,cC(d),A);k.connect(),await y;const D={setup:{model:Ie(this.apiClient,e.model)}};return k.send(JSON.stringify(D)),new uC(k,this.apiClient)}}class uC{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=e_(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=jE(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(oo.PLAY)}pause(){this.sendPlaybackControl(oo.PAUSE)}stop(){this.sendPlaybackControl(oo.STOP)}resetContext(){this.sendPlaybackControl(oo.RESET_CONTEXT)}close(){this.conn.close()}}function cC(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function dC(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function pC(n,e,t){const o=new nS;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const a=JSON.parse(s);if(n.isVertexAI()){const d=r_(a);Object.assign(o,d)}else Object.assign(o,a);e(o)}class hC{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new lC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,s,a,d,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&gg(e.config.tools)&&yg(T);const w=vC(T);if(this.apiClient.isVertexAI())y=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,y);else{const z=this.apiClient.getApiKey();let J="BidiGenerateContent",te="key";z!=null&&z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",te="access_token"),y=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${J}?${te}=${z}`}let _=()=>{};const A=new Promise(z=>{_=z}),k=e.callbacks,N=function(){var z;(z=k==null?void 0:k.onopen)===null||z===void 0||z.call(k),_({})},B=this.apiClient,D={onopen:N,onmessage:z=>{pC(B,k.onmessage,z)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(z){},onclose:(o=k==null?void 0:k.onclose)!==null&&o!==void 0?o:function(z){}},F=this.webSocketFactory.create(y,yC(w),D);F.connect(),await A;let U=Ie(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const z=this.apiClient.getProject(),J=this.apiClient.getLocation();U=`projects/${z}/locations/${J}/`+U}let H={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Xs.AUDIO]}:e.config.responseModalities=[Xs.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(p=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[],q=[];for(const z of O)if(this.isCallableTool(z)){const J=z;q.push(await J.tool())}else q.push(z);q.length>0&&(e.config.tools=q);const ie={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=ZE(this.apiClient,ie):H=QE(this.apiClient,ie),delete H.config,F.send(JSON.stringify(H)),new gC(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mC={turnComplete:!0};class gC{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=Jt(t.turns),e.isVertexAI()||(o=o.map(s=>ia(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(fC)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},mC),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:n_(e)}:t={realtimeInput:t_(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function yC(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function vC(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pm=10;function hm(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const d of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(lo(d)){s=!0;break}if(!s)return!0;const a=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function lo(n){return"callTool"in n&&typeof n.callTool=="function"}function TC(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>lo(s)))!==null&&o!==void 0?o:!1}function mm(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,s)=>{if(lo(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(s)}),t}function gm(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wC=class extends Pn{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,s,a,d,p;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!TC(t)||hm(t.config))return await this.generateContentInternal(g);const h=mm(t);if(h.length>0){const k=h.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let y,T;const w=Jt(g.contents),_=(a=(s=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:pm;let A=0;for(;A<_&&(y=await this.generateContentInternal(g),!(!y.functionCalls||y.functionCalls.length===0));){const k=y.candidates[0].content,N=[];for(const B of(p=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[])if(lo(B)){const F=await B.callTool(y.functionCalls);N.push(...F)}A++,T={role:"user",parts:N},g.contents=Jt(g.contents),g.contents.push(k),g.contents.push(T),gm(g.config)&&(w.push(k),w.push(T))}return gm(g.config)&&(y.automaticFunctionCallingHistory=w),y},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),hm(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}const o=mm(t);if(o.length>0){const s=o.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var s;let a;const d=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:d.push(g);let p;return a?p={generatedImages:d,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:p={generatedImages:d,sdkHttpResponse:o.sdkHttpResponse},p}),this.list=async t=>{var o;const d={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((o=d.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Cr(Nn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(d),d)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var o,s,a,d,p,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((d=(a=t.source)===null||a===void 0?void 0:a.video)===null||d===void 0)&&d.uri&&(!((g=(p=t.source)===null||p===void 0?void 0:p.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,s;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const d=await Promise.all(a.map(async g=>lo(g)?await g.tool():g)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(p.config.tools=d,e.config&&e.config.tools&&gg(e.config.tools)){const g=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),yg(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var t,o,s;const a=new Map;for(const d of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(lo(d)){const p=d,g=await p.tool();for(const h of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,p)}}return a}async processAfcStream(e){var t,o,s;const a=(s=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:pm;let d=!1,p=0;const g=await this.initAfcToolsMap(e);return(function(h,y,T){var w,_;return ao(this,arguments,function*(){for(var A,k,N,B;p<a;){d&&(p++,d=!1);const H=yield Ge(h.processParamsMaybeAddMcpUsage(T)),O=yield Ge(h.generateContentStreamInternal(H)),q=[],ie=[];try{for(var D=!0,F=(k=void 0,fi(O)),U;U=yield Ge(F.next()),A=U.done,!A;D=!0){B=U.value,D=!1;const z=B;if(yield yield Ge(z),z.candidates&&(!((w=z.candidates[0])===null||w===void 0)&&w.content)){ie.push(z.candidates[0].content);for(const J of(_=z.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(p<a&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(J.functionCall.name)){const te=yield Ge(y.get(J.functionCall.name).callTool([J.functionCall]));q.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(z){k={error:z}}finally{try{!D&&!A&&(N=F.return)&&(yield Ge(N.call(F)))}finally{if(k)throw k.error}}if(q.length>0){d=!0;const z=new oi;z.candidates=[{content:{role:"user",parts:q}}],yield yield Ge(z);const J=[];J.push(...ie),J.push({role:"user",parts:q});const te=Jt(T.contents).concat(J);T.contents=te}else break}})})(this,g,e)}async generateContentInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=lm(this.apiClient,e);return p=Q("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=cm(y),w=new oi;return Object.assign(w,T),w})}else{const h=am(this.apiClient,e);return p=Q("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=um(y),w=new oi;return Object.assign(w,T),w})}}async generateContentStreamInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=lm(this.apiClient,e);return p=Q("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(T){return ao(this,arguments,function*(){var w,_,A,k;try{for(var N=!0,B=fi(T),D;D=yield Ge(B.next()),w=D.done,!w;N=!0){k=D.value,N=!1;const F=k,U=cm(yield Ge(F.json()));U.sdkHttpResponse={headers:F.headers};const H=new oi;Object.assign(H,U),yield yield Ge(H)}}catch(F){_={error:F}}finally{try{!N&&!w&&(A=B.return)&&(yield Ge(A.call(B)))}finally{if(_)throw _.error}}})})}else{const h=am(this.apiClient,e);return p=Q("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),d.then(function(T){return ao(this,arguments,function*(){var w,_,A,k;try{for(var N=!0,B=fi(T),D;D=yield Ge(B.next()),w=D.done,!w;N=!0){k=D.value,N=!1;const F=k,U=um(yield Ge(F.json()));U.sdkHttpResponse={headers:F.headers};const H=new oi;Object.assign(H,U),yield yield Ge(H)}}catch(F){_={error:F}}finally{try{!N&&!w&&(A=B.return)&&(yield Ge(A.call(B)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=M_(this.apiClient,e);return p=Q("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=D_(y),w=new Yh;return Object.assign(w,T),w})}else{const h=b_(this.apiClient,e);return p=Q("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=L_(y),w=new Yh;return Object.assign(w,T),w})}}async generateImagesInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=H_(this.apiClient,e);return p=Q("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=W_(y),w=new Wh;return Object.assign(w,T),w})}else{const h=$_(this.apiClient,e);return p=Q("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=Y_(y),w=new Wh;return Object.assign(w,T),w})}}async editImageInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=k_(this.apiClient,e);return a=Q("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>{const h=R_(g),y=new Yw;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=V0(this.apiClient,e);return a=Q("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>{const h=B0(g),y=new Ww;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=_0(this.apiClient,e);return a=Q("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=C0(g),y=new zw;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=N0(this.apiClient,e);return a=Q("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=P0(g),y=new Jw;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=u0(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>qu(y))}else{const h=l0(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Gu(y))}}async listInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=g0(this.apiClient,e);return p=Q("{models_url}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=v0(y),w=new zh;return Object.assign(w,T),w})}else{const h=m0(this.apiClient,e);return p=Q("{models_url}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=y0(y),w=new zh;return Object.assign(w,T),w})}}async update(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=G0(this.apiClient,e);return p=Q("{model}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>qu(y))}else{const h=O0(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Gu(y))}}async delete(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=C_(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=A_(y),w=new Jh;return Object.assign(w,T),w})}else{const h=__(this.apiClient,e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=x_(y),w=new Jh;return Object.assign(w,T),w})}}async countTokens(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=w_(this.apiClient,e);return p=Q("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=E_(y),w=new Kh;return Object.assign(w,T),w})}else{const h=T_(this.apiClient,e);return p=Q("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=S_(y),w=new Kh;return Object.assign(w,T),w})}}async computeTokens(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=f_(this.apiClient,e);return a=Q("{model}:computeTokens",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>{const h=p_(g),y=new Kw;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=Z_(this.apiClient,e);return p=Q("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d.then(y=>{const T=X_(y),w=new Qs;return Object.assign(w,T),w})}else{const h=Q_(this.apiClient,e);return p=Q("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const T=K_(y),w=new Qs;return Object.assign(w,T),w})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends Pn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=Gw(e);return p=Q("{operationName}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),d}else{const h=Ow(e);return p=Q("{operationName}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d}}async fetchPredictVideosOperationInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=Pw(e);return a=Q("{resourceName}:fetchPredictOperation",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EC(n){const e={},t=u(n,["data"]);if(t!=null&&c(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function _C(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>PC(a))),c(e,["parts"],s)}const o=u(n,["role"]);return o!=null&&c(e,["role"],o),e}function CC(n,e,t){const o={},s=u(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const a=u(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&c(t,["newSessionExpireTime"],a);const d=u(e,["uses"]);t!==void 0&&d!=null&&c(t,["uses"],d);const p=u(e,["liveConnectConstraints"]);t!==void 0&&p!=null&&c(t,["bidiGenerateContentSetup"],NC(n,p));const g=u(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&c(t,["fieldMask"],g),o}function xC(n,e){const t={},o=u(e,["config"]);return o!=null&&c(t,["config"],CC(n,o,t)),t}function AC(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const o=u(n,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function IC(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=u(n,["enableWidget"]);return t!=null&&c(e,["enableWidget"],t),e}function kC(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=u(n,["timeRangeFilter"]);return t!=null&&c(e,["timeRangeFilter"],t),e}function RC(n,e){const t={},o=u(n,["generationConfig"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig"],o);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const a=u(n,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const p=u(n,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const h=u(n,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const T=u(n,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],dc(T));const w=u(n,["thinkingConfig"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","thinkingConfig"],w);const _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const A=u(n,["systemInstruction"]);e!==void 0&&A!=null&&c(e,["setup","systemInstruction"],_C(gt(A)));const k=u(n,["tools"]);if(e!==void 0&&k!=null){let O=mo(k);Array.isArray(O)&&(O=O.map(q=>MC(ho(q)))),c(e,["setup","tools"],O)}const N=u(n,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],bC(N));const B=u(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","inputAudioTranscription"],B);const D=u(n,["outputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","outputAudioTranscription"],D);const F=u(n,["realtimeInputConfig"]);e!==void 0&&F!=null&&c(e,["setup","realtimeInputConfig"],F);const U=u(n,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],U);const H=u(n,["proactivity"]);return e!==void 0&&H!=null&&c(e,["setup","proactivity"],H),t}function NC(n,e){const t={},o=u(e,["model"]);o!=null&&c(t,["setup","model"],Ie(n,o));const s=u(e,["config"]);return s!=null&&c(t,["config"],RC(s,t)),t}function PC(n){const e={},t=u(n,["functionCall"]);t!=null&&c(e,["functionCall"],t);const o=u(n,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);const s=u(n,["executableCode"]);s!=null&&c(e,["executableCode"],s);const a=u(n,["fileData"]);a!=null&&c(e,["fileData"],AC(a));const d=u(n,["functionResponse"]);d!=null&&c(e,["functionResponse"],d);const p=u(n,["inlineData"]);p!=null&&c(e,["inlineData"],EC(p));const g=u(n,["text"]);g!=null&&c(e,["text"],g);const h=u(n,["thought"]);h!=null&&c(e,["thought"],h);const y=u(n,["thoughtSignature"]);y!=null&&c(e,["thoughtSignature"],y);const T=u(n,["videoMetadata"]);return T!=null&&c(e,["videoMetadata"],T),e}function bC(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MC(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(n,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const s=u(n,["computerUse"]);s!=null&&c(e,["computerUse"],s);const a=u(n,["fileSearch"]);a!=null&&c(e,["fileSearch"],a);const d=u(n,["codeExecution"]);if(d!=null&&c(e,["codeExecution"],d),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=u(n,["googleMaps"]);p!=null&&c(e,["googleMaps"],IC(p));const g=u(n,["googleSearch"]);g!=null&&c(e,["googleSearch"],kC(g));const h=u(n,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LC(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(a=>`${t}.${a}`);e.push(...s)}else e.push(t)}return e.join(",")}function DC(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const a=LC(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];s.length>0&&(p=s.map(h=>d.includes(h)?`generationConfig.${h}`:h));const g=[];a&&g.push(a),p.length>0&&g.push(...p),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class UC extends Pn{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=xC(this.apiClient,e);a=Q("auth_tokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const g=DC(p,e.config);return s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FC(n,e){const t={},o=u(n,["displayName"]);return e!==void 0&&o!=null&&c(e,["displayName"],o),t}function OC(n){const e={},t=u(n,["config"]);return t!=null&&FC(t,e),e}function GC(n,e){const t={},o=u(n,["force"]);return e!==void 0&&o!=null&&c(e,["_query","force"],o),t}function qC(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const o=u(n,["config"]);return o!=null&&GC(o,e),e}function VC(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["_url","name"],t),e}function BC(n,e){const t={},o=u(n,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["customMetadata"],a)}const s=u(n,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),t}function $C(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const o=u(n,["metadata"]);o!=null&&c(e,["metadata"],o);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const a=u(n,["error"]);a!=null&&c(e,["error"],a);const d=u(n,["response"]);return d!=null&&c(e,["response"],YC(d)),e}function HC(n){const e={},t=u(n,["fileSearchStoreName"]);t!=null&&c(e,["_url","file_search_store_name"],t);const o=u(n,["fileName"]);o!=null&&c(e,["fileName"],o);const s=u(n,["config"]);return s!=null&&BC(s,e),e}function YC(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["parent"]);o!=null&&c(e,["parent"],o);const s=u(n,["documentName"]);return s!=null&&c(e,["documentName"],s),e}function WC(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function zC(n){const e={},t=u(n,["config"]);return t!=null&&WC(t,e),e}function JC(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["fileSearchStores"],a)}return e}function KC(n,e){const t={},o=u(n,["mimeType"]);e!==void 0&&o!=null&&c(e,["mimeType"],o);const s=u(n,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const a=u(n,["customMetadata"]);if(e!==void 0&&a!=null){let p=a;Array.isArray(p)&&(p=p.map(g=>g)),c(e,["customMetadata"],p)}const d=u(n,["chunkingConfig"]);return e!==void 0&&d!=null&&c(e,["chunkingConfig"],d),t}function XC(n){const e={},t=u(n,["fileSearchStoreName"]);t!=null&&c(e,["_url","file_search_store_name"],t);const o=u(n,["config"]);return o!=null&&KC(o,e),e}function QC(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(n,e){const t={},o=u(n,["force"]);return e!==void 0&&o!=null&&c(e,["_query","force"],o),t}function jC(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const o=u(n,["config"]);return o!=null&&ZC(o,e),e}function ex(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["_url","name"],t),e}function tx(n,e){const t={},o=u(n,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function nx(n){const e={},t=u(n,["parent"]);t!=null&&c(e,["_url","parent"],t);const o=u(n,["config"]);return o!=null&&tx(o,e),e}function rx(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const o=u(n,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);const s=u(n,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>d)),c(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ox extends Pn{constructor(e){super(),this.apiClient=e,this.list=async t=>new Cr(Nn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ex(e);return a=Q("{name}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var t,o;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jC(e);s=Q("{name}",d._url),a=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nx(e);return a=Q("{parent}/documents",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=rx(g),y=new Xw;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ix extends Pn{constructor(e,t=new ox(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new Cr(Nn.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=OC(e);return a=Q("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async get(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=VC(e);return a=Q("{name}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var t,o;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qC(e);s=Q("{name}",d._url),a=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=zC(e);return a=Q("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=JC(g),y=new Qw;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=XC(e);return a=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=QC(g),y=new Zw;return Object.assign(y,h),y})}}async importFile(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=HC(e);return a=Q("{file_search_store_name}:importFile",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const h=$C(g),y=new sc;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sx(n,e){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function ax(n,e){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function lx(n,e,t){const o={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=u(n,["epochCount"]);e!==void 0&&a!=null&&c(e,["tuningTask","hyperparameters","epochCount"],a);const d=u(n,["learningRateMultiplier"]);if(d!=null&&c(o,["tuningTask","hyperparameters","learningRateMultiplier"],d),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=u(n,["batchSize"]);e!==void 0&&p!=null&&c(e,["tuningTask","hyperparameters","batchSize"],p);const g=u(n,["learningRate"]);if(e!==void 0&&g!=null&&c(e,["tuningTask","hyperparameters","learningRate"],g),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function ux(n,e,t){const o={};let s=u(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const _=u(n,["validationDataset"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec"],ym(_))}else if(s==="PREFERENCE_TUNING"){const _=u(n,["validationDataset"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec"],ym(_))}const a=u(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&c(e,["tunedModelDisplayName"],a);const d=u(n,["description"]);e!==void 0&&d!=null&&c(e,["description"],d);let p=u(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const _=u(n,["epochCount"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(p==="PREFERENCE_TUNING"){const _=u(n,["epochCount"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let g=u(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const _=u(n,["learningRateMultiplier"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(g==="PREFERENCE_TUNING"){const _=u(n,["learningRateMultiplier"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let h=u(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=u(n,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(h==="PREFERENCE_TUNING"){const _=u(n,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let y=u(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const _=u(n,["adapterSize"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(y==="PREFERENCE_TUNING"){const _=u(n,["adapterSize"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=u(n,["labels"]);e!==void 0&&T!=null&&c(e,["labels"],T);const w=u(n,["beta"]);return e!==void 0&&w!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),o}function cx(n,e){const t={},o=u(n,["baseModel"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["preTunedModel"]);s!=null&&c(t,["preTunedModel"],s);const a=u(n,["trainingDataset"]);a!=null&&Sx(a);const d=u(n,["config"]);return d!=null&&lx(d,t),t}function dx(n,e){const t={},o=u(n,["baseModel"]);o!=null&&c(t,["baseModel"],o);const s=u(n,["preTunedModel"]);s!=null&&c(t,["preTunedModel"],s);const a=u(n,["trainingDataset"]);a!=null&&Ex(a,t,e);const d=u(n,["config"]);return d!=null&&ux(d,t,e),t}function fx(n,e){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function px(n,e){const t={},o=u(n,["name"]);return o!=null&&c(t,["_url","name"],o),t}function hx(n,e,t){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(n,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const d=u(n,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),o}function mx(n,e,t){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const a=u(n,["pageToken"]);e!==void 0&&a!=null&&c(e,["_query","pageToken"],a);const d=u(n,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),o}function gx(n,e){const t={},o=u(n,["config"]);return o!=null&&hx(o,t),t}function yx(n,e){const t={},o=u(n,["config"]);return o!=null&&mx(o,t),t}function vx(n,e){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const a=u(n,["tunedModels"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>vg(p))),c(t,["tuningJobs"],d)}return t}function Tx(n,e){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const a=u(n,["tuningJobs"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>Bu(p))),c(t,["tuningJobs"],d)}return t}function wx(n,e){const t={},o=u(n,["name"]);o!=null&&c(t,["model"],o);const s=u(n,["name"]);return s!=null&&c(t,["endpoint"],s),t}function Sx(n,e){const t={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=u(n,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),c(t,["examples","examples"],s)}return t}function Ex(n,e,t){const o={};let s=u(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const d=u(n,["gcsUri"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(s==="PREFERENCE_TUNING"){const d=u(n,["gcsUri"]);e!==void 0&&d!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}let a=u(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const d=u(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(a==="PREFERENCE_TUNING"){const d=u(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function vg(n,e){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const a=u(n,["state"]);a!=null&&c(t,["state"],jm(a));const d=u(n,["createTime"]);d!=null&&c(t,["createTime"],d);const p=u(n,["tuningTask","startTime"]);p!=null&&c(t,["startTime"],p);const g=u(n,["tuningTask","completeTime"]);g!=null&&c(t,["endTime"],g);const h=u(n,["updateTime"]);h!=null&&c(t,["updateTime"],h);const y=u(n,["description"]);y!=null&&c(t,["description"],y);const T=u(n,["baseModel"]);T!=null&&c(t,["baseModel"],T);const w=u(n,["_self"]);return w!=null&&c(t,["tunedModel"],wx(w)),t}function Bu(n,e){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const a=u(n,["state"]);a!=null&&c(t,["state"],jm(a));const d=u(n,["createTime"]);d!=null&&c(t,["createTime"],d);const p=u(n,["startTime"]);p!=null&&c(t,["startTime"],p);const g=u(n,["endTime"]);g!=null&&c(t,["endTime"],g);const h=u(n,["updateTime"]);h!=null&&c(t,["updateTime"],h);const y=u(n,["error"]);y!=null&&c(t,["error"],y);const T=u(n,["description"]);T!=null&&c(t,["description"],T);const w=u(n,["baseModel"]);w!=null&&c(t,["baseModel"],w);const _=u(n,["tunedModel"]);_!=null&&c(t,["tunedModel"],_);const A=u(n,["preTunedModel"]);A!=null&&c(t,["preTunedModel"],A);const k=u(n,["supervisedTuningSpec"]);k!=null&&c(t,["supervisedTuningSpec"],k);const N=u(n,["preferenceOptimizationSpec"]);N!=null&&c(t,["preferenceOptimizationSpec"],N);const B=u(n,["tuningDataStats"]);B!=null&&c(t,["tuningDataStats"],B);const D=u(n,["encryptionSpec"]);D!=null&&c(t,["encryptionSpec"],D);const F=u(n,["partnerModelTuningSpec"]);F!=null&&c(t,["partnerModelTuningSpec"],F);const U=u(n,["customBaseModel"]);U!=null&&c(t,["customBaseModel"],U);const H=u(n,["experiment"]);H!=null&&c(t,["experiment"],H);const O=u(n,["labels"]);O!=null&&c(t,["labels"],O);const q=u(n,["outputUri"]);q!=null&&c(t,["outputUri"],q);const ie=u(n,["pipelineJob"]);ie!=null&&c(t,["pipelineJob"],ie);const z=u(n,["serviceAccount"]);z!=null&&c(t,["serviceAccount"],z);const J=u(n,["tunedModelDisplayName"]);J!=null&&c(t,["tunedModelDisplayName"],J);const te=u(n,["veoTuningSpec"]);return te!=null&&c(t,["veoTuningSpec"],te),t}function _x(n,e){const t={},o=u(n,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&c(t,["name"],s);const a=u(n,["metadata"]);a!=null&&c(t,["metadata"],a);const d=u(n,["done"]);d!=null&&c(t,["done"],d);const p=u(n,["error"]);return p!=null&&c(t,["error"],p),t}function ym(n,e){const t={},o=u(n,["gcsUri"]);o!=null&&c(t,["validationDatasetUri"],o);const s=u(n,["vertexDatasetResource"]);return s!=null&&c(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cx extends Pn{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Cr(Nn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),a=await this.tuneMldevInternal(s);let d="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?d=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(d=a.name.split("/operations/")[0]),{name:d,state:Du.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=px(e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>Bu(y))}else{const h=fx(e);return p=Q("{name}",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>vg(y))}}async listInternal(e){var t,o,s,a;let d,p="",g={};if(this.apiClient.isVertexAI()){const h=yx(e);return p=Q("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=Tx(y),w=new Xh;return Object.assign(w,T),w})}else{const h=gx(e);return p=Q("tunedModels",h._url),g=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const w=T;return w.sdkHttpResponse={headers:y.headers},w})),d.then(y=>{const T=vx(y),w=new Xh;return Object.assign(w,T),w})}}async cancel(e){var t,o,s,a;let d="",p={};if(this.apiClient.isVertexAI()){const g=ax(e);d=Q("{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=sx(e);d=Q("{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI()){const p=dx(e,e);return a=Q("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>Bu(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let s,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=cx(e);return a=Q("tunedModels",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:g.headers},y})),s.then(g=>_x(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xx{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ax=1024*1024*8,Ix=3,kx=1e3,Rx=2,js="x-goog-upload-status";async function Nx(n,e,t){var o;const s=await Tg(n,e,t),a=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[js])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Px(n,e,t){var o;const s=await Tg(n,e,t),a=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[js])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=zm(a),p=new ac;return Object.assign(p,d),p}async function Tg(n,e,t){var o,s;let a=0,d=0,p=new Uu(new Response),g="upload";for(a=n.size;d<a;){const h=Math.min(Ax,a-d),y=n.slice(d,d+h);d+h>=a&&(g+=", finalize");let T=0,w=kx;for(;T<Ix&&(p=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(d),"Content-Length":String(h)}}}),!(!((o=p==null?void 0:p.headers)===null||o===void 0)&&o[js]));)T++,await Mx(w),w=w*Rx;if(d+=h,((s=p==null?void 0:p.headers)===null||s===void 0?void 0:s[js])!=="active")break;if(a<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function bx(n){return{size:n.size,type:n.type}}function Mx(n){return new Promise(e=>setTimeout(e,n))}class Lx{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Nx(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Px(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dx{create(e,t,o){return new Ux(e,t,o)}}class Ux{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vm="x-goog-api-key";class Fx{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(vm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vm,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ox="gl-node/";class Gx{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Rw(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new Fx(this.apiKey);this.apiClient=new tC({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ox+"web",uploader:new Lx,downloader:new xx}),this.models=new wC(this.apiClient),this.live=new hC(this.apiClient,s,new Dx),this.batches=new eE(this.apiClient),this.chats=new bE(this.models,this.apiClient),this.caches=new RE(this.apiClient),this.files=new BE(this.apiClient),this.operations=new SC(this.apiClient),this.authTokens=new UC(this.apiClient),this.tunings=new Cx(this.apiClient),this.fileSearchStores=new ix(this.apiClient)}}class Rn{static normalize(e,t){let o=e;return o=o.replace(/\r\n/g,`
`),o=o.split(`
`).map(s=>s.trimEnd()).join(`
`),o=this.fixDoubleGreaterThan(o),o=this.fixGuidedHintSpacing(o),o=this.extractAndRelocateAlertBlocks(o),o=this.normalizeAlertBlocks(o),o}static fixGuidedHintSpacing(e){const t=/(:::ShowGuided\(ShowGuided=Yes\)[\s\S]*?:::)/g;return e.replace(t,o=>o.replace(/>\n>\n(>[-\[])/g,`>
$1`))}static fixDoubleGreaterThan(e){return e.replace(/> >-/g,"> -")}static extractAndRelocateAlertBlocks(e){const t=/(:::ShowGuided\(ShowGuided=Yes\)[\s\S]*?:::)/g,o=/(:::ShowAdvanced\(ShowAdvanced=Yes\)[\s\S]*?:::)/g;let s=[],a=e.replace(t,d=>{const p=/>\s*\[\+alert\][^\n]*\n((?:>[^\n]*\n)*)/g,g=/>\s*\[!note\][^\n]*\n((?:>[^\n]*\n)*)/g,h=/>\s*\[!help\][^\n]*\n((?:>[^\n]*\n)*)/g;let y=d;return y=y.replace(p,T=>(s.push(T.trim()),"")),y=y.replace(g,T=>(s.push(T.trim()),"")),y=y.replace(h,T=>(s.push(T.trim()),"")),y=y.replace(/>\n>\n>\n/g,`>
>
`),y});return s.length>0&&(a=a.replace(o,d=>{const p=s.join(`
>
`);return d+`

`+p})),a}static normalizeAlertBlocks(e){return e.replace(/\n\n\n+(\[[\+\!])/g,`

$1`).replace(/(\])\n\n\n+/g,`$1

`)}static normalizeOpenAI(e){return this.normalize(e,"openai")}static normalizeGemini(e){let t=this.normalize(e,"gemini");return t=this.fixOverviewFormatting(t),t=this.fixGeminiGuidedHintSpacing(t),t}static fixOverviewFormatting(e){const t=/>\[overview\]:([\s\S]*?)(?=\n\n|$)/;return e.replace(t,(o,s)=>`>[overview]: ${s.replace(/\n>/g," ").replace(/\s+/g," ").trim()}`)}static fixGeminiGuidedHintSpacing(e){const t=/(:::ShowGuided\(ShowGuided=Yes\)[\s\S]*?:::)/g;return e.replace(t,o=>{let s=o.replace(/>\n>\n>\n(>[-\[])/g,`>
$1`);return s=s.replace(/>\n(>[-\[])/g,`>
>
$1`),s})}static normalizeOllama(e){return this.normalize(e,"ollama")}}const hu=n=>new Promise(e=>setTimeout(e,n));function mu(n){var o,s,a;const e={code:0,message:"An unknown error occurred.",status:"UNKNOWN"};let t=n instanceof Error?n.message:String(n);try{let d=JSON.parse(t);if(d.error&&typeof d.error.message=="string")try{const y=JSON.parse(d.error.message);y.error&&(d=y)}catch{}const p=((o=d.error)==null?void 0:o.code)||0,g=((s=d.error)==null?void 0:s.message)||t,h=((a=d.error)==null?void 0:a.status)||"";return{code:p,message:g,status:h}}catch{return t.includes("429")||t.includes("RESOURCE_EXHAUSTED")?{code:429,message:"You have exceeded your API quota.",status:"RESOURCE_EXHAUSTED"}:t.includes("503")||t.includes("UNAVAILABLE")||t.includes("overloaded")?{code:503,message:"The AI model is currently overloaded.",status:"UNAVAILABLE"}:{...e,message:t}}}function qx(n){return n.type==="text"?{text:n.text}:{inlineData:{data:n.data,mimeType:n.mimeType}}}class Vx{constructor(e){this.ai=new Gx({apiKey:e.apiKey}),this.model=e.model}async processText(e,t,o,s){let a;for(let p=0;p<=6;p++)try{if(o.current)throw new Error("Operation stopped by user.");const g=await this.ai.models.generateContentStream({model:this.model,contents:`${e}

---

${t}`});let h="";for await(const y of g){if(o.current)throw new Error("Operation stopped by user.");const T=y.text;T&&(h+=T)}return s==null||s(""),Rn.normalizeGemini(h)}catch(g){a=g;const h=mu(g);if(h.message.includes("Operation stopped by user.")||o.current)throw new Error("Operation stopped by user.");if(h.code===400&&(h.status==="INVALID_ARGUMENT"||h.message.toLowerCase().includes("api key")))throw new Error("Your API key is invalid or has expired. Please check your API key settings.");if(p<6){let y=2e3*Math.pow(2,p);(h.code===429||h.code===503)&&(y=15e3*Math.pow(2,p)+Math.floor(Math.random()*5e3)),console.warn(`Gemini API attempt ${p+1} failed, retrying in ${y}ms...`,h),s==null||s(`The AI model is very busy. Patiently retrying in ${Math.round(y/1e3)}s... (Attempt ${p+2}/7)`),await hu(y)}else throw console.error("All Gemini API attempts failed:",h),h.code===429?new Error("You have exceeded your API quota. Please check your plan and billing details."):h.code===503?new Error("The AI model is currently overloaded. Please wait a few moments and try again."):new Error("Failed to process text with Gemini API after multiple attempts. The service may be busy or unavailable.")}throw new Error(`Failed to process text with Gemini API after 6 attempts. Last error: ${JSON.stringify(a)}`)}async processTextStream(e,t,o,s,a){let d,g="";for(let h=0;h<=6;h++)try{if(s.current)throw new Error("Operation stopped by user.");const y=await this.ai.models.generateContentStream({model:this.model,contents:`${e}

---

${t}`});g="";for await(const T of y){if(s.current)throw new Error("Operation stopped by user.");const w=T.text;w&&(g+=w,o(w))}return a==null||a(""),Rn.normalizeGemini(g)}catch(y){d=y;const T=mu(y);if(T.message.includes("Operation stopped by user.")||s.current)throw new Error("Operation stopped by user.");if(T.code===400&&(T.status==="INVALID_ARGUMENT"||T.message.toLowerCase().includes("api key")))throw new Error("Your API key is invalid or has expired. Please check your API key settings.");if(h<6){let w=2e3*Math.pow(2,h);(T.code===429||T.code===503)&&(w=15e3*Math.pow(2,h)+Math.floor(Math.random()*5e3)),console.warn(`Gemini API stream attempt ${h+1} failed, retrying in ${w}ms...`,T),a==null||a(`The AI model is very busy. Patiently retrying in ${Math.round(w/1e3)}s... (Attempt ${h+2}/7)`),await hu(w)}else throw console.error("All Gemini API stream attempts failed:",T),T.code===429?new Error("You have exceeded your API quota. Please check your plan and billing details."):T.code===503?new Error("The AI model is currently overloaded. Please wait a few moments and try again."):new Error("Failed to process text stream with Gemini API after multiple attempts. The service may be busy or unavailable.")}throw new Error(`Failed to process text stream with Gemini API after 6 attempts. Last error: ${JSON.stringify(d)}`)}async generateScriptStream(e,t,o,s,a){let d,g="";for(let h=0;h<=6;h++)try{if(s.current)throw new Error("Operation stopped by user.");const y={text:e},T=t.map(qx),w={parts:[y,...T]},_=await this.ai.models.generateContentStream({model:this.model,contents:w});g="";for await(const A of _){if(s.current)throw new Error("Operation stopped by user.");const k=A.text;k&&(g+=k,o(k))}return a==null||a(""),Rn.normalizeGemini(g)}catch(y){d=y;const T=mu(y);if(T.message.includes("Operation stopped by user.")||s.current)throw new Error("Operation stopped by user.");if(T.code===400&&(T.status==="INVALID_ARGUMENT"||T.message.toLowerCase().includes("api key")))throw new Error("Your API key is invalid or has expired. Please check your API key settings.");if(h<6){let w=2e3*Math.pow(2,h);(T.code===429||T.code===503)&&(w=15e3*Math.pow(2,h)+Math.floor(Math.random()*5e3)),console.warn(`Gemini API multi-modal stream attempt ${h+1} failed, retrying in ${w}ms...`,T),a==null||a(`The AI model is very busy. Patiently retrying in ${Math.round(w/1e3)}s... (Attempt ${h+2}/7)`),await hu(w)}else throw console.error("All Gemini API multi-modal stream attempts failed:",T),T.code===429?new Error("You have exceeded your API quota. Please check your plan and billing details."):T.code===503?new Error("The AI model is currently overloaded. Please wait a few moments and try again."):new Error("Failed to process multi-modal stream with Gemini API after multiple attempts. The service may be busy or unavailable.")}throw new Error(`Failed to process multi-modal stream with Gemini API after 6 attempts. Last error: ${JSON.stringify(d)}`)}}const $u="RFC3986",Hu={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},Bx="RFC1738",$x=Array.isArray,pn=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),gu=1024,Hx=(n,e,t,o,s)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});let d="";for(let p=0;p<a.length;p+=gu){const g=a.length>=gu?a.slice(p,p+gu):a,h=[];for(let y=0;y<g.length;++y){let T=g.charCodeAt(y);if(T===45||T===46||T===95||T===126||T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122||s===Bx&&(T===40||T===41)){h[h.length]=g.charAt(y);continue}if(T<128){h[h.length]=pn[T];continue}if(T<2048){h[h.length]=pn[192|T>>6]+pn[128|T&63];continue}if(T<55296||T>=57344){h[h.length]=pn[224|T>>12]+pn[128|T>>6&63]+pn[128|T&63];continue}y+=1,T=65536+((T&1023)<<10|g.charCodeAt(y)&1023),h[h.length]=pn[240|T>>18]+pn[128|T>>12&63]+pn[128|T>>6&63]+pn[128|T&63]}d+=h.join("")}return d};function Yx(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function Tm(n,e){if($x(n)){const t=[];for(let o=0;o<n.length;o+=1)t.push(e(n[o]));return t}return e(n)}const Wx=Object.prototype.hasOwnProperty,wg={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},hn=Array.isArray,zx=Array.prototype.push,Sg=function(n,e){zx.apply(n,hn(e)?e:[e])},Jx=Date.prototype.toISOString,tt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Hx,encodeValuesOnly:!1,format:$u,formatter:Hu[$u],indices:!1,serializeDate(n){return Jx.call(n)},skipNulls:!1,strictNullHandling:!1};function Kx(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const yu={};function Eg(n,e,t,o,s,a,d,p,g,h,y,T,w,_,A,k,N,B){let D=n,F=B,U=0,H=!1;for(;(F=F.get(yu))!==void 0&&!H;){const J=F.get(n);if(U+=1,typeof J<"u"){if(J===U)throw new RangeError("Cyclic object value");H=!0}typeof F.get(yu)>"u"&&(U=0)}if(typeof h=="function"?D=h(e,D):D instanceof Date?D=w==null?void 0:w(D):t==="comma"&&hn(D)&&(D=Tm(D,function(J){return J instanceof Date?w==null?void 0:w(J):J})),D===null){if(a)return g&&!k?g(e,tt.encoder,N,"key",_):e;D=""}if(Kx(D)||Yx(D)){if(g){const J=k?e:g(e,tt.encoder,N,"key",_);return[(A==null?void 0:A(J))+"="+(A==null?void 0:A(g(D,tt.encoder,N,"value",_)))]}return[(A==null?void 0:A(e))+"="+(A==null?void 0:A(String(D)))]}const O=[];if(typeof D>"u")return O;let q;if(t==="comma"&&hn(D))k&&g&&(D=Tm(D,g)),q=[{value:D.length>0?D.join(",")||null:void 0}];else if(hn(h))q=h;else{const J=Object.keys(D);q=y?J.sort(y):J}const ie=p?String(e).replace(/\./g,"%2E"):String(e),z=o&&hn(D)&&D.length===1?ie+"[]":ie;if(s&&hn(D)&&D.length===0)return z+"[]";for(let J=0;J<q.length;++J){const te=q[J],me=typeof te=="object"&&typeof te.value<"u"?te.value:D[te];if(d&&me===null)continue;const Ee=T&&p?te.replace(/\./g,"%2E"):te,Ye=hn(D)?typeof t=="function"?t(z,Ee):z:z+(T?"."+Ee:"["+Ee+"]");B.set(n,U);const Ke=new WeakMap;Ke.set(yu,B),Sg(O,Eg(me,Ye,t,o,s,a,d,p,t==="comma"&&k&&hn(D)?null:g,h,y,T,w,_,A,k,N,Ke))}return O}function Xx(n=tt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||tt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=$u;if(typeof n.format<"u"){if(!Wx.call(Hu,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const o=Hu[t];let s=tt.filter;(typeof n.filter=="function"||hn(n.filter))&&(s=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in wg?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=tt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const d=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:tt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:tt.addQueryPrefix,allowDots:d,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:tt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:tt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?tt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:tt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:tt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:tt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:tt.encodeValuesOnly,filter:s,format:t,formatter:o,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:tt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:tt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:tt.strictNullHandling}}function Qx(n,e={}){let t=n;const o=Xx(e);let s,a;typeof o.filter=="function"?(a=o.filter,t=a("",t)):hn(o.filter)&&(a=o.filter,s=a);const d=[];if(typeof t!="object"||t===null)return"";const p=wg[o.arrayFormat],g=p==="comma"&&o.commaRoundTrip;s||(s=Object.keys(t)),o.sort&&s.sort(o.sort);const h=new WeakMap;for(let w=0;w<s.length;++w){const _=s[w];o.skipNulls&&t[_]===null||Sg(d,Eg(t[_],_,p,g,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,h))}const y=d.join(o.delimiter);let T=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?T+="utf8=%26%2310003%3B&":T+="utf8=%E2%9C%93&"),y.length>0?T+y:""}const no="4.104.0";let wm=!1,pi,_g,Cg,Yu,xg,Ag,Ig,kg,Rg;function Zx(n,e={auto:!1}){if(wm)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(pi)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${pi}'\``);wm=e.auto,pi=n.kind,_g=n.fetch,Cg=n.FormData,Yu=n.File,xg=n.ReadableStream,Ag=n.getMultipartRequestOptions,Ig=n.getDefaultAgent,kg=n.fileFromPath,Rg=n.isFsReadStream}class jx{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function eA({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,o,s,a;try{t=fetch,o=Request,s=Response,a=Headers}catch(d){throw new Error(`this environment is missing the following Web Fetch API type: ${d.message}. ${e}`)}return{kind:"web",fetch:t,Request:o,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(d,p)=>({...p,body:new jx(d)}),getDefaultAgent:d=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:d=>!1}}const Ng=()=>{pi||Zx(eA(),{auto:!0})};Ng();class de extends Error{}class ct extends de{constructor(e,t,o,s){super(`${ct.makeMessage(e,t,o)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,o){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,o,s){if(!e||!s)return new la({message:o,cause:zu(t)});const a=t==null?void 0:t.error;return e===400?new Pg(e,a,o,s):e===401?new bg(e,a,o,s):e===403?new Mg(e,a,o,s):e===404?new Lg(e,a,o,s):e===409?new Dg(e,a,o,s):e===422?new Ug(e,a,o,s):e===429?new Fg(e,a,o,s):e>=500?new Og(e,a,o,s):new ct(e,a,o,s)}}class zt extends ct{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class la extends ct{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class pc extends la{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Pg extends ct{}class bg extends ct{}class Mg extends ct{}class Lg extends ct{}class Dg extends ct{}class Ug extends ct{}class Fg extends ct{}class Og extends ct{}class Gg extends de{constructor(){super("Could not parse response content as the length limit was reached")}}class qg extends de{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Ms=function(n,e,t,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},wr=function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},Ut;class ua{constructor(){Ut.set(this,void 0),this.buffer=new Uint8Array,Ms(this,Ut,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let o=new Uint8Array(this.buffer.length+t.length);o.set(this.buffer),o.set(t,this.buffer.length),this.buffer=o;const s=[];let a;for(;(a=tA(this.buffer,wr(this,Ut,"f")))!=null;){if(a.carriage&&wr(this,Ut,"f")==null){Ms(this,Ut,a.index,"f");continue}if(wr(this,Ut,"f")!=null&&(a.index!==wr(this,Ut,"f")+1||a.carriage)){s.push(this.decodeText(this.buffer.slice(0,wr(this,Ut,"f")-1))),this.buffer=this.buffer.slice(wr(this,Ut,"f")),Ms(this,Ut,null,"f");continue}const d=wr(this,Ut,"f")!==null?a.preceding-1:a.preceding,p=this.decodeText(this.buffer.slice(0,d));s.push(p),this.buffer=this.buffer.slice(a.index),Ms(this,Ut,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new de(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new de(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new de("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ut=new WeakMap;ua.NEWLINE_CHARS=new Set([`
`,"\r"]);ua.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function tA(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function nA(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}function Vg(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class gn{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let o=!1;async function*s(){if(o)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{for await(const d of rA(e,t))if(!a){if(d.data.startsWith("[DONE]")){a=!0;continue}if(d.event===null||d.event.startsWith("response.")||d.event.startsWith("transcript.")){let p;try{p=JSON.parse(d.data)}catch(g){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),g}if(p&&p.error)throw new ct(void 0,p.error,void 0,Jg(e.headers));yield p}else{let p;try{p=JSON.parse(d.data)}catch(g){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),g}if(d.event=="error")throw new ct(void 0,p.error,p.message,void 0);yield{event:d.event,data:p}}}a=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{a||t.abort()}}return new gn(s,t)}static fromReadableStream(e,t){let o=!1;async function*s(){const d=new ua,p=Vg(e);for await(const g of p)for(const h of d.decode(g))yield h;for(const g of d.flush())yield g}async function*a(){if(o)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let d=!1;try{for await(const p of s())d||p&&(yield JSON.parse(p));d=!0}catch(p){if(p instanceof Error&&p.name==="AbortError")return;throw p}finally{d||t.abort()}}return new gn(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),s=a=>({next:()=>{if(a.length===0){const d=o.next();e.push(d),t.push(d)}return a.shift()}});return[new gn(()=>s(e),this.controller),new gn(()=>s(t),this.controller)]}toReadableStream(){const e=this;let t;const o=new TextEncoder;return new xg({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:d}=await t.next();if(d)return s.close();const p=o.encode(JSON.stringify(a)+`
`);s.enqueue(p)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*rA(n,e){if(!n.body)throw e.abort(),new de("Attempted to iterate over a response with no body");const t=new iA,o=new ua,s=Vg(n.body);for await(const a of oA(s))for(const d of o.decode(a)){const p=t.decode(d);p&&(yield p)}for(const a of o.flush()){const d=t.decode(a);d&&(yield d)}}async function*oA(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let s=new Uint8Array(e.length+o.length);s.set(e),s.set(o,e.length),e=s;let a;for(;(a=nA(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class iA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,s]=sA(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function sA(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const Bg=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",$g=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ca(n),ca=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",aA=n=>$g(n)||Bg(n)||Rg(n);async function Hg(n,e,t){var s;if(n=await n,$g(n))return n;if(Bg(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const d=ca(a)?[await a.arrayBuffer()]:[a];return new Yu(d,e,t)}const o=await lA(n);if(e||(e=cA(n)??"unknown_file"),!(t!=null&&t.type)){const a=(s=o[0])==null?void 0:s.type;typeof a=="string"&&(t={...t,type:a})}return new Yu(o,e,t)}async function lA(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(ca(n))e.push(await n.arrayBuffer());else if(dA(n))for await(const o of n)e.push(o);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${uA(n)}`);return e}function uA(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function cA(n){var e;return vu(n.name)||vu(n.filename)||((e=vu(n.path))==null?void 0:e.split(/[\\/]/).pop())}const vu=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},dA=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",Sm=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",_r=async n=>{const e=await fA(n.body);return Ag(e,n)},fA=async n=>{const e=new Cg;return await Promise.all(Object.entries(n||{}).map(([t,o])=>Wu(e,t,o))),e},Wu=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(aA(t)){const o=await Hg(t);n.append(e,o)}else if(Array.isArray(t))await Promise.all(t.map(o=>Wu(n,e+"[]",o)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([o,s])=>Wu(n,`${e}[${o}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var uo={},pA=function(n,e,t,o,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},hA=function(n,e,t,o){if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},Ls;Ng();async function Yg(n){var d;const{response:e}=n;if(n.options.stream)return nr("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):gn.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),o=(d=t==null?void 0:t.split(";")[0])==null?void 0:d.trim();if((o==null?void 0:o.includes("application/json"))||(o==null?void 0:o.endsWith("+json"))){const p=await e.json();return nr("response",e.status,e.url,e.headers,p),Wg(p,e)}const a=await e.text();return nr("response",e.status,e.url,e.headers,a),a}function Wg(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class da extends Promise{constructor(e,t=Yg){super(o=>{o(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new da(this.responsePromise,async t=>Wg(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class mA{constructor({baseURL:e,maxRetries:t=2,timeout:o=6e5,httpAgent:s,fetch:a}){this.baseURL=e,this.maxRetries=Tu("maxRetries",t),this.timeout=Tu("timeout",o),this.httpAgent=s,this.fetch=a??_g}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...wA(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${CA()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(async s=>{const a=s&&ca(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:t,...s,body:a}}))}getAPIList(e,t,o){return this.requestAPIList(t,{method:"get",path:e,...o})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var k;const o={...e},{method:s,path:a,query:d,headers:p={}}=o,g=ArrayBuffer.isView(o.body)||o.__binaryRequest&&typeof o.body=="string"?o.body:Sm(o.body)?o.body.body:o.body?JSON.stringify(o.body,null,2):null,h=this.calculateContentLength(g),y=this.buildURL(a,d);"timeout"in o&&Tu("timeout",o.timeout),o.timeout=o.timeout??this.timeout;const T=o.httpAgent??this.httpAgent??Ig(y),w=o.timeout+1e3;typeof((k=T==null?void 0:T.options)==null?void 0:k.timeout)=="number"&&w>(T.options.timeout??0)&&(T.options.timeout=w),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),p[this.idempotencyHeader]=e.idempotencyKey);const _=this.buildHeaders({options:o,headers:p,contentLength:h,retryCount:t});return{req:{method:s,...g&&{body:g},headers:_,...T&&{agent:T},signal:o.signal??null},url:y,timeout:o.timeout}}buildHeaders({options:e,headers:t,contentLength:o,retryCount:s}){const a={};o&&(a["content-length"]=o);const d=this.defaultHeaders(e);return xm(a,d),xm(a,t),Sm(e.body)&&pi!=="node"&&delete a["content-type"],Us(d,"x-stainless-retry-count")===void 0&&Us(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),Us(d,"x-stainless-timeout")===void 0&&Us(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:o}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,o,s){return ct.generate(e,t,o,s)}request(e,t=null){return new da(this.makeRequest(e,t))}async makeRequest(e,t){var T,w;const o=await e,s=o.maxRetries??this.maxRetries;t==null&&(t=s),await this.prepareOptions(o);const{req:a,url:d,timeout:p}=this.buildRequest(o,{retryCount:s-t});if(await this.prepareRequest(a,{url:d,options:o}),nr("request",d,o,a.headers),(T=o.signal)!=null&&T.aborted)throw new zt;const g=new AbortController,h=await this.fetchWithTimeout(d,a,p,g).catch(zu);if(h instanceof Error){if((w=o.signal)!=null&&w.aborted)throw new zt;if(t)return this.retryRequest(o,t);throw h.name==="AbortError"?new pc:new la({cause:h})}const y=Jg(h.headers);if(!h.ok){if(t&&this.shouldRetry(h)){const D=`retrying, ${t} attempts remaining`;return nr(`response (error; ${D})`,h.status,d,y),this.retryRequest(o,t,y)}const _=await h.text().catch(D=>zu(D).message),A=SA(_),k=A?void 0:_;throw nr(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,h.status,d,y,k),this.makeStatusError(h.status,A,k,y)}return{response:h,options:o,controller:g}}requestAPIList(e,t){const o=this.makeRequest(t,null);return new gA(this,o,e)}buildURL(e,t){const o=_A(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Kg(s)||(t={...s,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new de(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,o,s){const{signal:a,...d}=t||{};a&&a.addEventListener("abort",()=>s.abort());const p=setTimeout(()=>s.abort(),o),g={signal:s.signal,...d};return g.method&&(g.method=g.method.toUpperCase()),this.fetch.call(void 0,e,g).finally(()=>{clearTimeout(p)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o){let s;const a=o==null?void 0:o["retry-after-ms"];if(a){const p=parseFloat(a);Number.isNaN(p)||(s=p)}const d=o==null?void 0:o["retry-after"];if(d&&!s){const p=parseFloat(d);Number.isNaN(p)?s=Date.parse(d)-Date.now():s=p*1e3}if(!(s&&0<=s&&s<60*1e3)){const p=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,p)}return await yi(s),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,d=Math.min(.5*Math.pow(2,a),8),p=1-Math.random()*.25;return d*p*1e3}getUserAgent(){return`${this.constructor.name}/JS ${no}`}}class zg{constructor(e,t,o,s){Ls.set(this,void 0),pA(this,Ls,e),this.options=s,this.response=t,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new de("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const o=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[s,a]of o)e.url.searchParams.set(s,a);t.query=void 0,t.path=e.url.toString()}return await hA(this,Ls,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ls=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class gA extends da{constructor(e,t,o){super(t,async s=>new o(e,s.response,await Yg(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Jg=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const o=t.toString();return e[o.toLowerCase()]||e[o]}}),yA={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},He=n=>typeof n=="object"&&n!==null&&!Kg(n)&&Object.keys(n).every(e=>Xg(yA,e)),vA=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":_m(Deno.build.os),"X-Stainless-Arch":Em(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":_m(process.platform),"X-Stainless-Arch":Em(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=TA();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function TA(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const s=o[1]||0,a=o[2]||0,d=o[3]||0;return{browser:e,version:`${s}.${a}.${d}`}}}return null}const Em=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",_m=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Cm;const wA=()=>Cm??(Cm=vA()),SA=n=>{try{return JSON.parse(n)}catch{return}},EA=/^[a-z][a-z0-9+.-]*:/i,_A=n=>EA.test(n),yi=n=>new Promise(e=>setTimeout(e,n)),Tu=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new de(`${n} must be an integer`);if(e<0)throw new de(`${n} must be a positive integer`);return e},zu=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},Ds=n=>{var e,t,o,s;if(typeof process<"u")return((e=uo==null?void 0:uo[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(o=(t=Deno.env)==null?void 0:t.get)==null?void 0:o.call(t,n))==null?void 0:s.trim()};function Kg(n){if(!n)return!0;for(const e in n)return!1;return!0}function Xg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function xm(n,e){for(const t in e){if(!Xg(e,t))continue;const o=t.toLowerCase();if(!o)continue;const s=e[t];s===null?delete n[o]:s!==void 0&&(n[o]=s)}}const Am=new Set(["authorization","api-key"]);function nr(n,...e){if(typeof process<"u"&&(uo==null?void 0:uo.DEBUG)==="true"){const t=e.map(o=>{if(!o)return o;if(o.headers){const a={...o,headers:{...o.headers}};for(const d in o.headers)Am.has(d.toLowerCase())&&(a.headers[d]="REDACTED");return a}let s=null;for(const a in o)Am.has(a.toLowerCase())&&(s??(s={...o}),s[a]="REDACTED");return s??o});console.log(`OpenAI:DEBUG:${n}`,...t)}}const CA=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),xA=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",AA=n=>typeof(n==null?void 0:n.get)=="function",Us=(n,e)=>{var o;const t=e.toLowerCase();if(AA(n)){const s=((o=e[0])==null?void 0:o.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,d,p)=>d+p.toUpperCase());for(const a of[e,t,e.toUpperCase(),s]){const d=n.get(a);if(d)return d}}for(const[s,a]of Object.entries(n))if(s.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},IA=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,o=new Uint8Array(t);for(let s=0;s<t;s++)o[s]=e.charCodeAt(s);return Array.from(new Float32Array(o.buffer))}};function wu(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class fa extends zg{constructor(e,t,o,s){super(e,t,o,s),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class nt extends zg{constructor(e,t,o,s){super(e,t,o,s),this.data=o.data||[],this.has_more=o.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var o;const e=this.getPaginatedItems();if(!e.length)return null;const t=(o=e[e.length-1])==null?void 0:o.id;return t?{params:{after:t}}:null}}class he{constructor(e){this._client=e}}let Qg=class extends he{list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,kA,{query:t,...o})}},pa=class extends he{constructor(){super(...arguments),this.messages=new Qg(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,o){return this._client.post(`/chat/completions/${e}`,{body:t,...o})}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/chat/completions",ha,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class ha extends nt{}class kA extends nt{}pa.ChatCompletionsPage=ha;pa.Messages=Qg;let ma=class extends he{constructor(){super(...arguments),this.completions=new pa(this._client)}};ma.Completions=pa;ma.ChatCompletionsPage=ha;class Zg extends he{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class jg extends he{create(e,t){return this._client.post("/audio/transcriptions",_r({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class ey extends he{create(e,t){return this._client.post("/audio/translations",_r({body:e,...t,__metadata:{model:e.model}}))}}class vi extends he{constructor(){super(...arguments),this.transcriptions=new jg(this._client),this.translations=new ey(this._client),this.speech=new Zg(this._client)}}vi.Transcriptions=jg;vi.Translations=ey;vi.Speech=Zg;class hc extends he{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/batches",mc,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class mc extends nt{}hc.BatchesPage=mc;var nn=function(n,e,t,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},$e=function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},Ju,Hs,Ys,si,ai,Ws,li,kn,ui,ea,ta,ro,ty;class gc{constructor(){Ju.add(this),this.controller=new AbortController,Hs.set(this,void 0),Ys.set(this,()=>{}),si.set(this,()=>{}),ai.set(this,void 0),Ws.set(this,()=>{}),li.set(this,()=>{}),kn.set(this,{}),ui.set(this,!1),ea.set(this,!1),ta.set(this,!1),ro.set(this,!1),nn(this,Hs,new Promise((e,t)=>{nn(this,Ys,e,"f"),nn(this,si,t,"f")}),"f"),nn(this,ai,new Promise((e,t)=>{nn(this,Ws,e,"f"),nn(this,li,t,"f")}),"f"),$e(this,Hs,"f").catch(()=>{}),$e(this,ai,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},$e(this,Ju,"m",ty).bind(this))},0)}_connected(){this.ended||($e(this,Ys,"f").call(this),this._emit("connect"))}get ended(){return $e(this,ui,"f")}get errored(){return $e(this,ea,"f")}get aborted(){return $e(this,ta,"f")}abort(){this.controller.abort()}on(e,t){return($e(this,kn,"f")[e]||($e(this,kn,"f")[e]=[])).push({listener:t}),this}off(e,t){const o=$e(this,kn,"f")[e];if(!o)return this;const s=o.findIndex(a=>a.listener===t);return s>=0&&o.splice(s,1),this}once(e,t){return($e(this,kn,"f")[e]||($e(this,kn,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,o)=>{nn(this,ro,!0,"f"),e!=="error"&&this.once("error",o),this.once(e,t)})}async done(){nn(this,ro,!0,"f"),await $e(this,ai,"f")}_emit(e,...t){if($e(this,ui,"f"))return;e==="end"&&(nn(this,ui,!0,"f"),$e(this,Ws,"f").call(this));const o=$e(this,kn,"f")[e];if(o&&($e(this,kn,"f")[e]=o.filter(s=>!s.once),o.forEach(({listener:s})=>s(...t))),e==="abort"){const s=t[0];!$e(this,ro,"f")&&!(o!=null&&o.length)&&Promise.reject(s),$e(this,si,"f").call(this,s),$e(this,li,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=t[0];!$e(this,ro,"f")&&!(o!=null&&o.length)&&Promise.reject(s),$e(this,si,"f").call(this,s),$e(this,li,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Hs=new WeakMap,Ys=new WeakMap,si=new WeakMap,ai=new WeakMap,Ws=new WeakMap,li=new WeakMap,kn=new WeakMap,ui=new WeakMap,ea=new WeakMap,ta=new WeakMap,ro=new WeakMap,Ju=new WeakSet,ty=function(e){if(nn(this,ea,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new zt),e instanceof zt)return nn(this,ta,!0,"f"),this._emit("abort",e);if(e instanceof de)return this._emit("error",e);if(e instanceof Error){const t=new de(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new de(String(e)))};var se=function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},Dt=function(n,e,t,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},ut,Ku,mn,zs,rn,Er,io,Sr,na,Ft,Js,Ks,hi,ci,di,Im,km,Rm,Nm,Pm,bm,Mm;class on extends gc{constructor(){super(...arguments),ut.add(this),Ku.set(this,[]),mn.set(this,{}),zs.set(this,{}),rn.set(this,void 0),Er.set(this,void 0),io.set(this,void 0),Sr.set(this,void 0),na.set(this,void 0),Ft.set(this,void 0),Js.set(this,void 0),Ks.set(this,void 0),hi.set(this,void 0)}[(Ku=new WeakMap,mn=new WeakMap,zs=new WeakMap,rn=new WeakMap,Er=new WeakMap,io=new WeakMap,Sr=new WeakMap,na=new WeakMap,Ft=new WeakMap,Js=new WeakMap,Ks=new WeakMap,hi=new WeakMap,ut=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let o=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{o=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{o=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{o=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,d)=>t.push({resolve:a,reject:d})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new on;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const o=t==null?void 0:t.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=gn.fromReadableStream(e,this.controller);for await(const d of s)se(this,ut,"m",ci).call(this,d);if((a=s.controller.signal)!=null&&a.aborted)throw new zt;return this._addRun(se(this,ut,"m",di).call(this))}toReadableStream(){return new gn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,o,s,a){const d=new on;return d._run(()=>d._runToolAssistantStream(e,t,o,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),d}async _createToolAssistantStream(e,t,o,s,a){var h;const d=a==null?void 0:a.signal;d&&(d.aborted&&this.controller.abort(),d.addEventListener("abort",()=>this.controller.abort()));const p={...s,stream:!0},g=await e.submitToolOutputs(t,o,p,{...a,signal:this.controller.signal});this._connected();for await(const y of g)se(this,ut,"m",ci).call(this,y);if((h=g.controller.signal)!=null&&h.aborted)throw new zt;return this._addRun(se(this,ut,"m",di).call(this))}static createThreadAssistantStream(e,t,o){const s=new on;return s._run(()=>s._threadAssistantStream(e,t,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,t,o,s){const a=new on;return a._run(()=>a._runAssistantStream(e,t,o,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return se(this,Js,"f")}currentRun(){return se(this,Ks,"f")}currentMessageSnapshot(){return se(this,rn,"f")}currentRunStepSnapshot(){return se(this,hi,"f")}async finalRunSteps(){return await this.done(),Object.values(se(this,mn,"f"))}async finalMessages(){return await this.done(),Object.values(se(this,zs,"f"))}async finalRun(){if(await this.done(),!se(this,Er,"f"))throw Error("Final run was not received.");return se(this,Er,"f")}async _createThreadAssistantStream(e,t,o){var p;const s=o==null?void 0:o.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},d=await e.createAndRun(a,{...o,signal:this.controller.signal});this._connected();for await(const g of d)se(this,ut,"m",ci).call(this,g);if((p=d.controller.signal)!=null&&p.aborted)throw new zt;return this._addRun(se(this,ut,"m",di).call(this))}async _createAssistantStream(e,t,o,s){var g;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const d={...o,stream:!0},p=await e.create(t,d,{...s,signal:this.controller.signal});this._connected();for await(const h of p)se(this,ut,"m",ci).call(this,h);if((g=p.controller.signal)!=null&&g.aborted)throw new zt;return this._addRun(se(this,ut,"m",di).call(this))}static accumulateDelta(e,t){for(const[o,s]of Object.entries(t)){if(!e.hasOwnProperty(o)){e[o]=s;continue}let a=e[o];if(a==null){e[o]=s;continue}if(o==="index"||o==="type"){e[o]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(wu(a)&&wu(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(d=>typeof d=="string"||typeof d=="number")){a.push(...s);continue}for(const d of s){if(!wu(d))throw new Error(`Expected array delta entry to be an object but got: ${d}`);const p=d.index;if(p==null)throw console.error(d),new Error("Expected array delta entry to have an `index` property");if(typeof p!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${p}`);const g=a[p];g==null?a.push(d):a[p]=this.accumulateDelta(g,d)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${s}, accValue: ${a}`);e[o]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,o){return await this._createThreadAssistantStream(t,e,o)}async _runAssistantStream(e,t,o,s){return await this._createAssistantStream(t,e,o,s)}async _runToolAssistantStream(e,t,o,s,a){return await this._createToolAssistantStream(o,e,t,s,a)}}ci=function(e){if(!this.ended)switch(Dt(this,Js,e,"f"),se(this,ut,"m",Rm).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":se(this,ut,"m",Mm).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":se(this,ut,"m",km).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":se(this,ut,"m",Im).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},di=function(){if(this.ended)throw new de("stream has ended, this shouldn't happen");if(!se(this,Er,"f"))throw Error("Final run has not been received");return se(this,Er,"f")},Im=function(e){const[t,o]=se(this,ut,"m",Pm).call(this,e,se(this,rn,"f"));Dt(this,rn,t,"f"),se(this,zs,"f")[t.id]=t;for(const s of o){const a=t.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,d=t.content[s.index];if(d&&d.type=="text")this._emit("textDelta",a,d.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=se(this,io,"f")){if(se(this,Sr,"f"))switch(se(this,Sr,"f").type){case"text":this._emit("textDone",se(this,Sr,"f").text,se(this,rn,"f"));break;case"image_file":this._emit("imageFileDone",se(this,Sr,"f").image_file,se(this,rn,"f"));break}Dt(this,io,s.index,"f")}Dt(this,Sr,t.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(se(this,io,"f")!==void 0){const s=e.data.content[se(this,io,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,se(this,rn,"f"));break;case"text":this._emit("textDone",s.text,se(this,rn,"f"));break}}se(this,rn,"f")&&this._emit("messageDone",e.data),Dt(this,rn,void 0,"f")}},km=function(e){const t=se(this,ut,"m",Nm).call(this,e);switch(Dt(this,hi,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const o=e.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of o.step_details.tool_calls)a.index==se(this,na,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(se(this,Ft,"f")&&this._emit("toolCallDone",se(this,Ft,"f")),Dt(this,na,a.index,"f"),Dt(this,Ft,t.step_details.tool_calls[a.index],"f"),se(this,Ft,"f")&&this._emit("toolCallCreated",se(this,Ft,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Dt(this,hi,void 0,"f"),e.data.step_details.type=="tool_calls"&&se(this,Ft,"f")&&(this._emit("toolCallDone",se(this,Ft,"f")),Dt(this,Ft,void 0,"f")),this._emit("runStepDone",e.data,t);break}},Rm=function(e){se(this,Ku,"f").push(e),this._emit("event",e)},Nm=function(e){switch(e.event){case"thread.run.step.created":return se(this,mn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=se(this,mn,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let o=e.data;if(o.delta){const s=on.accumulateDelta(t,o.delta);se(this,mn,"f")[e.data.id]=s}return se(this,mn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":se(this,mn,"f")[e.data.id]=e.data;break}if(se(this,mn,"f")[e.data.id])return se(this,mn,"f")[e.data.id];throw new Error("No snapshot available")},Pm=function(e,t){let o=[];switch(e.event){case"thread.message.created":return[e.data,o];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in t.content){let d=t.content[a.index];t.content[a.index]=se(this,ut,"m",bm).call(this,a,d)}else t.content[a.index]=a,o.push(a);return[t,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},bm=function(e,t){return on.accumulateDelta(t,e)},Mm=function(e){switch(Dt(this,Ks,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Dt(this,Er,e.data,"f"),se(this,Ft,"f")&&(this._emit("toolCallDone",se(this,Ft,"f")),Dt(this,Ft,void 0,"f"));break}};class yc extends he{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,o){return this._client.post(`/assistants/${e}`,{body:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/assistants",vc,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class vc extends nt{}yc.AssistantsPage=vc;function Lm(n){return typeof n.parse=="function"}const co=n=>(n==null?void 0:n.role)==="assistant",ny=n=>(n==null?void 0:n.role)==="function",ry=n=>(n==null?void 0:n.role)==="tool";function Tc(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Ti(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function RA(n,e){return!e||!oy(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:wc(n,e)}function wc(n,e){const t=n.choices.map(o=>{var s;if(o.finish_reason==="length")throw new Gg;if(o.finish_reason==="content_filter")throw new qg;return{...o,message:{...o.message,...o.message.tool_calls?{tool_calls:((s=o.message.tool_calls)==null?void 0:s.map(a=>PA(e,a)))??void 0}:void 0,parsed:o.message.content&&!o.message.refusal?NA(e,o.message.content):null}}});return{...n,choices:t}}function NA(n,e){var t,o;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((o=n.response_format)==null?void 0:o.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function PA(n,e){var o;const t=(o=n.tools)==null?void 0:o.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ti(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function bA(n,e){var o;if(!n)return!1;const t=(o=n.tools)==null?void 0:o.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return Ti(t)||(t==null?void 0:t.function.strict)||!1}function oy(n){var e;return Tc(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Ti(t)||t.type==="function"&&t.function.strict===!0))??!1}function MA(n){for(const e of n??[]){if(e.type!=="function")throw new de(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new de(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var kt=function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},mt,Xu,ra,Qu,Zu,ju,iy,ec;const Dm=10;class sy extends gc{constructor(){super(...arguments),mt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var o;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(o=e.choices[0])==null?void 0:o.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(ny(e)||ry(e))&&e.content)this._emit("functionCallResult",e.content);else if(co(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(co(e)&&e.tool_calls)for(const o of e.tool_calls)o.type==="function"&&this._emit("functionCall",o.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new de("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),kt(this,mt,"m",Xu).call(this)}async finalMessage(){return await this.done(),kt(this,mt,"m",ra).call(this)}async finalFunctionCall(){return await this.done(),kt(this,mt,"m",Qu).call(this)}async finalFunctionCallResult(){return await this.done(),kt(this,mt,"m",Zu).call(this)}async totalUsage(){return await this.done(),kt(this,mt,"m",ju).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=kt(this,mt,"m",ra).call(this);t&&this._emit("finalMessage",t);const o=kt(this,mt,"m",Xu).call(this);o&&this._emit("finalContent",o);const s=kt(this,mt,"m",Qu).call(this);s&&this._emit("finalFunctionCall",s);const a=kt(this,mt,"m",Zu).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(d=>d.usage)&&this._emit("totalUsage",kt(this,mt,"m",ju).call(this))}async _createChatCompletion(e,t,o){const s=o==null?void 0:o.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),kt(this,mt,"m",iy).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(wc(a,t))}async _runChatCompletion(e,t,o){for(const s of t.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,t,o)}async _runFunctions(e,t,o){var w;const s="function",{function_call:a="auto",stream:d,...p}=t,g=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:h=Dm}=o||{},y={};for(const _ of t.functions)y[_.name||_.function.name]=_;const T=t.functions.map(_=>({name:_.name||_.function.name,parameters:_.parameters,description:_.description}));for(const _ of t.messages)this._addMessage(_,!1);for(let _=0;_<h;++_){const k=(w=(await this._createChatCompletion(e,{...p,function_call:a,functions:T,messages:[...this.messages]},o)).choices[0])==null?void 0:w.message;if(!k)throw new de("missing message in ChatCompletion response");if(!k.function_call)return;const{name:N,arguments:B}=k.function_call,D=y[N];if(D){if(g&&g!==N){const O=`Invalid function_call: ${JSON.stringify(N)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:s,name:N,content:O});continue}}else{const O=`Invalid function_call: ${JSON.stringify(N)}. Available options are: ${T.map(q=>JSON.stringify(q.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:N,content:O});continue}let F;try{F=Lm(D)?await D.parse(B):B}catch(O){this._addMessage({role:s,name:N,content:O instanceof Error?O.message:String(O)});continue}const U=await D.function(F,this),H=kt(this,mt,"m",ec).call(this,U);if(this._addMessage({role:s,name:N,content:H}),g)return}}async _runTools(e,t,o){var _,A,k;const s="tool",{tool_choice:a="auto",stream:d,...p}=t,g=typeof a!="string"&&((_=a==null?void 0:a.function)==null?void 0:_.name),{maxChatCompletions:h=Dm}=o||{},y=t.tools.map(N=>{if(Ti(N)){if(!N.$callback)throw new de("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:N.$callback,name:N.function.name,description:N.function.description||"",parameters:N.function.parameters,parse:N.$parseRaw,strict:!0}}}return N}),T={};for(const N of y)N.type==="function"&&(T[N.function.name||N.function.function.name]=N.function);const w="tools"in t?y.map(N=>N.type==="function"?{type:"function",function:{name:N.function.name||N.function.function.name,parameters:N.function.parameters,description:N.function.description,strict:N.function.strict}}:N):void 0;for(const N of t.messages)this._addMessage(N,!1);for(let N=0;N<h;++N){const D=(A=(await this._createChatCompletion(e,{...p,tool_choice:a,tools:w,messages:[...this.messages]},o)).choices[0])==null?void 0:A.message;if(!D)throw new de("missing message in ChatCompletion response");if(!((k=D.tool_calls)!=null&&k.length))return;for(const F of D.tool_calls){if(F.type!=="function")continue;const U=F.id,{name:H,arguments:O}=F.function,q=T[H];if(q){if(g&&g!==H){const te=`Invalid tool_call: ${JSON.stringify(H)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:s,tool_call_id:U,content:te});continue}}else{const te=`Invalid tool_call: ${JSON.stringify(H)}. Available options are: ${Object.keys(T).map(me=>JSON.stringify(me)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:U,content:te});continue}let ie;try{ie=Lm(q)?await q.parse(O):O}catch(te){const me=te instanceof Error?te.message:String(te);this._addMessage({role:s,tool_call_id:U,content:me});continue}const z=await q.function(ie,this),J=kt(this,mt,"m",ec).call(this,z);if(this._addMessage({role:s,tool_call_id:U,content:J}),g)return}}}}mt=new WeakSet,Xu=function(){return kt(this,mt,"m",ra).call(this).content??null},ra=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(co(t)){const{function_call:o,...s}=t,a={...s,content:t.content??null,refusal:t.refusal??null};return o&&(a.function_call=o),a}}throw new de("stream ended without producing a ChatCompletionMessage with role=assistant")},Qu=function(){var e,t;for(let o=this.messages.length-1;o>=0;o--){const s=this.messages[o];if(co(s)&&(s!=null&&s.function_call))return s.function_call;if(co(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(t=s.tool_calls.at(-1))==null?void 0:t.function}},Zu=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(ny(t)&&t.content!=null||ry(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(o=>{var s;return o.role==="assistant"&&((s=o.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},ju=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},iy=function(e){if(e.n!=null&&e.n>1)throw new de("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ec=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class mi extends sy{static runFunctions(e,t,o){const s=new mi,a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,o){const s=new mi,a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}_addMessage(e,t=!0){super._addMessage(e,t),co(e)&&e.content&&this._emit("content",e.content)}}const ay=1,ly=2,uy=4,cy=8,dy=16,fy=32,py=64,hy=128,my=256,gy=hy|my,yy=dy|fy|gy|py,vy=ay|ly|yy,Ty=uy|cy,LA=vy|Ty,st={STR:ay,NUM:ly,ARR:uy,OBJ:cy,NULL:dy,BOOL:fy,NAN:py,INFINITY:hy,MINUS_INFINITY:my,INF:gy,SPECIAL:yy,ATOM:vy,COLLECTION:Ty,ALL:LA};class DA extends Error{}class UA extends Error{}function FA(n,e=st.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return OA(n.trim(),e)}const OA=(n,e)=>{const t=n.length;let o=0;const s=w=>{throw new DA(`${w} at position ${o}`)},a=w=>{throw new UA(`${w} at position ${o}`)},d=()=>(T(),o>=t&&s("Unexpected end of input"),n[o]==='"'?p():n[o]==="{"?g():n[o]==="["?h():n.substring(o,o+4)==="null"||st.NULL&e&&t-o<4&&"null".startsWith(n.substring(o))?(o+=4,null):n.substring(o,o+4)==="true"||st.BOOL&e&&t-o<4&&"true".startsWith(n.substring(o))?(o+=4,!0):n.substring(o,o+5)==="false"||st.BOOL&e&&t-o<5&&"false".startsWith(n.substring(o))?(o+=5,!1):n.substring(o,o+8)==="Infinity"||st.INFINITY&e&&t-o<8&&"Infinity".startsWith(n.substring(o))?(o+=8,1/0):n.substring(o,o+9)==="-Infinity"||st.MINUS_INFINITY&e&&1<t-o&&t-o<9&&"-Infinity".startsWith(n.substring(o))?(o+=9,-1/0):n.substring(o,o+3)==="NaN"||st.NAN&e&&t-o<3&&"NaN".startsWith(n.substring(o))?(o+=3,NaN):y()),p=()=>{const w=o;let _=!1;for(o++;o<t&&(n[o]!=='"'||_&&n[o-1]==="\\");)_=n[o]==="\\"?!_:!1,o++;if(n.charAt(o)=='"')try{return JSON.parse(n.substring(w,++o-Number(_)))}catch(A){a(String(A))}else if(st.STR&e)try{return JSON.parse(n.substring(w,o-Number(_))+'"')}catch{return JSON.parse(n.substring(w,n.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},g=()=>{o++,T();const w={};try{for(;n[o]!=="}";){if(T(),o>=t&&st.OBJ&e)return w;const _=p();T(),o++;try{const A=d();Object.defineProperty(w,_,{value:A,writable:!0,enumerable:!0,configurable:!0})}catch(A){if(st.OBJ&e)return w;throw A}T(),n[o]===","&&o++}}catch{if(st.OBJ&e)return w;s("Expected '}' at end of object")}return o++,w},h=()=>{o++;const w=[];try{for(;n[o]!=="]";)w.push(d()),T(),n[o]===","&&o++}catch{if(st.ARR&e)return w;s("Expected ']' at end of array")}return o++,w},y=()=>{if(o===0){n==="-"&&st.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(n)}catch(_){if(st.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(_))}}const w=o;for(n[o]==="-"&&o++;n[o]&&!",]}".includes(n[o]);)o++;o==t&&!(st.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(n.substring(w,o))}catch{n.substring(w,o)==="-"&&st.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(n.substring(w,n.lastIndexOf("e")))}catch(A){a(String(A))}}},T=()=>{for(;o<t&&` 
\r	`.includes(n[o]);)o++};return d()},Um=n=>FA(n,st.ALL^st.NUM);var Qr=function(n,e,t,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Me=function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},et,An,Zr,Zn,Su,Fs,Eu,_u,Cu,Os,xu,Fm;class gi extends sy{constructor(e){super(),et.add(this),An.set(this,void 0),Zr.set(this,void 0),Zn.set(this,void 0),Qr(this,An,e,"f"),Qr(this,Zr,[],"f")}get currentChatCompletionSnapshot(){return Me(this,Zn,"f")}static fromReadableStream(e){const t=new gi(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,o){const s=new gi(t);return s._run(()=>s._runChatCompletion(e,{...t,stream:!0},{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,t,o){var d;super._createChatCompletion;const s=o==null?void 0:o.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Me(this,et,"m",Su).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const p of a)Me(this,et,"m",Eu).call(this,p);if((d=a.controller.signal)!=null&&d.aborted)throw new zt;return this._addChatCompletion(Me(this,et,"m",Os).call(this))}async _fromReadableStream(e,t){var d;const o=t==null?void 0:t.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Me(this,et,"m",Su).call(this),this._connected();const s=gn.fromReadableStream(e,this.controller);let a;for await(const p of s)a&&a!==p.id&&this._addChatCompletion(Me(this,et,"m",Os).call(this)),Me(this,et,"m",Eu).call(this,p),a=p.id;if((d=s.controller.signal)!=null&&d.aborted)throw new zt;return this._addChatCompletion(Me(this,et,"m",Os).call(this))}[(An=new WeakMap,Zr=new WeakMap,Zn=new WeakMap,et=new WeakSet,Su=function(){this.ended||Qr(this,Zn,void 0,"f")},Fs=function(t){let o=Me(this,Zr,"f")[t.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Me(this,Zr,"f")[t.index]=o,o)},Eu=function(t){var s,a,d,p,g,h,y,T,w,_,A,k,N,B,D;if(this.ended)return;const o=Me(this,et,"m",Fm).call(this,t);this._emit("chunk",t,o);for(const F of t.choices){const U=o.choices[F.index];F.delta.content!=null&&((s=U.message)==null?void 0:s.role)==="assistant"&&((a=U.message)!=null&&a.content)&&(this._emit("content",F.delta.content,U.message.content),this._emit("content.delta",{delta:F.delta.content,snapshot:U.message.content,parsed:U.message.parsed})),F.delta.refusal!=null&&((d=U.message)==null?void 0:d.role)==="assistant"&&((p=U.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:F.delta.refusal,snapshot:U.message.refusal}),((g=F.logprobs)==null?void 0:g.content)!=null&&((h=U.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(y=F.logprobs)==null?void 0:y.content,snapshot:((T=U.logprobs)==null?void 0:T.content)??[]}),((w=F.logprobs)==null?void 0:w.refusal)!=null&&((_=U.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(A=F.logprobs)==null?void 0:A.refusal,snapshot:((k=U.logprobs)==null?void 0:k.refusal)??[]});const H=Me(this,et,"m",Fs).call(this,U);U.finish_reason&&(Me(this,et,"m",Cu).call(this,U),H.current_tool_call_index!=null&&Me(this,et,"m",_u).call(this,U,H.current_tool_call_index));for(const O of F.delta.tool_calls??[])H.current_tool_call_index!==O.index&&(Me(this,et,"m",Cu).call(this,U),H.current_tool_call_index!=null&&Me(this,et,"m",_u).call(this,U,H.current_tool_call_index)),H.current_tool_call_index=O.index;for(const O of F.delta.tool_calls??[]){const q=(N=U.message.tool_calls)==null?void 0:N[O.index];q!=null&&q.type&&((q==null?void 0:q.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(B=q.function)==null?void 0:B.name,index:O.index,arguments:q.function.arguments,parsed_arguments:q.function.parsed_arguments,arguments_delta:((D=O.function)==null?void 0:D.arguments)??""}):(q==null||q.type,void 0))}}},_u=function(t,o){var d,p,g;if(Me(this,et,"m",Fs).call(this,t).done_tool_calls.has(o))return;const a=(d=t.message.tool_calls)==null?void 0:d[o];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const h=(g=(p=Me(this,An,"f"))==null?void 0:p.tools)==null?void 0:g.find(y=>y.type==="function"&&y.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:o,arguments:a.function.arguments,parsed_arguments:Ti(h)?h.$parseRaw(a.function.arguments):h!=null&&h.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Cu=function(t){var s,a;const o=Me(this,et,"m",Fs).call(this,t);if(t.message.content&&!o.content_done){o.content_done=!0;const d=Me(this,et,"m",xu).call(this);this._emit("content.done",{content:t.message.content,parsed:d?d.$parseRaw(t.message.content):null})}t.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(s=t.logprobs)!=null&&s.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Os=function(){if(this.ended)throw new de("stream has ended, this shouldn't happen");const t=Me(this,Zn,"f");if(!t)throw new de("request ended without sending any chunks");return Qr(this,Zn,void 0,"f"),Qr(this,Zr,[],"f"),GA(t,Me(this,An,"f"))},xu=function(){var o;const t=(o=Me(this,An,"f"))==null?void 0:o.response_format;return Tc(t)?t:null},Fm=function(t){var o,s,a,d;let p=Me(this,Zn,"f");const{choices:g,...h}=t;p?Object.assign(p,h):p=Qr(this,Zn,{...h,choices:[]},"f");for(const{delta:y,finish_reason:T,index:w,logprobs:_=null,...A}of t.choices){let k=p.choices[w];if(k||(k=p.choices[w]={finish_reason:T,index:w,message:{},logprobs:_,...A}),_)if(!k.logprobs)k.logprobs=Object.assign({},_);else{const{content:O,refusal:q,...ie}=_;Object.assign(k.logprobs,ie),O&&((o=k.logprobs).content??(o.content=[]),k.logprobs.content.push(...O)),q&&((s=k.logprobs).refusal??(s.refusal=[]),k.logprobs.refusal.push(...q))}if(T&&(k.finish_reason=T,Me(this,An,"f")&&oy(Me(this,An,"f")))){if(T==="length")throw new Gg;if(T==="content_filter")throw new qg}if(Object.assign(k,A),!y)continue;const{content:N,refusal:B,function_call:D,role:F,tool_calls:U,...H}=y;if(Object.assign(k.message,H),B&&(k.message.refusal=(k.message.refusal||"")+B),F&&(k.message.role=F),D&&(k.message.function_call?(D.name&&(k.message.function_call.name=D.name),D.arguments&&((a=k.message.function_call).arguments??(a.arguments=""),k.message.function_call.arguments+=D.arguments)):k.message.function_call=D),N&&(k.message.content=(k.message.content||"")+N,!k.message.refusal&&Me(this,et,"m",xu).call(this)&&(k.message.parsed=Um(k.message.content))),U){k.message.tool_calls||(k.message.tool_calls=[]);for(const{index:O,id:q,type:ie,function:z,...J}of U){const te=(d=k.message.tool_calls)[O]??(d[O]={});Object.assign(te,J),q&&(te.id=q),ie&&(te.type=ie),z&&(te.function??(te.function={name:z.name??"",arguments:""})),z!=null&&z.name&&(te.function.name=z.name),z!=null&&z.arguments&&(te.function.arguments+=z.arguments,bA(Me(this,An,"f"),te)&&(te.function.parsed_arguments=Um(te.function.arguments)))}}}return p},Symbol.asyncIterator)](){const e=[],t=[];let o=!1;return this.on("chunk",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{o=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{o=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{o=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,d)=>t.push({resolve:a,reject:d})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new gn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function GA(n,e){const{id:t,choices:o,created:s,model:a,system_fingerprint:d,...p}=n,g={...p,id:t,choices:o.map(({message:h,finish_reason:y,index:T,logprobs:w,..._})=>{if(!y)throw new de(`missing finish_reason for choice ${T}`);const{content:A=null,function_call:k,tool_calls:N,...B}=h,D=h.role;if(!D)throw new de(`missing role for choice ${T}`);if(k){const{arguments:F,name:U}=k;if(F==null)throw new de(`missing function_call.arguments for choice ${T}`);if(!U)throw new de(`missing function_call.name for choice ${T}`);return{..._,message:{content:A,function_call:{arguments:F,name:U},role:D,refusal:h.refusal??null},finish_reason:y,index:T,logprobs:w}}return N?{..._,index:T,finish_reason:y,logprobs:w,message:{...B,role:D,content:A,refusal:h.refusal??null,tool_calls:N.map((F,U)=>{const{function:H,type:O,id:q,...ie}=F,{arguments:z,name:J,...te}=H||{};if(q==null)throw new de(`missing choices[${T}].tool_calls[${U}].id
${Gs(n)}`);if(O==null)throw new de(`missing choices[${T}].tool_calls[${U}].type
${Gs(n)}`);if(J==null)throw new de(`missing choices[${T}].tool_calls[${U}].function.name
${Gs(n)}`);if(z==null)throw new de(`missing choices[${T}].tool_calls[${U}].function.arguments
${Gs(n)}`);return{...ie,id:q,type:O,function:{...te,name:J,arguments:z}}})}}:{..._,message:{...B,content:A,role:D,refusal:h.refusal??null},finish_reason:y,index:T,logprobs:w}}),created:s,model:a,object:"chat.completion",...d?{system_fingerprint:d}:{}};return RA(g,e)}function Gs(n){return JSON.stringify(n)}class fo extends gi{static fromReadableStream(e){const t=new fo(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,o){const s=new fo(null),a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,o){const s=new fo(t),a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}}let wy=class extends he{parse(e,t){return MA(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(o=>wc(o,e))}runFunctions(e,t){return e.stream?fo.runFunctions(this._client,e,t):mi.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?fo.runTools(this._client,e,t):mi.runTools(this._client,e,t)}stream(e,t){return gi.createChatCompletion(this._client,e,t)}};class tc extends he{constructor(){super(...arguments),this.completions=new wy(this._client)}}(function(n){n.Completions=wy})(tc||(tc={}));class Sy extends he{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Ey extends he{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class ga extends he{constructor(){super(...arguments),this.sessions=new Sy(this._client),this.transcriptionSessions=new Ey(this._client)}}ga.Sessions=Sy;ga.TranscriptionSessions=Ey;class Sc extends he{create(e,t,o){return this._client.post(`/threads/${e}/messages`,{body:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(e,t,o){return this._client.get(`/threads/${e}/messages/${t}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(e,t,o,s){return this._client.post(`/threads/${e}/messages/${t}`,{body:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Ec,{query:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(e,t,o){return this._client.delete(`/threads/${e}/messages/${t}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class Ec extends nt{}Sc.MessagesPage=Ec;class _c extends he{retrieve(e,t,o,s={},a){return He(s)?this.retrieve(e,t,o,{},s):this._client.get(`/threads/${e}/runs/${t}/steps/${o}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,o={},s){return He(o)?this.list(e,t,{},o):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Cc,{query:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Cc extends nt{}_c.RunStepsPage=Cc;let wi=class extends he{constructor(){super(...arguments),this.steps=new _c(this._client)}create(e,t,o){const{include:s,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:a,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:t.stream??!1})}retrieve(e,t,o){return this._client.get(`/threads/${e}/runs/${t}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(e,t,o,s){return this._client.post(`/threads/${e}/runs/${t}`,{body:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,xc,{query:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}cancel(e,t,o){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(e,t,o){const s=await this.create(e,t,o);return await this.poll(e,s.id,o)}createAndStream(e,t,o){return on.createAssistantStream(e,this._client.beta.threads.runs,t,o)}async poll(e,t,o){const s={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const{data:a,response:d}=await this.retrieve(e,t,{...o,headers:{...o==null?void 0:o.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let p=5e3;if(o!=null&&o.pollIntervalMs)p=o.pollIntervalMs;else{const g=d.headers.get("openai-poll-after-ms");if(g){const h=parseInt(g);isNaN(h)||(p=h)}}await yi(p);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,o){return on.createAssistantStream(e,this._client.beta.threads.runs,t,o)}submitToolOutputs(e,t,o,s){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:o.stream??!1})}async submitToolOutputsAndPoll(e,t,o,s){const a=await this.submitToolOutputs(e,t,o,s);return await this.poll(e,a.id,s)}submitToolOutputsStream(e,t,o,s){return on.createToolAssistantStream(e,t,this._client.beta.threads.runs,o,s)}};class xc extends nt{}wi.RunsPage=xc;wi.Steps=_c;wi.RunStepsPage=Cc;class yo extends he{constructor(){super(...arguments),this.runs=new wi(this._client),this.messages=new Sc(this._client)}create(e={},t){return He(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,o){return this._client.post(`/threads/${e}`,{body:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const o=await this.createAndRun(e,t);return await this.runs.poll(o.thread_id,o.id,t)}createAndRunStream(e,t){return on.createThreadAssistantStream(e,this._client.beta.threads,t)}}yo.Runs=wi;yo.RunsPage=xc;yo.Messages=Sc;yo.MessagesPage=Ec;class vo extends he{constructor(){super(...arguments),this.realtime=new ga(this._client),this.chat=new tc(this._client),this.assistants=new yc(this._client),this.threads=new yo(this._client)}}vo.Realtime=ga;vo.Assistants=yc;vo.AssistantsPage=vc;vo.Threads=yo;class _y extends he{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Cy extends he{retrieve(e,t,o){return this._client.get(`/containers/${e}/files/${t}/content`,{...o,headers:{Accept:"application/binary",...o==null?void 0:o.headers},__binaryResponse:!0})}}let ya=class extends he{constructor(){super(...arguments),this.content=new Cy(this._client)}create(e,t,o){return this._client.post(`/containers/${e}/files`,_r({body:t,...o}))}retrieve(e,t,o){return this._client.get(`/containers/${e}/files/${t}`,o)}list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,Ac,{query:t,...o})}del(e,t,o){return this._client.delete(`/containers/${e}/files/${t}`,{...o,headers:{Accept:"*/*",...o==null?void 0:o.headers}})}};class Ac extends nt{}ya.FileListResponsesPage=Ac;ya.Content=Cy;class Si extends he{constructor(){super(...arguments),this.files=new ya(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/containers",Ic,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class Ic extends nt{}Si.ContainerListResponsesPage=Ic;Si.Files=ya;Si.FileListResponsesPage=Ac;class xy extends he{create(e,t){const o=!!e.encoding_format;let s=o?e.encoding_format:"base64";o&&nr("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...t});return o?a:(nr("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(d=>(d&&d.data&&d.data.forEach(p=>{const g=p.embedding;p.embedding=IA(g)}),d)))}}class kc extends he{retrieve(e,t,o,s){return this._client.get(`/evals/${e}/runs/${t}/output_items/${o}`,s)}list(e,t,o={},s){return He(o)?this.list(e,t,{},o):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,Rc,{query:o,...s})}}class Rc extends nt{}kc.OutputItemListResponsesPage=Rc;class Ei extends he{constructor(){super(...arguments),this.outputItems=new kc(this._client)}create(e,t,o){return this._client.post(`/evals/${e}/runs`,{body:t,...o})}retrieve(e,t,o){return this._client.get(`/evals/${e}/runs/${t}`,o)}list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Nc,{query:t,...o})}del(e,t,o){return this._client.delete(`/evals/${e}/runs/${t}`,o)}cancel(e,t,o){return this._client.post(`/evals/${e}/runs/${t}`,o)}}class Nc extends nt{}Ei.RunListResponsesPage=Nc;Ei.OutputItems=kc;Ei.OutputItemListResponsesPage=Rc;class _i extends he{constructor(){super(...arguments),this.runs=new Ei(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,o){return this._client.post(`/evals/${e}`,{body:t,...o})}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/evals",Pc,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class Pc extends nt{}_i.EvalListResponsesPage=Pc;_i.Runs=Ei;_i.RunListResponsesPage=Nc;let bc=class extends he{create(e,t){return this._client.post("/files",_r({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/files",Mc,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:o=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let d=await this.retrieve(e);for(;!d.status||!s.has(d.status);)if(await yi(t),d=await this.retrieve(e),Date.now()-a>o)throw new pc({message:`Giving up on waiting for file ${e} to finish processing after ${o} milliseconds.`});return d}};class Mc extends nt{}bc.FileObjectsPage=Mc;class Ay extends he{}let Iy=class extends he{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Lc extends he{constructor(){super(...arguments),this.graders=new Iy(this._client)}}Lc.Graders=Iy;class Dc extends he{create(e,t,o){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Uc,{body:t,method:"post",...o})}retrieve(e,t={},o){return He(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...o})}del(e,t,o){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,o)}}class Uc extends fa{}Dc.PermissionCreateResponsesPage=Uc;let va=class extends he{constructor(){super(...arguments),this.permissions=new Dc(this._client)}};va.Permissions=Dc;va.PermissionCreateResponsesPage=Uc;class Fc extends he{list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Oc,{query:t,...o})}}class Oc extends nt{}Fc.FineTuningJobCheckpointsPage=Oc;class To extends he{constructor(){super(...arguments),this.checkpoints=new Fc(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Gc,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},o){return He(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,qc,{query:t,...o})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Gc extends nt{}class qc extends nt{}To.FineTuningJobsPage=Gc;To.FineTuningJobEventsPage=qc;To.Checkpoints=Fc;To.FineTuningJobCheckpointsPage=Oc;class or extends he{constructor(){super(...arguments),this.methods=new Ay(this._client),this.jobs=new To(this._client),this.checkpoints=new va(this._client),this.alpha=new Lc(this._client)}}or.Methods=Ay;or.Jobs=To;or.FineTuningJobsPage=Gc;or.FineTuningJobEventsPage=qc;or.Checkpoints=va;or.Alpha=Lc;class ky extends he{}class Vc extends he{constructor(){super(...arguments),this.graderModels=new ky(this._client)}}Vc.GraderModels=ky;class Ry extends he{createVariation(e,t){return this._client.post("/images/variations",_r({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",_r({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Bc extends he{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",$c,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class $c extends fa{}Bc.ModelsPage=$c;class Ny extends he{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function qA(n,e){return!e||!BA(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(o=>({...o,parsed:null}))}:t)}:Py(n,e)}function Py(n,e){const t=n.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:YA(e,s)};if(s.type==="message"){const a=s.content.map(d=>d.type==="output_text"?{...d,parsed:VA(e,d.text)}:d);return{...s,content:a}}return s}),o=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||by(o),Object.defineProperty(o,"output_parsed",{enumerable:!0,get(){for(const s of o.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),o}function VA(n,e){var t,o,s,a;return((o=(t=n.text)==null?void 0:t.format)==null?void 0:o.type)!=="json_schema"?null:"$parseRaw"in((s=n.text)==null?void 0:s.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function BA(n){var e;return!!Tc((e=n.text)==null?void 0:e.format)}function $A(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function HA(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function YA(n,e){const t=HA(n.tools??[],e.name);return{...e,...e,parsed_arguments:$A(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function by(n){const e=[];for(const t of n.output)if(t.type==="message")for(const o of t.content)o.type==="output_text"&&e.push(o.text);n.output_text=e.join("")}class My extends he{list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,zA,{query:t,...o})}}var jr=function(n,e,t,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},jn=function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},eo,qs,er,Vs,Om,Gm,qm,Vm;class Hc extends gc{constructor(e){super(),eo.add(this),qs.set(this,void 0),er.set(this,void 0),Vs.set(this,void 0),jr(this,qs,e,"f")}static createResponse(e,t,o){const s=new Hc(t);return s._run(()=>s._createOrRetrieveResponse(e,t,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,t,o){var p;const s=o==null?void 0:o.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),jn(this,eo,"m",Om).call(this);let a,d=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...o,signal:this.controller.signal,stream:!0}),d=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...o,signal:this.controller.signal}),this._connected();for await(const g of a)jn(this,eo,"m",Gm).call(this,g,d);if((p=a.controller.signal)!=null&&p.aborted)throw new zt;return jn(this,eo,"m",qm).call(this)}[(qs=new WeakMap,er=new WeakMap,Vs=new WeakMap,eo=new WeakSet,Om=function(){this.ended||jr(this,er,void 0,"f")},Gm=function(t,o){if(this.ended)return;const s=(d,p)=>{(o==null||p.sequence_number>o)&&this._emit(d,p)},a=jn(this,eo,"m",Vm).call(this,t);switch(s("event",t),t.type){case"response.output_text.delta":{const d=a.output[t.output_index];if(!d)throw new de(`missing output at index ${t.output_index}`);if(d.type==="message"){const p=d.content[t.content_index];if(!p)throw new de(`missing content at index ${t.content_index}`);if(p.type!=="output_text")throw new de(`expected content to be 'output_text', got ${p.type}`);s("response.output_text.delta",{...t,snapshot:p.text})}break}case"response.function_call_arguments.delta":{const d=a.output[t.output_index];if(!d)throw new de(`missing output at index ${t.output_index}`);d.type==="function_call"&&s("response.function_call_arguments.delta",{...t,snapshot:d.arguments});break}default:s(t.type,t);break}},qm=function(){if(this.ended)throw new de("stream has ended, this shouldn't happen");const t=jn(this,er,"f");if(!t)throw new de("request ended without sending any events");jr(this,er,void 0,"f");const o=WA(t,jn(this,qs,"f"));return jr(this,Vs,o,"f"),o},Vm=function(t){let o=jn(this,er,"f");if(!o){if(t.type!=="response.created")throw new de(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return o=jr(this,er,t.response,"f"),o}switch(t.type){case"response.output_item.added":{o.output.push(t.item);break}case"response.content_part.added":{const s=o.output[t.output_index];if(!s)throw new de(`missing output at index ${t.output_index}`);s.type==="message"&&s.content.push(t.part);break}case"response.output_text.delta":{const s=o.output[t.output_index];if(!s)throw new de(`missing output at index ${t.output_index}`);if(s.type==="message"){const a=s.content[t.content_index];if(!a)throw new de(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new de(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const s=o.output[t.output_index];if(!s)throw new de(`missing output at index ${t.output_index}`);s.type==="function_call"&&(s.arguments+=t.delta);break}case"response.completed":{jr(this,er,t.response,"f");break}}return o},Symbol.asyncIterator)](){const e=[],t=[];let o=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{o=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{o=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{o=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,d)=>t.push({resolve:a,reject:d})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=jn(this,Vs,"f");if(!e)throw new de("stream ended without producing a ChatCompletion");return e}}function WA(n,e){return qA(n,e)}class Yc extends he{constructor(){super(...arguments),this.inputItems=new My(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&by(o),o))}retrieve(e,t={},o){return this._client.get(`/responses/${e}`,{query:t,...o,stream:(t==null?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(o=>Py(o,e))}stream(e,t){return Hc.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class zA extends nt{}Yc.InputItems=My;class Ly extends he{create(e,t,o){return this._client.post(`/uploads/${e}/parts`,_r({body:t,...o}))}}class Wc extends he{constructor(){super(...arguments),this.parts=new Ly(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,o){return this._client.post(`/uploads/${e}/complete`,{body:t,...o})}}Wc.Parts=Ly;const JA=async n=>{const e=await Promise.allSettled(n),t=e.filter(s=>s.status==="rejected");if(t.length){for(const s of t)console.error(s.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const o=[];for(const s of e)s.status==="fulfilled"&&o.push(s.value);return o};class Ta extends he{create(e,t,o){return this._client.post(`/vector_stores/${e}/files`,{body:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(e,t,o){return this._client.get(`/vector_stores/${e}/files/${t}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(e,t,o,s){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},o){return He(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,wa,{query:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(e,t,o){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(e,t,o){const s=await this.create(e,t,o);return await this.poll(e,s.id,o)}async poll(e,t,o){const s={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...o,headers:s}).withResponse(),d=a.data;switch(d.status){case"in_progress":let p=5e3;if(o!=null&&o.pollIntervalMs)p=o.pollIntervalMs;else{const g=a.response.headers.get("openai-poll-after-ms");if(g){const h=parseInt(g);isNaN(h)||(p=h)}}await yi(p);break;case"failed":case"completed":return d}}}async upload(e,t,o){const s=await this._client.files.create({file:t,purpose:"assistants"},o);return this.create(e,{file_id:s.id},o)}async uploadAndPoll(e,t,o){const s=await this.upload(e,t,o);return await this.poll(e,s.id,o)}content(e,t,o){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,zc,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class wa extends nt{}class zc extends fa{}Ta.VectorStoreFilesPage=wa;Ta.FileContentResponsesPage=zc;class Dy extends he{create(e,t,o){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(e,t,o){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}cancel(e,t,o){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(e,t,o){const s=await this.create(e,t);return await this.poll(e,s.id,o)}listFiles(e,t,o={},s){return He(o)?this.listFiles(e,t,{},o):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,wa,{query:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,t,o){const s={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const{data:a,response:d}=await this.retrieve(e,t,{...o,headers:s}).withResponse();switch(a.status){case"in_progress":let p=5e3;if(o!=null&&o.pollIntervalMs)p=o.pollIntervalMs;else{const g=d.headers.get("openai-poll-after-ms");if(g){const h=parseInt(g);isNaN(h)||(p=h)}}await yi(p);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:o=[]},s){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,d=Math.min(a,t.length),p=this._client,g=t.values(),h=[...o];async function y(w){for(let _ of w){const A=await p.files.create({file:_,purpose:"assistants"},s);h.push(A.id)}}const T=Array(d).fill(g).map(y);return await JA(T),await this.createAndPoll(e,{file_ids:h})}}class ir extends he{constructor(){super(...arguments),this.files=new Ta(this._client),this.fileBatches=new Dy(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,o){return this._client.post(`/vector_stores/${e}`,{body:t,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e={},t){return He(e)?this.list({},e):this._client.getAPIList("/vector_stores",Jc,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,o){return this._client.getAPIList(`/vector_stores/${e}/search`,Kc,{body:t,method:"post",...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class Jc extends nt{}class Kc extends fa{}ir.VectorStoresPage=Jc;ir.VectorStoreSearchResponsesPage=Kc;ir.Files=Ta;ir.VectorStoreFilesPage=wa;ir.FileContentResponsesPage=zc;ir.FileBatches=Dy;var Uy;class ve extends mA{constructor({baseURL:e=Ds("OPENAI_BASE_URL"),apiKey:t=Ds("OPENAI_API_KEY"),organization:o=Ds("OPENAI_ORG_ID")??null,project:s=Ds("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new de("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const d={apiKey:t,organization:o,project:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&xA())throw new de(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:d.baseURL,timeout:d.timeout??6e5,httpAgent:d.httpAgent,maxRetries:d.maxRetries,fetch:d.fetch}),this.completions=new _y(this),this.chat=new ma(this),this.embeddings=new xy(this),this.files=new bc(this),this.images=new Ry(this),this.audio=new vi(this),this.moderations=new Ny(this),this.models=new Bc(this),this.fineTuning=new or(this),this.graders=new Vc(this),this.vectorStores=new ir(this),this.beta=new vo(this),this.batches=new hc(this),this.uploads=new Wc(this),this.responses=new Yc(this),this.evals=new _i(this),this.containers=new Si(this),this._options=d,this.apiKey=t,this.organization=o,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Qx(e,{arrayFormat:"brackets"})}}Uy=ve;ve.OpenAI=Uy;ve.DEFAULT_TIMEOUT=6e5;ve.OpenAIError=de;ve.APIError=ct;ve.APIConnectionError=la;ve.APIConnectionTimeoutError=pc;ve.APIUserAbortError=zt;ve.NotFoundError=Lg;ve.ConflictError=Dg;ve.RateLimitError=Fg;ve.BadRequestError=Pg;ve.AuthenticationError=bg;ve.InternalServerError=Og;ve.PermissionDeniedError=Mg;ve.UnprocessableEntityError=Ug;ve.toFile=Hg;ve.fileFromPath=kg;ve.Completions=_y;ve.Chat=ma;ve.ChatCompletionsPage=ha;ve.Embeddings=xy;ve.Files=bc;ve.FileObjectsPage=Mc;ve.Images=Ry;ve.Audio=vi;ve.Moderations=Ny;ve.Models=Bc;ve.ModelsPage=$c;ve.FineTuning=or;ve.Graders=Vc;ve.VectorStores=ir;ve.VectorStoresPage=Jc;ve.VectorStoreSearchResponsesPage=Kc;ve.Beta=vo;ve.Batches=hc;ve.BatchesPage=mc;ve.Uploads=Wc;ve.Responses=Yc;ve.Evals=_i;ve.EvalListResponsesPage=Pc;ve.Containers=Si;ve.ContainerListResponsesPage=Ic;const Au=n=>new Promise(e=>setTimeout(e,n));function KA(n){return n.map(e=>e.type==="text"?{type:"text",text:e.text}:{type:"image_url",image_url:{url:`data:${e.mimeType};base64,${e.data}`}})}class XA{constructor(e){this.client=new ve({apiKey:e.apiKey,dangerouslyAllowBrowser:!0}),this.model=e.model}async processText(e,t,o,s){var p,g,h;let a;for(let y=0;y<=6;y++)try{if(o.current)throw new Error("Operation stopped by user.");const T=await this.client.chat.completions.create({model:this.model,messages:[{role:"user",content:`${e}

---

${t}`}],stream:!1});s==null||s("");const w=((g=(p=T.choices[0])==null?void 0:p.message)==null?void 0:g.content)||"";return Rn.normalizeOpenAI(w)}catch(T){if(a=T,o.current)throw new Error("Operation stopped by user.");if((T==null?void 0:T.status)===401||(h=T==null?void 0:T.message)!=null&&h.toLowerCase().includes("api key"))throw new Error("Your OpenAI API key is invalid or has expired. Please check your API key settings.");if(y<6){let w=2e3*Math.pow(2,y);(T==null?void 0:T.status)===429&&(w=15e3*Math.pow(2,y)+Math.floor(Math.random()*5e3)),console.warn(`OpenAI API attempt ${y+1} failed, retrying in ${w}ms...`,T),s==null||s(`The AI model is busy. Retrying in ${Math.round(w/1e3)}s... (Attempt ${y+2}/7)`),await Au(w)}else throw console.error("All OpenAI API attempts failed:",T),(T==null?void 0:T.status)===429?new Error("You have exceeded your OpenAI API quota. Please check your plan and billing details."):new Error(`Failed to process text with OpenAI API: ${(T==null?void 0:T.message)||"Unknown error"}`)}throw new Error(`Failed to process text with OpenAI API after 6 attempts. Last error: ${a}`)}async processTextStream(e,t,o,s,a){var h,y,T;let d,g="";for(let w=0;w<=6;w++)try{if(s.current)throw new Error("Operation stopped by user.");const _=await this.client.chat.completions.create({model:this.model,messages:[{role:"user",content:`${e}

---

${t}`}],stream:!0});g="";for await(const A of _){if(s.current)throw new Error("Operation stopped by user.");const k=((y=(h=A.choices[0])==null?void 0:h.delta)==null?void 0:y.content)||"";k&&(g+=k,o(k))}return a==null||a(""),Rn.normalizeOpenAI(g)}catch(_){if(d=_,s.current)throw new Error("Operation stopped by user.");if((_==null?void 0:_.status)===401||(T=_==null?void 0:_.message)!=null&&T.toLowerCase().includes("api key"))throw new Error("Your OpenAI API key is invalid or has expired. Please check your API key settings.");if(w<6){let A=2e3*Math.pow(2,w);(_==null?void 0:_.status)===429&&(A=15e3*Math.pow(2,w)+Math.floor(Math.random()*5e3)),console.warn(`OpenAI API stream attempt ${w+1} failed, retrying in ${A}ms...`,_),a==null||a(`The AI model is busy. Retrying in ${Math.round(A/1e3)}s... (Attempt ${w+2}/7)`),await Au(A)}else throw console.error("All OpenAI API stream attempts failed:",_),(_==null?void 0:_.status)===429?new Error("You have exceeded your OpenAI API quota. Please check your plan and billing details."):new Error(`Failed to process text stream with OpenAI API: ${(_==null?void 0:_.message)||"Unknown error"}`)}throw new Error(`Failed to process text stream with OpenAI API after 6 attempts. Last error: ${d}`)}async generateScriptStream(e,t,o,s,a){var h,y,T;let d,g="";for(let w=0;w<=6;w++)try{if(s.current)throw new Error("Operation stopped by user.");const _=KA(t),A=[{role:"user",content:[{type:"text",text:e},..._]}],k=await this.client.chat.completions.create({model:this.model,messages:A,stream:!0});g="";for await(const N of k){if(s.current)throw new Error("Operation stopped by user.");const B=((y=(h=N.choices[0])==null?void 0:h.delta)==null?void 0:y.content)||"";B&&(g+=B,o(B))}return a==null||a(""),Rn.normalizeOpenAI(g)}catch(_){if(d=_,s.current)throw new Error("Operation stopped by user.");if((_==null?void 0:_.status)===401||(T=_==null?void 0:_.message)!=null&&T.toLowerCase().includes("api key"))throw new Error("Your OpenAI API key is invalid or has expired. Please check your API key settings.");if(w<6){let A=2e3*Math.pow(2,w);(_==null?void 0:_.status)===429&&(A=15e3*Math.pow(2,w)+Math.floor(Math.random()*5e3)),console.warn(`OpenAI API multi-modal stream attempt ${w+1} failed, retrying in ${A}ms...`,_),a==null||a(`The AI model is busy. Retrying in ${Math.round(A/1e3)}s... (Attempt ${w+2}/7)`),await Au(A)}else throw console.error("All OpenAI API multi-modal stream attempts failed:",_),(_==null?void 0:_.status)===429?new Error("You have exceeded your OpenAI API quota. Please check your plan and billing details."):new Error(`Failed to process multi-modal stream with OpenAI API: ${(_==null?void 0:_.message)||"Unknown error"}`)}throw new Error(`Failed to process multi-modal stream with OpenAI API after 6 attempts. Last error: ${d}`)}}const Iu=n=>new Promise(e=>setTimeout(e,n));class QA{constructor(e){this.baseUrl=e.ollamaBaseUrl||"http://localhost:11434",this.model=e.model}async makeRequest(e,t,o=!1){const s=await fetch(`${this.baseUrl}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,stream:o})});if(!s.ok){const a=await s.text();throw new Error(`Ollama API error: ${s.status} - ${a}`)}return s}async processText(e,t,o,s){var p,g;let a;for(let h=0;h<=6;h++)try{if(o.current)throw new Error("Operation stopped by user.");const T=await(await this.makeRequest("/api/chat",{model:this.model,messages:[{role:"user",content:`${e}

---

${t}`}]},!1)).json();return s==null||s(""),Rn.normalizeOllama(T.message.content)}catch(y){if(a=y,o.current)throw new Error("Operation stopped by user.");if((p=y==null?void 0:y.message)!=null&&p.includes("fetch")||(g=y==null?void 0:y.message)!=null&&g.includes("Network"))throw new Error(`Cannot connect to Ollama at ${this.baseUrl}. Please ensure Ollama is running locally.`);if(h<6){const T=2e3*Math.pow(2,h);console.warn(`Ollama API attempt ${h+1} failed, retrying in ${T}ms...`,y),s==null||s(`Retrying in ${Math.round(T/1e3)}s... (Attempt ${h+2}/7)`),await Iu(T)}else throw console.error("All Ollama API attempts failed:",y),new Error(`Failed to process text with Ollama: ${(y==null?void 0:y.message)||"Unknown error"}`)}throw new Error(`Failed to process text with Ollama after 6 attempts. Last error: ${a}`)}async processTextStream(e,t,o,s,a){var h,y,T,w;let d,g="";for(let _=0;_<=6;_++)try{if(s.current)throw new Error("Operation stopped by user.");const k=(h=(await this.makeRequest("/api/chat",{model:this.model,messages:[{role:"user",content:`${e}

---

${t}`}]},!0)).body)==null?void 0:h.getReader();if(!k)throw new Error("No response body reader available");const N=new TextDecoder;for(g="";;){if(s.current)throw k.cancel(),new Error("Operation stopped by user.");const{done:B,value:D}=await k.read();if(B)break;const U=N.decode(D,{stream:!0}).split(`
`).filter(H=>H.trim());for(const H of U)try{const q=((y=JSON.parse(H).message)==null?void 0:y.content)||"";q&&(g+=q,o(q))}catch{}}return a==null||a(""),Rn.normalizeOllama(g)}catch(A){if(d=A,s.current)throw new Error("Operation stopped by user.");if((T=A==null?void 0:A.message)!=null&&T.includes("fetch")||(w=A==null?void 0:A.message)!=null&&w.includes("Network"))throw new Error(`Cannot connect to Ollama at ${this.baseUrl}. Please ensure Ollama is running locally.`);if(_<6){const k=2e3*Math.pow(2,_);console.warn(`Ollama API stream attempt ${_+1} failed, retrying in ${k}ms...`,A),a==null||a(`Retrying in ${Math.round(k/1e3)}s... (Attempt ${_+2}/7)`),await Iu(k)}else throw console.error("All Ollama API stream attempts failed:",A),new Error(`Failed to process text stream with Ollama: ${(A==null?void 0:A.message)||"Unknown error"}`)}throw new Error(`Failed to process text stream with Ollama after 6 attempts. Last error: ${d}`)}async generateScriptStream(e,t,o,s,a){var h,y,T,w;let d,g="";for(let _=0;_<=6;_++)try{if(s.current)throw new Error("Operation stopped by user.");const A=t.filter(U=>U.type==="text").map(U=>U.text),k=t.filter(U=>U.type==="image").map(U=>U.data),N={role:"user",content:`${e}

${A.join(`
`)}`};k.length>0&&(N.images=k);const D=(h=(await this.makeRequest("/api/chat",{model:this.model,messages:[N]},!0)).body)==null?void 0:h.getReader();if(!D)throw new Error("No response body reader available");const F=new TextDecoder;for(g="";;){if(s.current)throw D.cancel(),new Error("Operation stopped by user.");const{done:U,value:H}=await D.read();if(U)break;const q=F.decode(H,{stream:!0}).split(`
`).filter(ie=>ie.trim());for(const ie of q)try{const J=((y=JSON.parse(ie).message)==null?void 0:y.content)||"";J&&(g+=J,o(J))}catch{}}return a==null||a(""),Rn.normalizeOllama(g)}catch(A){if(d=A,s.current)throw new Error("Operation stopped by user.");if((T=A==null?void 0:A.message)!=null&&T.includes("fetch")||(w=A==null?void 0:A.message)!=null&&w.includes("Network"))throw new Error(`Cannot connect to Ollama at ${this.baseUrl}. Please ensure Ollama is running locally.`);if(_<6){const k=2e3*Math.pow(2,_);console.warn(`Ollama API multi-modal stream attempt ${_+1} failed, retrying in ${k}ms...`,A),a==null||a(`Retrying in ${Math.round(k/1e3)}s... (Attempt ${_+2}/7)`),await Iu(k)}else throw console.error("All Ollama API multi-modal stream attempts failed:",A),new Error(`Failed to process multi-modal stream with Ollama: ${(A==null?void 0:A.message)||"Unknown error"}`)}throw new Error(`Failed to process multi-modal stream with Ollama after 6 attempts. Last error: ${d}`)}}function Xc(n){switch(n.provider){case"gemini":return new Vx(n);case"openai":return new XA(n);case"ollama":return new QA(n);default:throw new Error(`Unknown AI provider: ${n.provider}`)}}const Fy={gemini:"gemini-2.0-flash-exp",openai:"gpt-4o",ollama:"llama3.2"},ku="ai-provider-settings",Bm={provider:"gemini",apiKey:"",model:Fy.gemini,ollamaBaseUrl:"http://localhost:11434"};class po{static getSettings(){try{const e=localStorage.getItem(ku);if(e){const t=JSON.parse(e);return{...Bm,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...Bm}}static saveSettings(e){try{localStorage.setItem(ku,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}static clearSettings(){try{localStorage.removeItem(ku)}catch(e){console.error("Failed to clear settings:",e)}}static getApiKey(e){const t=this.getSettings();return t.provider===e?t.apiKey:""}static setApiKey(e,t){const o=this.getSettings();o.provider===e&&(o.apiKey=t,this.saveSettings(o))}}async function Ru(n,e,t,o,s){const a=po.getSettings();return Xc({provider:a.provider,apiKey:a.apiKey,model:a.model,ollamaBaseUrl:a.ollamaBaseUrl}).processText(e,t,o,s)}async function nc(n,e,t,o,s,a){const d=po.getSettings();return Xc({provider:d.provider,apiKey:d.apiKey,model:d.model,ollamaBaseUrl:d.ollamaBaseUrl}).processTextStream(e,t,o,s,a)}async function ZA(n,e,t,o,s,a){const d=po.getSettings();return Xc({provider:d.provider,apiKey:d.apiKey,model:d.model,ollamaBaseUrl:d.ollamaBaseUrl}).generateScriptStream(e,t,o,s,a)}const jA=({content:n,onClose:e})=>{const t=s=>{let a=s;return a=a.replace(/:::ShowGuided\(ShowGuided=Yes\)([\s\S]*?):::/g,(d,p)=>`<div class="guided-block">${p}</div>`),a=a.replace(/:::ShowAdvanced\(ShowAdvanced=Yes\)([\s\S]*?):::/g,(d,p)=>`<div class="advanced-block">${p}</div>`),a=a.replace(/:::ShowActivity\(ShowActivity=Yes\)([\s\S]*?):::/g,(d,p)=>`<div class="activity-block">${p}</div>`),a=a.replace(/^>(.+)$/gm,"<blockquote>$1</blockquote>"),a=a.replace(/>\[!note\]\s*(.+)/g,'<div class="note-block"> Note: $1</div>'),a=a.replace(/>\[!help\]\s*(.+)/g,'<div class="help-block"> Help: $1</div>'),a=a.replace(/>\[\+alert\]\s*(.+)/g,'<div class="alert-block"> Alert: $1</div>'),a=a.replace(/>\[!knowledge\]\s*(.+)/g,'<div class="knowledge-block"> Knowledge: $1</div>'),a=a.replace(/>\[\+hint\]\s*(.+)/g,'<div class="hint-block"> Hint: $1</div>'),a=a.replace(/>\[challenge-title\]:\s*(.+)/g,'<h1 class="challenge-title">$1</h1>'),a=a.replace(/>\[overview\]:\s*(.+)/g,'<div class="overview">$1</div>'),a=a.replace(/>\[recap\]:/g,'<div class="recap"><h3>Recap</h3>'),a=a.replace(/>\[next-steps\]:/g,'<div class="next-steps"><h3>Next Steps</h3>'),a=a.replace(/^### (.+)$/gm,"<h3>$1</h3>"),a=a.replace(/^## (.+)$/gm,"<h2>$1</h2>"),a=a.replace(/^# (.+)$/gm,"<h1>$1</h1>"),a=a.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),a=a.replace(/\*(.+?)\*/g,"<em>$1</em>"),a=a.replace(/`([^`]+)`/g,"<code>$1</code>"),a=a.replace(/\+\+\+(.+?)\+\+\+/g,'<span class="input-text">$1</span>'),a=a.replace(/\[([^\]]+)\]\(([^)]+)\s*"([^"]+)"\)/g,'<a href="$2" title="$3">$1</a>'),a=a.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),a=a.replace(/^- (.+)$/gm,"<li>$1</li>"),a=a.replace(/(<li>.*<\/li>\n?)+/g,"<ul>$&</ul>"),a=a.replace(/\n\n/g,"<br/><br/>"),a=a.replace(/\n/g,"<br/>"),a},o=pe.useMemo(()=>t(n),[n]);return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Markdown Preview"}),E.jsx("button",{onClick:e,className:"text-gray-600 hover:text-gray-800 text-2xl",children:""})]}),E.jsx("div",{className:"markdown-preview prose max-w-none",dangerouslySetInnerHTML:{__html:o}}),E.jsx("style",{children:`
          .markdown-preview {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
          }

          .markdown-preview h1 {
            font-size: 2em;
            font-weight: bold;
            margin: 1em 0 0.5em 0;
            color: #1a1a1a;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.3em;
          }

          .markdown-preview h2 {
            font-size: 1.5em;
            font-weight: bold;
            margin: 1em 0 0.5em 0;
            color: #1a1a1a;
          }

          .markdown-preview h3 {
            font-size: 1.25em;
            font-weight: bold;
            margin: 0.8em 0 0.4em 0;
            color: #1a1a1a;
          }

          .markdown-preview .challenge-title {
            color: #059669;
            border-bottom: 3px solid #059669;
          }

          .markdown-preview .overview {
            background-color: #f0f9ff;
            border-left: 4px solid #0284c7;
            padding: 1em;
            margin: 1em 0;
            border-radius: 4px;
          }

          .markdown-preview blockquote {
            border-left: 4px solid #d1d5db;
            padding-left: 1em;
            margin: 0.5em 0;
            color: #6b7280;
          }

          .markdown-preview .guided-block {
            background-color: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 1em;
            margin: 1em 0;
          }

          .markdown-preview .advanced-block {
            background-color: #e0e7ff;
            border: 1px solid #6366f1;
            border-radius: 8px;
            padding: 1em;
            margin: 1em 0;
          }

          .markdown-preview .activity-block {
            background-color: #ecfccb;
            border: 1px solid #84cc16;
            border-radius: 8px;
            padding: 1em;
            margin: 1em 0;
          }

          .markdown-preview .note-block {
            background-color: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 0.8em;
            margin: 0.8em 0;
            border-radius: 4px;
          }

          .markdown-preview .help-block {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 0.8em;
            margin: 0.8em 0;
            border-radius: 4px;
          }

          .markdown-preview .alert-block {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 0.8em;
            margin: 0.8em 0;
            border-radius: 4px;
          }

          .markdown-preview .knowledge-block {
            background-color: #f3e8ff;
            border-left: 4px solid #a855f7;
            padding: 0.8em;
            margin: 0.8em 0;
            border-radius: 4px;
          }

          .markdown-preview .hint-block {
            background-color: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 0.8em;
            margin: 0.8em 0;
            border-radius: 4px;
          }

          .markdown-preview ul {
            margin: 0.5em 0;
            padding-left: 2em;
          }

          .markdown-preview li {
            margin: 0.3em 0;
          }

          .markdown-preview strong {
            font-weight: 600;
            color: #1f2937;
          }

          .markdown-preview em {
            font-style: italic;
            color: #4b5563;
          }

          .markdown-preview code {
            background-color: #f3f4f6;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #be185d;
          }

          .markdown-preview .input-text {
            background-color: #fef3c7;
            padding: 0.2em 0.5em;
            border-radius: 3px;
            font-family: monospace;
            font-weight: 500;
            color: #92400e;
            border: 1px solid #fbbf24;
          }

          .markdown-preview a {
            color: #2563eb;
            text-decoration: underline;
          }

          .markdown-preview a:hover {
            color: #1d4ed8;
          }

          .markdown-preview .recap,
          .markdown-preview .next-steps {
            background-color: #f0fdf4;
            border: 1px solid #22c55e;
            border-radius: 8px;
            padding: 1em;
            margin: 1em 0;
          }
        `})]})})},eI=({labs:n,activeTabIndex:e,onTabChange:t,textMode:o})=>{const[s,a]=pe.useState(!1),d=n[e],p=d?o==="copy"?d.content.replace(/\+\+\+/g,"++"):d.content:"";return E.jsxs("div",{className:"bg-dark-card rounded-lg border border-dark-border flex flex-col h-full shadow-lg",children:[E.jsxs("div",{className:"flex border-b border-dark-border overflow-x-auto items-center",role:"tablist","aria-label":"Processed Labs",children:[E.jsx("div",{className:"flex flex-1 overflow-x-auto",children:n.map((g,h)=>E.jsx("button",{onClick:()=>t(h),className:`px-4 py-3 font-semibold transition-colors duration-200 whitespace-nowrap text-sm ${e===h?"bg-brand-primary text-white":"text-dark-text-secondary hover:bg-gray-700"}`,role:"tab","aria-selected":e===h,"aria-controls":`tabpanel-${h}`,id:`tab-${h}`,children:g.title.replace(/^(Lab \d+:\s*)/,"").trim()},h))}),d&&E.jsx("button",{onClick:()=>a(!0),className:"px-4 py-3 text-dark-text-secondary hover:text-white hover:bg-gray-700 transition-colors",title:"Preview Markdown",children:E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),E.jsx("div",{className:"relative flex-grow min-h-0",role:"tabpanel",id:`tabpanel-${e}`,"aria-labelledby":`tab-${e}`,children:d?E.jsx(oc,{title:d.title,content:p,isReadOnly:!0,showTitle:!1,placeholder:"Output will appear here after processing..."}):E.jsx("div",{className:"p-4 text-dark-text-secondary",children:"No lab selected."})}),s&&d&&E.jsx(jA,{content:p,onClose:()=>a(!1)})]})},tI=({labelLeft:n,labelRight:e,value:t,onChange:o,className:s})=>{const a=t==="type";return E.jsxs("div",{className:`flex items-center rounded-md bg-gray-700 border border-dark-border p-0.5 ${s}`,children:[E.jsx("button",{onClick:()=>o("type"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a?"bg-brand-primary text-white":"hover:bg-gray-600 text-dark-text"}`,"aria-pressed":a,children:n}),E.jsx("button",{onClick:()=>o("copy"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a?"hover:bg-gray-600 text-dark-text":"bg-brand-primary text-white"}`,"aria-pressed":!a,children:e})]})},nI=({agents:n,completedAgentIds:e,viewingAgentId:t,onSelectHistory:o})=>e.length===0?null:E.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-border",children:[E.jsxs("h3",{className:"text-md font-semibold text-dark-text-secondary mb-3 flex items-center gap-2",children:[E.jsx(ZT,{className:"w-5 h-5"}),"Workflow Stages"]}),E.jsx("div",{className:"space-y-2",children:e.map(s=>{const a=n.find(g=>g.id===s);if(!a)return null;const d=t===s,p=`w-full text-left p-2 rounded-md text-sm transition-colors flex items-center gap-3 ${d?"bg-brand-primary/20 text-green-300 font-semibold":"text-dark-text-secondary hover:bg-gray-700"}`;return E.jsxs("button",{onClick:()=>o(s),className:p,"aria-pressed":d,children:[E.jsx("span",{className:"flex-shrink-0 w-6 h-6 p-1 bg-gray-600 rounded-md",children:a.icon}),E.jsx("span",{className:"flex-grow",children:a.title})]},s)})})]}),rI=n=>new Promise(e=>setTimeout(e,n)),Nu=(n,e="series")=>{const t=po.getSettings().provider,o=Kp(t);switch(n){case 1:return e==="single"?o.AGENT_1_SINGLE_PROMPT:o.AGENT_1_SERIES_COMBINED_PROMPT;case 2:return o.AGENT_RESTRUCTURE_PROMPT;case 3:return o.COMBINED_AGENT_PROMPT;default:return Kp("openai").COMBINED_AGENT_PROMPT}},$m=(n,e)=>{const t=document.createElement("a"),o=new Blob([n],{type:"text/markdown;charset=utf-8"});t.href=URL.createObjectURL(o),t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},oI=n=>{const t=n.split(`
`).find(o=>o.startsWith("**Series Name:**"));return t?`lab-series-${t.replace("**Series Name:**","").trim().replace(/[^a-z0-9\s-]/gi,"").replace(/\s+/g,"-").toLowerCase()}.md`:"lab-series.md"},iI=n=>{const e=n.match(/^>\[challenge-title\]:\s*(.*)/m);return e?e[1].trim():null},sI=({navigateToScorer:n,onOpenSettings:e})=>{const[t,o]=pe.useState(""),[s,a]=pe.useState(""),[d,p]=pe.useState(!1),[g,h]=pe.useState(null),[y,T]=pe.useState(null),[w,_]=pe.useState({}),[A,k]=pe.useState("topic"),[N,B]=pe.useState("series"),[D,F]=pe.useState(null),[U,H]=pe.useState({}),[O,q]=pe.useState(null),[ie,z]=pe.useState([]),[J,te]=pe.useState([]),[me,Ee]=pe.useState(0),[Ye,Ke]=pe.useState("type"),[be,ke]=pe.useState(0),Y=pe.useRef(!1),Z=pe.useRef(null),K=cw.filter(fe=>fe.modes.includes(A));pe.useEffect(()=>{const fe=Object.entries(w).find(([,Le])=>Le==="processing");if(fe){const Le=parseInt(fe[0],10),Xe=K.find(St=>St.id===Le),Re=(Xe==null?void 0:Xe.duration)||30;Z.current&&clearInterval(Z.current);const Rt=Date.now();Z.current=window.setInterval(()=>{const St=(Date.now()-Rt)/1e3,Ot=Math.min(St/Re*100,100);ke(Ot),Ot>=100&&(Z.current&&clearInterval(Z.current),Z.current=null)},200)}else Z.current&&(clearInterval(Z.current),Z.current=null),ke(0);return()=>{Z.current&&clearInterval(Z.current)}},[w,K]),pe.useEffect(()=>{var fe,Le;if(O!==null&&U[O]){const Xe=O===1&&N==="series"&&ie.length>0,Re=(O===3||O===4)&&J.length>0;a(Xe?((fe=ie[me])==null?void 0:fe.content)||"":Re?((Le=J[me])==null?void 0:Le.content)||"":U[O])}},[O,U,J,ie,me,N]);const R=fe=>fe?fe.split("--- START OF FILE:").filter(Xe=>Xe.trim().length>0).map(Xe=>{const Re=Xe.split(`
`),Rt=Re[0].replace(/---/g,"").trim(),St=Re.slice(1).join(`
`).replace(/--- END OF FILE ---\s*$/,"").trim();return{title:Rt,content:St}}):[],M=pe.useCallback(()=>{Y.current=!0,h("Stopping workflow...")},[]),X=pe.useCallback(async fe=>{Y.current=!1,p(!0),h(null),T(null),q(null);const Le=K.slice().reverse().find(Te=>w[Te.id]==="done"),Xe=Le?Le.id:0;let Re,Rt,St={...U},Ot={...w};Le&&fe.id>Le.id?(Re=U[Le.id]||"",Rt=K.filter(Te=>Te.id>Xe&&Te.id<=fe.id)):(a(""),z([]),te([]),St={},Ot=K.reduce((Te,Se)=>(Te[Se.id]="pending",Te),{}),Re=t,Rt=K.filter(Te=>Te.id<=fe.id)),H(St),_(Ot);let Nt=null,an=null,Gt=!1;try{for(const Te of Rt){if(Y.current){Gt=!0,Nt&&_(Se=>({...Se,[Nt]:"pending"}));break}if(Nt=Te.id,_(Se=>({...Se,[Te.id]:"processing"})),Te.id===1){const Se=Nu(1,N);if(te([]),Re=Te.id===fe.id?await nc(Te.model,Se,t,De=>a(vt=>vt+De),Y,T):await Ru(Te.model,Se,t,Y,T),Y.current){Gt=!0;break}if(N==="series"){const De=Re.split(`
===SPLIT===
`);if(De.length===2){const vt=De[0],yn=De[1];$m(vt,oI(vt));const Ar=R(yn);z(Ar),H(sr=>({...sr,[Te.id]:yn}))}else throw new Error("Agent 1 failed to produce the correct split output format for the lab series.")}else z(R(Re)),H(De=>({...De,[Te.id]:Re}))}else if(Te.id===3){let Se=ie;if(Se.length===0){const De=U[Xe]||t;Se=R(De),Se.length===0&&De&&(Se=[{title:iI(De)||D||"Custom Lab",content:De}]),Se.length>0&&z(Se)}if(Se.length===0)throw new Error("No labs found to process. Please provide a document or run the first agent.");const qt=[];for(let De=0;De<Se.length;De++){if(Y.current){Gt=!0;break}const vt=Se[De];a(`Processing lab ${De+1} of ${Se.length}: ${vt.title}`);const yn=Nu(Te.id),Ar=await Ru(Te.model,yn,vt.content,Y,T);if(Y.current){Gt=!0;break}qt.push({title:vt.title,content:Ar}),te([...qt]),De<Se.length-1&&await rI(1500)}if(Gt)break;Ee(0),Re=`Processed ${qt.length} lab(s). View them in the tabs.`,a(Re),H(De=>({...De,[Te.id]:Re}))}else if(Te.id===4){if(J.length===0)throw new Error("No processed labs to export. Run Agent 3 first.");J.forEach(Se=>{const qt=`${Se.title.replace(/[<>:"/\\|?*]/g,"_")}.md`;$m(Se.content,qt)}),Re=`Exported ${J.length} lab(s) successfully.`,a(Re),H(Se=>({...Se,[Te.id]:Re}))}else{const Se=Nu(Te.id);if(Re=Te.id===fe.id?await nc(Te.model,Se,Re,De=>a(vt=>vt+De),Y,T):await Ru(Te.model,Se,Re,Y,T),Y.current){Gt=!0;break}H(De=>({...De,[Te.id]:Re}))}if(Y.current){Gt=!0,Nt&&_(Se=>({...Se,[Nt]:"pending"}));break}_(Se=>({...Se,[Te.id]:"done"})),an=Te.id}}catch(Te){const Se=Te instanceof Error?Te.message:"An error occurred during processing.";T(null),Nt&&!Y.current&&(_(qt=>({...qt,[Nt]:"error"})),h(Se)),console.error(Te)}Gt?(h("Workflow stopped by user."),T(null)):an&&(q(an),T(null)),p(!1)},[t,A,N,w,U,ie,J,D,K]),ue=fe=>{w[fe.id]==="done"?q(fe.id):X(fe)},ce=fe=>{var Xe;const Le=(Xe=fe.target.files)==null?void 0:Xe[0];if(Le){const Re=new FileReader;Re.onload=Rt=>{var Ot;const St=(Ot=Rt.target)==null?void 0:Ot.result;typeof St=="string"?(o(St),F(Le.name),a(""),_({}),H({}),q(null),z([]),te([])):(console.error("Failed to read file as text."),h("Could not read the selected file."))},Re.onerror=()=>h("Error reading the file."),Re.readAsText(Le)}},ye=pe.useCallback(()=>{o(""),a(""),p(!1),h(null),T(null),_({}),F(null),H({}),q(null),z([]),te([]),Ee(0),Y.current&&(Y.current=!1)},[]),_e=fe=>{k(fe),ye(),fe==="topic"&&B("series")},Ce=fe=>{N!==fe&&(B(fe),a(""),_({}),H({}),q(null),h(null),z([]),te([]),Ee(0))},Ne=O===1&&N==="series"&&ie.length>0?ie:(O===3||O===4)&&J.length>0?J:[],yt=Ye==="copy"?s.replace(/\+\+\+/g,"++"):s,xr=Number(Object.keys(w).find(fe=>w[Number(fe)]==="processing")),Ci=Object.keys(U).map(Number).sort((fe,Le)=>fe-Le);return E.jsx(E.Fragment,{children:E.jsxs("div",{className:"h-screen bg-dark-bg text-dark-text font-sans flex flex-col",children:[E.jsxs("header",{className:"bg-dark-card border-b border-dark-border p-4 shadow-md flex-shrink-0",children:[E.jsxs("h1",{className:"text-2xl font-bold text-center text-green-400 flex items-center justify-center gap-3",children:[E.jsx(XT,{className:"w-8 h-8"}),E.jsx("span",{children:"Challenge Labs: Lab Generator"})]}),E.jsx("p",{className:"text-center text-dark-text-secondary mt-1",children:"Transform documents with a sequential AI workflow."})]}),E.jsxs("main",{className:"flex flex-row p-4 gap-4 flex-grow min-h-0",children:[E.jsx("aside",{className:"w-full md:w-1/3 lg:w-1/4 flex-shrink-0",children:E.jsxs("div",{className:"bg-dark-card rounded-lg border border-dark-border flex flex-col h-full shadow-lg",children:[E.jsxs("div",{className:"p-4 border-b border-dark-border flex-shrink-0",children:[E.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Agent Workflow"}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex",children:[E.jsx("button",{onClick:()=>_e("topic"),className:`flex-1 px-4 py-2 text-sm font-semibold transition-colors duration-200 rounded-l-md ${A==="topic"?"bg-brand-primary text-white":"bg-gray-700 text-dark-text-secondary hover:bg-gray-600"}`,"aria-current":A==="topic"?"page":void 0,children:"Start from Topic"}),E.jsx("button",{onClick:()=>_e("document"),className:`flex-1 px-4 py-2 text-sm font-semibold transition-colors duration-200 rounded-r-md ${A==="document"?"bg-brand-primary text-white":"bg-gray-700 text-dark-text-secondary hover:bg-gray-600"}`,"aria-current":A==="document"?"page":void 0,children:"Start from Document"})]}),E.jsx(tI,{labelLeft:"Type Text",labelRight:"Copy Text",value:Ye,onChange:fe=>Ke(fe)}),A==="topic"&&E.jsxs("div",{className:"flex items-center rounded-md bg-gray-700 border border-dark-border p-0.5",children:[E.jsx("button",{onClick:()=>Ce("series"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-md transition-colors ${N==="series"?"bg-brand-primary text-white":"hover:bg-gray-600 text-dark-text"}`,children:"Lab Series"}),E.jsx("button",{onClick:()=>Ce("single"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-md transition-colors ${N==="single"?"bg-brand-primary text-white":"hover:bg-gray-600 text-dark-text"}`,children:"Single Lab"})]}),E.jsxs("div",{className:"flex gap-2 pt-2",children:[E.jsxs("button",{onClick:ye,className:"flex-1 p-2 rounded-md text-dark-text bg-gray-700 hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",title:"Start a fresh series","aria-label":"Start a fresh series",children:[E.jsx(QT,{className:"w-5 h-5"}),E.jsx("span",{children:"Reset"})]}),E.jsxs("button",{onClick:e,className:"flex-1 p-2 rounded-md text-dark-text bg-gray-700 hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",title:"Configure AI Provider","aria-label":"Configure AI Provider",children:[E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),E.jsx("span",{children:"Settings"})]}),E.jsxs("button",{onClick:n,className:"flex-1 p-2 rounded-md text-dark-text bg-gray-700 hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",title:"Switch to PowerShell Scorer","aria-label":"Switch to PowerShell Scorer",children:[E.jsx(Wm,{className:"w-5 h-5"}),E.jsx("span",{children:"PowerShell"})]})]})]}),E.jsx("div",{className:"mt-4",children:A==="document"?E.jsxs("div",{className:"text-center",children:[E.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer px-4 py-2 bg-brand-primary text-white font-semibold rounded-lg hover:bg-green-700 transition-all duration-200 ease-in-out inline-block",children:D?"Change File":"Select a file to upload"}),E.jsx("input",{id:"file-upload",type:"file",className:"sr-only",onChange:ce,accept:".md,.txt,text/plain"}),D&&E.jsxs("p",{className:"mt-2 text-xs text-dark-text-secondary text-center truncate",title:D,children:["Loaded: ",D]}),E.jsx("p",{className:"mt-2 text-xs text-dark-text-secondary",children:"Start processing at Agent 2."})]}):E.jsx("textarea",{value:t,onChange:fe=>{o(fe.target.value),(s||Object.keys(w).length>0)&&(a(""),_({}),H({}),q(null),z([]),te([]))},disabled:d,placeholder:N==="series"?"Create a new lab series on the following topic:":"Create a new single lab on the following topic:",className:"w-full p-2 bg-dark-bg text-dark-text rounded-md resize-y border border-dark-border focus:outline-none focus:ring-2 focus:ring-brand-primary disabled:opacity-70",style:{minHeight:"100px"},"aria-label":"Input Document"})})]}),E.jsxs("div",{className:"p-4 overflow-y-auto flex-grow",children:[d&&E.jsxs("button",{onClick:M,className:"w-full mb-4 px-4 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-all duration-200 ease-in-out flex items-center justify-center gap-2",children:[E.jsx(Ym,{className:"w-5 h-5"}),E.jsx("span",{children:"Stop Workflow"})]}),E.jsx("div",{className:"space-y-3",children:K.map(fe=>{const Le=w[fe.id]||"pending",Xe=d;return E.jsx(xw,{agent:fe,onClick:()=>ue(fe),status:Le,isDisabled:Xe,isViewing:O===fe.id,progress:fe.id===xr?be:Le==="done"?100:0},fe.id)})}),y&&!g&&E.jsx("div",{className:"mt-4 text-center text-yellow-400 bg-yellow-900/50 p-3 rounded-md",role:"status",children:y}),g&&E.jsx("div",{className:"mt-4 text-center text-red-400 bg-red-900/50 p-3 rounded-md",role:"alert",children:g}),E.jsx(nI,{agents:K,completedAgentIds:Ci,viewingAgentId:O,onSelectHistory:q})]})]})}),E.jsx("section",{className:"w-full md:w-2/3 lg:w-3/4 flex flex-col",children:Ne.length>0?E.jsx(eI,{labs:Ne,activeTabIndex:me,onTabChange:Ee,textMode:Ye}):E.jsx(oc,{title:"Processed Output",content:yt,isReadOnly:!0,isLoading:d,placeholder:"Output will appear here after processing..."})})]})]})})},aI=n=>new Promise((e,t)=>{const o=new FileReader;o.readAsDataURL(n),o.onload=()=>{const s=o.result;e(s.split(",")[1])},o.onerror=s=>t(s)}),to=({htmlFor:n,tooltip:e,children:t,className:o=""})=>E.jsxs("label",{htmlFor:n,className:`flex items-center gap-2 text-sm font-bold text-dark-text-secondary uppercase tracking-wider ${o}`,children:[t,E.jsx("span",{title:e,children:E.jsx(ew,{className:"w-4 h-4 text-gray-400"})})]}),ii=({id:n,value:e,onChange:t,placeholder:o,rows:s,disabled:a})=>E.jsx("textarea",{id:n,value:e,onChange:t,placeholder:o,rows:s,disabled:a,className:"w-full mt-2 p-2 bg-dark-bg text-dark-text rounded-md border border-dark-border focus:outline-none focus:ring-2 focus:ring-brand-primary disabled:opacity-50"}),In=({label:n,content:e,onCopy:t,isCode:o})=>E.jsxs("div",{className:"bg-dark-bg border border-dark-border/50 rounded-md",children:[E.jsxs("div",{className:"flex justify-between items-center px-3 py-1.5 border-b border-dark-border/50",children:[E.jsx("h5",{className:"text-xs font-semibold text-dark-text-secondary uppercase",children:n}),E.jsxs("button",{onClick:()=>t(Array.isArray(e)?e.join(`
`):e),className:"text-dark-text-secondary hover:text-white transition-colors text-xs flex items-center gap-1",title:`Copy ${n}`,children:[E.jsx(rw,{className:"w-4 h-4"}),"Copy"]})]}),E.jsx("div",{className:"p-3",children:o?E.jsx("pre",{className:"text-sm text-dark-text whitespace-pre-wrap font-mono bg-transparent",children:E.jsx("code",{children:e})}):Array.isArray(e)?E.jsx("ul",{className:"text-sm text-dark-text list-disc list-inside space-y-1",children:e.map((s,a)=>E.jsx("li",{children:s},a))}):E.jsx("p",{className:"text-sm text-dark-text whitespace-pre-wrap",children:e})})]}),lI=({navigateToGenerator:n,onOpenSettings:e})=>{const[t,o]=pe.useState(""),[s,a]=pe.useState(""),[d,p]=pe.useState(""),[g,h]=pe.useState(""),[y,T]=pe.useState(""),[w,_]=pe.useState([]),[A,k]=pe.useState([]),[N,B]=pe.useState(!1),[D,F]=pe.useState(null),[U,H]=pe.useState(""),[O,q]=pe.useState(!1),[ie,z]=pe.useState({0:!0}),J=pe.useRef(!1),te=pe.useRef(null),me=pe.useRef(null),Ee=async M=>{var ue;const X=(ue=M.target.files)==null?void 0:ue[0];if(X)if(X.type==="text/plain"||X.type==="text/markdown"){const ce=await X.text();o(ce),F(null)}else F("Please upload a valid .txt or .md file for instructions.")},Ye=async M=>{const X=M.target.files;if(X){F(null);const ue=[];for(let ye=0;ye<X.length;ye++){const _e=X[ye];if(_e.type.startsWith("image/")){const Ce=aI(_e).then(Ne=>({name:_e.name,type:_e.type,data:Ne}));ue.push(Ce)}}const ce=await Promise.all(ue);_(ye=>[...ye,...ce].slice(0,5))}},Ke=M=>{_(X=>X.filter((ue,ce)=>ce!==M))},be=pe.useCallback(async()=>{if(!t.trim()){F("Lab Instructions cannot be empty to analyze.");return}J.current=!1,q(!0),F(null),H("");try{await nc("gemini-2.5-pro",lw,t,M=>H(X=>X+M),J)}catch(M){const X=M instanceof Error?M.message:"An unexpected error occurred during analysis.";J.current||F(X)}finally{q(!1)}},[t]),ke=pe.useCallback(async()=>{if(!t.trim()){F("Lab Instructions cannot be empty.");return}J.current=!1,B(!0),F(null),k([]),z({0:!0});const M=[];let X=`## LAB INSTRUCTIONS (MARKDOWN)

${t}`;s.trim()&&(X+=`

## LAB ENVIRONMENT DETAILS

### VM Details
${s.trim()}`),d.trim()&&(X+=`

### Network Details
${d.trim()}`),g.trim()&&(X+=`

### Credential Details
${g.trim()}`),y.trim()&&(X+=`

### Domain Details
${y.trim()}`),M.push({type:"text",text:X});for(const ce of w)M.push({type:"image",mimeType:ce.type,data:ce.data});let ue="";try{if(await ZA("gemini-2.5-pro",uw,M,ce=>ue+=ce,J),!J.current){const ce=ue.replace(/```json|```/g,"").trim(),ye=JSON.parse(ce);k(ye)}}catch(ce){const ye=ce instanceof Error?ce.message:"An unexpected error occurred.";J.current?F("Generation stopped by user."):(F(`Failed to generate script. Raw output might be invalid JSON. Error: ${ye}`),console.error("Raw Gemini Response:",ue))}finally{B(!1)}},[t,s,d,g,y,w]),Y=pe.useCallback(()=>{J.current=!0,B(!1),q(!1)},[]),Z=M=>{navigator.clipboard.writeText(M).catch(X=>console.error("Failed to copy text: ",X))},K=M=>{z(X=>({...X,[M]:!X[M]}))},R=N||O||!t.trim();return E.jsxs("div",{className:"h-screen bg-dark-bg text-dark-text font-sans flex flex-col",children:[E.jsxs("header",{className:"bg-dark-card border-b border-dark-border p-4 shadow-md flex-shrink-0 relative",children:[E.jsxs("h1",{className:"text-2xl font-bold text-center text-green-400 flex items-center justify-center gap-3",children:[E.jsx(Wm,{className:"w-8 h-8"}),E.jsx("span",{children:"PowerShell Lab Scorer AI"})]}),E.jsx("p",{className:"text-center text-dark-text-secondary mt-1",children:"Generate PowerShell validation scripts from lab instructions."}),E.jsx("button",{onClick:n,className:"absolute top-1/2 -translate-y-1/2 left-4 px-3 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-all duration-200 ease-in-out flex items-center gap-2",title:"Switch to Lab Generator","aria-label":"Switch to Lab Generator",children:E.jsx(jT,{className:"w-5 h-5"})}),E.jsx("button",{onClick:e,className:"absolute top-1/2 -translate-y-1/2 right-4 px-3 py-2 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-all duration-200 ease-in-out flex items-center gap-2",title:"Configure AI Provider","aria-label":"Configure AI Provider",children:E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),E.jsxs("main",{className:"flex flex-row p-4 gap-4 flex-grow min-h-0",children:[E.jsxs("div",{className:"w-1/2 flex flex-col gap-4",children:[E.jsxs("div",{className:"bg-dark-card rounded-lg border border-dark-border p-4 flex-grow overflow-y-auto space-y-4",children:[E.jsxs("section",{children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx(to,{htmlFor:"lab-instructions",tooltip:"Paste the full markdown for the lab, or upload a .md or .txt file.",children:"Lab Instructions (Markdown)"}),E.jsxs("button",{onClick:()=>{var M;return(M=te.current)==null?void 0:M.click()},className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-700 rounded-md transition-colors flex items-center gap-2",children:[E.jsx(zp,{className:"w-4 h-4"})," Upload File"]}),E.jsx("input",{type:"file",ref:te,onChange:Ee,accept:".md,.txt",className:"sr-only"})]}),E.jsx(ii,{id:"lab-instructions",value:t,onChange:M=>o(M.target.value),placeholder:"Paste lab instructions, or upload a .md/.txt file. The AI will analyze this to understand the required tasks.",rows:8,disabled:N||O})]}),E.jsxs("section",{className:"bg-dark-bg/50 border border-dark-border rounded-lg overflow-hidden",children:[E.jsx("button",{onClick:()=>{},className:"w-full flex items-center justify-between p-3 text-left bg-dark-bg border-b border-dark-border",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Pu,{className:"w-5 h-5 text-yellow-400"}),E.jsx("span",{className:"font-semibold",children:"Scoring Assistant"})]})}),E.jsxs("div",{className:"p-3 space-y-3",children:[E.jsx("p",{className:"text-sm text-dark-text-secondary",children:"Get AI-powered suggestions for what to score in your lab based on the instructions provided."}),U&&!O&&E.jsx("div",{className:"p-3 bg-dark-bg border border-dark-border/50 rounded-md text-sm prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:U.replace(/\n/g,"<br />")}}),O&&E.jsx("div",{className:"p-3 bg-dark-bg border border-dark-border/50 rounded-md text-sm",children:E.jsx(oc,{title:"",content:U,isReadOnly:!0,isLoading:!0,showTitle:!1})}),E.jsx("button",{onClick:be,disabled:O||N||!t.trim(),className:"w-full px-4 py-2 bg-yellow-600/20 text-yellow-300 border border-yellow-500/30 font-semibold rounded-lg hover:bg-yellow-600/30 transition-all duration-200 ease-in-out flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:O?E.jsxs(E.Fragment,{children:[E.jsx(bu,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):"Analyze Instructions"})]})]}),E.jsxs("section",{children:[E.jsx("h3",{className:"text-md font-bold text-dark-text mb-2",children:"Lab Environment Details (Optional)"}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{children:[E.jsx(to,{htmlFor:"vm-details",tooltip:"List all relevant VM names, one per line or comma-separated.",children:"VM Details"}),E.jsx(ii,{id:"vm-details",value:s,onChange:M=>a(M.target.value),placeholder:"e.g., Server01, Client01",rows:2,disabled:N||O})]}),E.jsxs("div",{children:[E.jsx(to,{htmlFor:"network-details",tooltip:"Provide IPs, subnets, or other network info.",children:"Network Details"}),E.jsx(ii,{id:"network-details",value:d,onChange:M=>p(M.target.value),placeholder:"e.g., 10.0.0.10, 192.168.1.0/24",rows:2,disabled:N||O})]}),E.jsxs("div",{children:[E.jsx(to,{htmlFor:"credential-details",tooltip:"List any usernames, passwords, or roles needed.",children:"Credential Details"}),E.jsx(ii,{id:"credential-details",value:g,onChange:M=>h(M.target.value),placeholder:"e.g., Admin, User01",rows:2,disabled:N||O})]}),E.jsxs("div",{children:[E.jsx(to,{htmlFor:"domain-details",tooltip:"Specify the domain name if applicable.",children:"Domain Details"}),E.jsx(ii,{id:"domain-details",value:y,onChange:M=>T(M.target.value),placeholder:"e.g., contoso.com",rows:1,disabled:N||O})]})]})]}),E.jsxs("section",{children:[E.jsx(to,{htmlFor:"screenshots",tooltip:"Upload up to 5 screenshots of the final state for visual reference.",children:"Screenshots (Optional)"}),E.jsx("div",{className:"mt-2",children:E.jsxs("label",{htmlFor:"screenshot-upload",className:"relative block w-full border-2 border-dashed border-dark-border rounded-lg p-6 text-center hover:border-brand-primary cursor-pointer",children:[E.jsx(zp,{className:"mx-auto h-10 w-10 text-dark-text-secondary"}),E.jsx("span",{className:"mt-2 block text-sm font-semibold text-dark-text",children:"Click to upload screenshots"}),E.jsx("span",{className:"block text-xs text-dark-text-secondary",children:"PNG, JPG, GIF up to 10MB"}),E.jsx("input",{id:"screenshot-upload",type:"file",ref:me,onChange:Ye,multiple:!0,accept:"image/*",className:"sr-only"})]})}),w.length>0&&E.jsx("div",{className:"mt-2 space-y-1",children:w.map((M,X)=>E.jsxs("div",{className:"flex items-center justify-between bg-dark-bg p-1 px-2 rounded-md text-xs",children:[E.jsx("span",{className:"truncate",children:M.name}),E.jsx("button",{onClick:()=>Ke(X),className:"p-1 text-dark-text-secondary hover:text-red-400",children:E.jsx(Mu,{className:"w-4 h-4"})})]},X))})]})]}),N||O?E.jsxs("button",{onClick:Y,className:"w-full flex-shrink-0 px-4 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-all duration-200 ease-in-out flex items-center justify-center gap-2",children:[E.jsx(Ym,{className:"w-5 h-5"}),E.jsx("span",{children:"Stop"})]}):E.jsxs("button",{onClick:ke,disabled:R,className:"w-full flex-shrink-0 px-4 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-all duration-200 ease-in-out flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[E.jsx(Pu,{className:"w-6 h-6"}),E.jsx("span",{children:"Generate PowerShell Script"})]})]}),E.jsx("div",{className:"w-1/2 flex flex-col gap-4",children:A.length>0&&!N?E.jsxs("div",{className:"bg-dark-card rounded-lg border border-dark-border p-4 flex-grow overflow-y-auto space-y-4",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Wp,{className:"w-8 h-8 text-dark-text-secondary"}),E.jsxs("h2",{className:"text-xl font-bold",children:["Generated Scripts (",A.length,")"]})]}),A.map((M,X)=>E.jsxs("div",{className:"bg-dark-bg/50 border border-dark-border rounded-lg overflow-hidden",children:[E.jsxs("button",{onClick:()=>K(X),className:"w-full flex items-center justify-between p-3 text-left bg-dark-bg",children:[E.jsxs("h3",{className:"font-semibold text-green-400",children:["Requirement ",X+1,": ",M.title]}),ie[X]?E.jsx(nw,{className:"w-5 h-5"}):E.jsx(tw,{className:"w-5 h-5"})]}),ie[X]&&E.jsxs("div",{className:"p-3 space-y-3",children:[E.jsx("p",{className:"text-sm text-dark-text-secondary",children:"Follow these steps to configure this requirement in the lab authoring platform."}),E.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-dark-border",children:[E.jsxs("section",{children:[E.jsx("h4",{className:"font-bold",children:"Step 1: Create Activity Group"}),E.jsxs("div",{className:"mt-2 space-y-2",children:[E.jsx(In,{label:"Name",content:M.activityGroup.name,onCopy:Z}),E.jsx(In,{label:"Replacement Token Alias",content:M.activityGroup.replacementTokenAlias,onCopy:Z})]})]}),E.jsxs("section",{children:[E.jsx("h4",{className:"font-bold",children:"Step 2: Create Automated Activity"}),E.jsxs("div",{className:"mt-2 space-y-2",children:[E.jsx(In,{label:"Name",content:M.automatedActivity.name,onCopy:Z}),E.jsx(In,{label:"Configuration",content:M.automatedActivity.configuration,onCopy:Z})]})]}),E.jsxs("section",{children:[E.jsx("h4",{className:"font-bold",children:"Step 3: Configure Script"}),E.jsxs("div",{className:"mt-2 space-y-2",children:[E.jsx(In,{label:"Target VM",content:M.scriptConfig.targetVM,onCopy:Z}),E.jsx(In,{label:"Task List Fields",content:M.scriptConfig.taskListFields,onCopy:Z}),E.jsx(In,{label:"Correct Feedback",content:M.scriptConfig.correctFeedback,onCopy:Z}),E.jsx(In,{label:"Incorrect Feedback",content:M.scriptConfig.incorrectFeedback,onCopy:Z}),E.jsx(In,{label:"PowerShell Script",content:M.scriptConfig.powershellScript,onCopy:Z,isCode:!0})]})]})]})]})]},X)),E.jsxs("div",{className:"bg-blue-900/30 border border-blue-500/50 rounded-lg p-4 flex gap-4 items-start",children:[E.jsx(ow,{className:"w-8 h-8 text-blue-400 flex-shrink-0 mt-1"}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-blue-300",children:"How to see failure logs"}),E.jsx("p",{className:"text-sm text-blue-400 mt-1",children:"All generated scripts include a debug mode. To see detailed failure logs in your lab environment:"}),E.jsxs("ul",{className:"text-sm text-blue-400 list-disc list-inside mt-2 space-y-1",children:[E.jsxs("li",{children:["Create a lab variable named ",E.jsx("code",{className:"bg-black/30 px-1 rounded",children:"debug"})," and set its value to ",E.jsx("code",{className:"bg-black/30 px-1 rounded",children:"True"}),"."]}),E.jsx("li",{children:"Re-run the scoring script. The script output/logs will now show detailed messages."})]})]})]})]}):E.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center bg-dark-card rounded-lg border-2 border-dashed border-dark-border text-dark-text-secondary",children:N?E.jsxs(E.Fragment,{children:[E.jsx(bu,{className:"w-16 h-16 animate-spin text-brand-primary"}),E.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Generating Script..."}),E.jsx("p",{className:"mt-1 text-sm",children:"The AI is analyzing your instructions and building the script."})]}):E.jsxs(E.Fragment,{children:[E.jsx(Wp,{className:"w-16 h-16"}),E.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Ready to generate"}),E.jsx("p",{className:"mt-1 text-sm",children:"Your generated scoring scripts will appear here, grouped by requirement."})]})})})]}),D&&E.jsxs("div",{className:"p-3 bg-red-900/50 text-red-300 text-center text-sm font-medium flex justify-center items-center gap-2",children:[E.jsx(Mu,{className:"w-5 h-5"}),E.jsxs("p",{children:[E.jsx("strong",{children:"Error:"})," ",D]})]})]})};function uI({onClose:n}){const[e,t]=pe.useState(po.getSettings()),[o,s]=pe.useState(!1),a=y=>{t({...e,provider:y,model:Fy[y]})},d=()=>{po.saveSettings(e),s(!0),setTimeout(()=>s(!1),2e3)},p=()=>{n()},g=()=>{const y=JSON.stringify(e,null,2),T=new Blob([y],{type:"application/json"}),w=URL.createObjectURL(T),_=document.createElement("a");_.href=w,_.download="challenge-lab-ai-settings.json",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(w)},h=()=>{const y=document.createElement("input");y.type="file",y.accept=".json",y.onchange=T=>{var _;const w=(_=T.target.files)==null?void 0:_[0];if(w){const A=new FileReader;A.onload=k=>{var N;try{const B=JSON.parse((N=k.target)==null?void 0:N.result);t(B),s(!0),setTimeout(()=>s(!1),2e3)}catch{alert("Failed to import settings. Please ensure the file is a valid JSON file.")}},A.readAsText(w)}},y.click()};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h2",{className:"text-2xl font-bold text-white",children:"AI Provider Settings"}),E.jsx("button",{onClick:p,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"AI Provider"}),E.jsx("div",{className:"grid grid-cols-3 gap-3",children:["gemini","openai","ollama"].map(y=>E.jsx("button",{onClick:()=>a(y),className:`p-4 rounded-lg border-2 transition-all ${e.provider===y?"border-blue-500 bg-blue-900 bg-opacity-20":"border-gray-600 hover:border-gray-500"}`,children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:y}),y==="ollama"&&E.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Local"})]})},y))})]}),e.provider!=="ollama"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"API Key"}),E.jsx("input",{type:"password",value:e.apiKey,onChange:y=>t({...e,apiKey:y.target.value}),placeholder:`Enter your ${e.provider} API key`,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"}),E.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:[e.provider==="gemini"&&E.jsxs(E.Fragment,{children:["Get your API key from ",E.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Google AI Studio"})]}),e.provider==="openai"&&E.jsxs(E.Fragment,{children:["Get your API key from ",E.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"OpenAI Platform"})]})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Model"}),e.provider==="ollama"?E.jsxs("select",{value:e.model,onChange:y=>t({...e,model:y.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[E.jsx("option",{value:"llama3.2",children:"llama3.2 (Recommended)"}),E.jsx("option",{value:"llama3.2:8b",children:"llama3.2:8b (Smaller, faster)"}),E.jsx("option",{value:"mistral",children:"mistral"}),E.jsx("option",{value:"codellama",children:"codellama"}),E.jsx("option",{value:"qwen2.5",children:"qwen2.5"}),E.jsx("option",{value:"gemma2",children:"gemma2"}),E.jsx("option",{value:"llama3.1",children:"llama3.1"}),E.jsx("option",{value:"phi3",children:"phi3"})]}):E.jsx("input",{type:"text",value:e.model,onChange:y=>t({...e,model:y.target.value}),placeholder:"Model name",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"}),E.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:[e.provider==="gemini"&&E.jsx(E.Fragment,{children:"Recommended: gemini-2.0-flash-exp, gemini-1.5-pro"}),e.provider==="openai"&&E.jsx(E.Fragment,{children:"Recommended: gpt-4o, gpt-4-turbo, gpt-3.5-turbo"}),e.provider==="ollama"&&E.jsxs(E.Fragment,{children:["Select a model from the dropdown. Make sure it's installed with ",E.jsx("code",{className:"text-blue-400",children:"ollama pull <model>"})]})]})]}),e.provider==="ollama"&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ollama Base URL"}),E.jsx("input",{type:"text",value:e.ollamaBaseUrl,onChange:y=>t({...e,ollamaBaseUrl:y.target.value}),placeholder:"http://localhost:11434",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"}),E.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Make sure Ollama is running locally. Install from ",E.jsx("a",{href:"https://ollama.ai",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"ollama.ai"})]})]}),E.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-700 rounded-lg p-4",children:[E.jsx("h3",{className:"text-sm font-semibold text-blue-300 mb-2",children:"Provider Information"}),E.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[e.provider==="gemini"&&E.jsxs(E.Fragment,{children:[E.jsx("p",{children:" Google's Gemini models offer excellent performance for document processing"}),E.jsx("p",{children:" Free tier available with generous limits"}),E.jsx("p",{children:" Best for complex lab generation tasks"})]}),e.provider==="openai"&&E.jsxs(E.Fragment,{children:[E.jsx("p",{children:" OpenAI's GPT models are highly capable and reliable"}),E.jsx("p",{children:" Pay-as-you-go pricing"}),E.jsx("p",{children:" Great for general-purpose AI tasks"})]}),e.provider==="ollama"&&E.jsxs(E.Fragment,{children:[E.jsx("p",{children:" Run AI models locally on your own hardware"}),E.jsx("p",{children:" No API costs or rate limits"}),E.jsx("p",{children:" Requires Ollama to be installed and running"}),E.jsx("p",{children:" Model performance depends on your hardware"})]})]})]}),E.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[E.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Backup & Restore"}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:g,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm",children:"Export Settings"}),E.jsx("button",{onClick:h,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm",children:"Import Settings"})]}),E.jsx("p",{className:"mt-2 text-xs text-gray-400",children:"Export your settings to a JSON file for backup, or import previously saved settings."})]}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:d,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:o?"Saved!":"Save Settings"}),E.jsx("button",{onClick:p,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Close"})]})]})]})})}const cI=()=>{const[n,e]=pe.useState("generator"),[t,o]=pe.useState(!1),s=()=>{e("generator")},a=()=>{e("scorer")},d=()=>{o(!t)};return E.jsxs(E.Fragment,{children:[n==="scorer"?E.jsx(lI,{navigateToGenerator:s,onOpenSettings:d}):E.jsx(sI,{navigateToScorer:a,onOpenSettings:d}),t&&E.jsx(uI,{onClose:()=>o(!1)})]})},Oy=document.getElementById("root");if(!Oy)throw new Error("Could not find root element to mount to");const dI=YT.createRoot(Oy);dI.render(E.jsx(OT.StrictMode,{children:E.jsx(cI,{})}));
